<div class="crm-atc-container height-full"> 
    <div class="indice-container">
        <nsj-indice config="crm_tcs_cntrllr.configIndice"></nsj-indice>
    </div>
    <div class="crm-corpo-container">
        <!-- Container com o índice para scroll dos elementos -->
        <div class="headline-container">
            <nsj-headline headline-sub="true" class="headline-atcs">
                <div class="headline-fixed-ordensservicos hidden-xs">
                    <ul class="nsj-breadcrumb title pull-left hidden-sub-xs">
                        <li>
                            <a ui-sref="crm_dashboard_atendimentos_pendencias">Inicio</a>
                        </li>
                        <li>
                            <a ui-sref="crm_atcs">Atendimento Comercial</a>
                        </li>
                    </ul>
        
                    <div class="nsj-breadcrumb-back fixed-nsj-back">
                        <span ui-sref="crm_atcs" class="btn-voltar">
                            <i class="fas fa-angle-left"></i>
                        </span>             
                        <label> <span  ng-if="!crm_tcs_cntrllr.criandoNovo()">Novo Atendimento Comercial</span>
                        <span ng-if="crm_tcs_cntrllr.criandoNovo()"ng-bind= "crm_tcs_cntrllr.entity.area.nome"/>
        
        
        
                            {{rdnssrvcs_frm_cntrllr.entity.numero}}
                            <span ng-bind="rdnssrvcs_frm_cntrllr.getDescricaoStatus(rdnssrvcs_frm_cntrllr.entity.situacao)" ng-class="rdnssrvcs_frm_cntrllr.getClassStatus(rdnssrvcs_frm_cntrllr.entity.situacao)"></span>
                        </label>
                                        <div class="situacao-container" resizer>
                            <nsj-label             
                                ng-class="{'label-info': crm_tcs_cntrllr.entity.status === 0, 'label-warning': crm_tcs_cntrllr.entity.status === 2, 'label-success': crm_tcs_cntrllr.entity.status === 3, 'label-danger': crm_tcs_cntrllr.entity.status === 4, 'label-default': crm_tcs_cntrllr.entity.status === 1}" 
                                content="{{crm_tcs_cntrllr.entity.statusLabel}}">
                            </nsj-label>
                        </div>
                    </div>
                    <a ng-if="crm_tcs_cntrllr.entity.negociopai" class="btn btn-warning btn-xs" ng-click="crm_tcs_cntrllr.irParaAtcPai()">Ir para atendimento original</a>
                </div>
                
                <!-- {# HEADER DO ATENDIMENTO COMERCIAL MOBILE #} -->
                <div class="hidden-sm hidden-md hidden-lg hidden-xl container" resizer>
        
                    <span class="acoes-container" ng-class="{ 'btn-fixed dropdown btn-group-vertical' : isLarge }">
                        
                        <div class="acao headline-fixed-ordensservicos" style="float:none;">
        
                            <div class="nsj-breadcrumb-back fixed-nsj-back" style="margin-bottom: 10px;">
                                <span ui-sref="crm_atcs" class="btn-voltar">
                                    <i class="fas fa-angle-left"></i>
                                </span>             
                                <label> <span  ng-if="!crm_tcs_cntrllr.criandoNovo()">Novo Atendimento Comercial</span>
                                <span ng-if="crm_tcs_cntrllr.criandoNovo()"ng-bind= "crm_tcs_cntrllr.entity.area.nome"/>
        
        
        
                                    {{rdnssrvcs_frm_cntrllr.entity.numero}}
                                    <span ng-bind="rdnssrvcs_frm_cntrllr.getDescricaoStatus(rdnssrvcs_frm_cntrllr.entity.situacao)" ng-class="rdnssrvcs_frm_cntrllr.getClassStatus(rdnssrvcs_frm_cntrllr.entity.situacao)"></span>
                                </label>
                                                        <div class="situacao-container" resizer>
                                    <nsj-label             
                                        ng-class="{'label-info': crm_tcs_cntrllr.entity.status === 0, 'label-warning': crm_tcs_cntrllr.entity.status === 2, 'label-success': crm_tcs_cntrllr.entity.status === 3, 'label-danger': crm_tcs_cntrllr.entity.status === 4, 'label-default': crm_tcs_cntrllr.entity.status === 1}" 
                                        content="{{crm_tcs_cntrllr.entity.statusLabel}}">
                                    </nsj-label>
                                </div>
                            </div>
                            <a ng-if="crm_tcs_cntrllr.entity.negociopai" class="btn btn-warning btn-xs" ng-click="crm_tcs_cntrllr.irParaAtcPai()">Ir para atendimento original</a>
                        </div>
                        
                        <div class="acao" ng-if="crm_tcs_cntrllr.entity.status === 0"> 
                            <button type="button"
                                ng-class="{loading:crm_tcs_cntrllr.submittingCancelado}" 
                                ng-click="crm_tcs_cntrllr.abrirModalCancelarAtendimento()"
                                ng-disabled="crm_tcs_cntrllr.submittingCancelado"
                                class="btn btn-sm btn-default btn-save btn-geral">
                                <i class="fas fa-ban"></i> Cancelar Atendimento
                            </button>
                        </div>
        
                        <div class="acao" ng-if="crm_tcs_cntrllr.entity.status === 1" >
                            <button type="button"
                                ng-class="{loading:crm_tcs_cntrllr.submittingFechado}"
                                ng-click="crm_tcs_cntrllr.abrirModalFecharAtendimento()"
                                ng-disabled="crm_tcs_cntrllr.submittingFechado"
                                class="btn btn-sm btn-warning btn-save btn-geral">
                                <i class="fas fa-ban"></i> Fechar Atendimento
                            </button>
                        </div>
                        
                        <div class="acao" ng-if="crm_tcs_cntrllr.entity.status === 2">
                            <button type="button" 
                                ng-class="{loading:crm_tcs_cntrllr.submittingFinalizado}"  
                                ng-click="crm_tcs_cntrllr.finalizarAtendimento()" 
                                ng-disabled="crm_tcs_cntrllr.submittingFinalizado"
                                class="btn btn-sm btn-success btn-save btn-geral">
                                <i class="fas fa-lock"></i> Finalizar Atendimento
                            </button>
                        </div>
                        
                        <div class="acao" ng-if="crm_tcs_cntrllr.entity.status === 4">
                            <button type="button"
                                ng-class="{loading:crm_tcs_cntrllr.submittingDescancelado}" 
                                ng-click="crm_tcs_cntrllr.descancelarAtendimento()"
                                ng-disabled="crm_tcs_cntrllr.submittingDescancelado"
                                class="btn btn-sm btn-default btn-save btn-geral">
                                <i class="fas fa-ban"></i> Desfazer Cancelamento do Atendimento
                            </button>
                        </div>
        
                        <div class="acao" ng-if="(crm_tcs_cntrllr.entity.status > 0 && crm_tcs_cntrllr.entity.status < 3) || (crm_tcs_cntrllr.entity.status == 2) || (crm_tcs_cntrllr.entity.status > 0 && crm_tcs_cntrllr.entity.status < 3)">
                            
                            <!-- Todos as ações disparadas pelos botões dentro desse dropdown só podem ser realizadas em um atendimento existente. Condição no ng-if -->
                            <nsj-button-dropdown
                                color="default"
                                ng-disabled="crm_tcs_cntrllr.submittingCancelado"
                                dropdown-direction="down"
                                icon="fas fa-ellipsis-h"
                                ng-if="crm_tcs_cntrllr.entity.negocio != null">
        
                                <item-dropdown item-label="Reabrir Pedido" 
                                    ng-if="crm_tcs_cntrllr.entity.status == 2"
                                    ng-click="crm_tcs_cntrllr.reabrirAtendimento()"></item-dropdown>

                                
                                <item-dropdown item-label="Cancelar Atendimento" 
                                    ng-if="crm_tcs_cntrllr.entity.status > 0 && crm_tcs_cntrllr.entity.status < 3"
                                    ng-click="crm_tcs_cntrllr.abrirModalCancelarAtendimento()"></item-dropdown>
                                
                                <!-- Opções relacionadas a liberação ou cancelamento da liberação de projeto -->
                                <item-dropdown item-label="Liberar Projeto" ng-if="crm_tcs_cntrllr.entity.projeto == null"
                                    ng-click="crm_tcs_cntrllr.liberarProjeto(crm_tcs_cntrllr.entity)">
                                </item-dropdown>
    
                                <item-dropdown item-label="Cancelar a liberação do Projeto" ng-if="crm_tcs_cntrllr.entity.projeto != null && crm_tcs_cntrllr.entity.projeto.projeto != null"
                                    ng-click="crm_tcs_cntrllr.cancelarLiberacaoProjeto(crm_tcs_cntrllr.entity)">
                                </item-dropdown>
        
                            </nsj-button-dropdown>
                        </div>
        
                        <div class="acao" ng-if="crm_tcs_cntrllr.entity.projeto && (crm_tcs_cntrllr.entity.projeto.projeto!=null)">
                            <nsj-button color="default"  
                                ng-click="crm_tcs_cntrllr.abrirProjeto()"><i class="fas fa-link"></i> Ir Para o Projeto</nsj-button>   
                        </div>
        
                        <div class="acao">
                            <button class="btn  btn-default btn-delete btn-geral" ng-disabled="!crm_tcs_cntrllr.entity.negocio" ng-click="crm_tcs_cntrllr.abrirHistoricoModal()" ng-class="{'btn-md':!isLarge , 'btn-md btn-circle btn-fixed-sub': isLarge}" type="button">
                                <i class="fas fa-history"></i>
                            </button>
                        </div>
        
                        <div class="acao">
                            <!-- Envio de e-mail do atendimento -->
                            <nsj-button-dropdown
                                ng-if="crm_tcs_cntrllr.entity.negocio"
                                color="default" 
                                dropdown-direction="right" 
                                class="acao btn-enviar-email" 
                                label=""
                            >
                                <!-- Ícone ao lado esquerdo -->
                                <span slot="start">
                                    <span class="icone-envelope">
                                        <i class="fas fa-envelope"></i>
                                    </span>
                                    <span class="icone-seta">
                                        <i class="fas fa-caret-down"></i>
                                    </span>
                                </span>
        
                                <!-- Ação Enviar e-amail para Seguradora -->
                                <item-dropdown 
                                    ng-if="crm_tcs_cntrllr.entity.possuiseguradora && crm_tcs_cntrllr.entity.cliente && crm_tcs_cntrllr.entity.cliente.cliente"
                                    item-label="Enviar e-mail para a seguradora"
                                    ng-click="crm_tcs_cntrllr.abrirModalEnviarEmail(crm_tcs_cntrllr.EnumTipoEnvioEmail.teeSeguradora, crm_tcs_cntrllr.entity.cliente.cliente)">
                                    
                                    <div slot="end" class="nome">
                                        {{ crm_tcs_cntrllr.entity.cliente.nomefantasia }}
                                    </div>
                                </item-dropdown>
        
                                <!-- Ação Enviar e-amail para Prestadora-->
                                <item-dropdown 
                                    ng-repeat="fornecedorEnvolvido in crm_tcs_cntrllr.arrFornecedoresEnvolvidos"
                                    item-label="Enviar e-mail para a prestadora"
                                    ng-click="crm_tcs_cntrllr.abrirModalEnviarEmail(crm_tcs_cntrllr.EnumTipoEnvioEmail.teePrestadora, fornecedorEnvolvido.fornecedor.fornecedor)">
                                    
                                    <div slot="end" class="nome">
                                        {{ fornecedorEnvolvido.fornecedor.nomefantasia }}
                                    </div>
                                </item-dropdown>
        
                                <!-- Ação Enviar e-amail para Outros-->
                                <item-dropdown item-label="Enviar e-mail para outros"
                                    ng-click="crm_tcs_cntrllr.abrirModalEnviarEmail()">
                                </item-dropdown>
        
                                <!-- Ação Enviar documentos e-amail para Seguradora -->
                                <item-dropdown 
                                    ng-if="crm_tcs_cntrllr.entity.possuiseguradora && crm_tcs_cntrllr.entity.cliente && crm_tcs_cntrllr.entity.cliente.cliente"
                                    item-label="Enviar documentos para a seguradora"
                                    ng-click="crm_tcs_cntrllr.abrirModalEnviarDocsEmail(crm_tcs_cntrllr.entity.cliente.cliente)">
                                    
                                    <div slot="end" class="nome">
                                        {{ crm_tcs_cntrllr.entity.cliente.nomefantasia }}
                                    </div>
                                </item-dropdown>
        
                                <!-- Ação Enviar documentos e-amail para Cliente -->
                                <item-dropdown 
                                    ng-if="!crm_tcs_cntrllr.entity.possuiseguradora && crm_tcs_cntrllr.entity.cliente && crm_tcs_cntrllr.entity.cliente.cliente"
                                    item-label="Enviar documentos para o cliente"
                                    ng-click="crm_tcs_cntrllr.abrirModalEnviarDocsEmail(crm_tcs_cntrllr.entity.cliente.cliente)">
                                    
                                    <div slot="end" class="nome">
                                        {{ crm_tcs_cntrllr.entity.cliente.nomefantasia }}
                                    </div>
                                </item-dropdown>
                                
                                <!-- Ação Solicitar orçamento por e-mail -->
                                <!-- Ação comentada porque está sendo resolvido o problema do link. Após solução descomentar item -->
                                <!-- <item-dropdown
                                    item-label="Solicitar orçamento por e-mail"
                                    ng-click="crm_tcs_cntrllr.abrirModalSolicitarOrcamentoPorEmail()">
                                </item-dropdown> -->
                            </nsj-button-dropdown>
                        </div>
                    </span>
                </div>
                <!-- {# FIM HEADER DO ATENDIMENTO COMERCIAL MOBILE #} -->
                
                <div
                    class="pull-right hidden-xs" resizer>
                    <!-- {# métodos a serem implementados #} -->
                                <span ng-class="{ 'btn-fixed dropdown btn-group-vertical' : isLarge }">
                        
                        <button type="button"
                            ng-class="{loading:crm_tcs_cntrllr.submittingCancelado}"
                            ng-if="crm_tcs_cntrllr.entity.status === 0" 
                            ng-click="crm_tcs_cntrllr.abrirModalCancelarAtendimento()"
                            ng-disabled="crm_tcs_cntrllr.submittingCancelado"
                            class="btn btn-sm btn-default btn-save btn-geral">
                            <i class="fas fa-ban"></i> Cancelar Atendimento
                        </button>
        
                        <button type="button"
                            ng-class="{loading:crm_tcs_cntrllr.submittingFechado}"
                            ng-if="crm_tcs_cntrllr.entity.status === 1" 
                            ng-click="crm_tcs_cntrllr.abrirModalFecharAtendimento()"
                            ng-disabled="crm_tcs_cntrllr.submittingFechado"
                            class="btn btn-sm btn-warning btn-save btn-geral">
                            <i class="fas fa-ban"></i> Fechar Atendimento
                        </button>
                        
                        <button type="button" 
                            ng-class="{loading:crm_tcs_cntrllr.submittingFinalizado}" 
                            ng-if="crm_tcs_cntrllr.entity.status === 2" 
                            ng-click="crm_tcs_cntrllr.finalizarAtendimento()" 
                            ng-disabled="crm_tcs_cntrllr.submittingFinalizado"
                            class="btn btn-sm btn-success btn-save btn-geral">
                            <i class="fas fa-lock"></i> Finalizar Atendimento
                        </button>
                        
                        <button type="button"
                            ng-class="{loading:crm_tcs_cntrllr.submittingDescancelado}" 
                            ng-if="crm_tcs_cntrllr.entity.status === 4"
                            ng-click="crm_tcs_cntrllr.descancelarAtendimento()"
                            ng-disabled="crm_tcs_cntrllr.submittingDescancelado"
                            class="btn btn-sm btn-default btn-save btn-geral">
                            <i class="fas fa-ban"></i> Desfazer Cancelamento do Atendimento
                        </button>

                        <!-- Todos as ações disparadas pelos botões dentro desse dropdown só podem ser realizadas em um atendimento existente. Condição no ng-if -->
                        <nsj-button-dropdown
                            color="default"
                            ng-disabled="crm_tcs_cntrllr.submittingCancelado"
                            dropdown-direction="down"
                            icon="fas fa-ellipsis-h"
                            ng-if="crm_tcs_cntrllr.entity.negocio != null">
        
                            <item-dropdown item-label="Reabrir Pedido" 
                                ng-if="crm_tcs_cntrllr.entity.status == 2"
                                ng-click="crm_tcs_cntrllr.reabrirAtendimento()"></item-dropdown>
                            
                            <item-dropdown item-label="Cancelar Atendimento" 
                                ng-if="crm_tcs_cntrllr.entity.status > 0 && crm_tcs_cntrllr.entity.status < 3"
                                ng-click="crm_tcs_cntrllr.abrirModalCancelarAtendimento()"></item-dropdown>

                            <!-- Opções relacionadas a liberação ou cancelamento da liberação de projeto -->
                            <item-dropdown item-label="Liberar Projeto" ng-if="crm_tcs_cntrllr.entity.projeto == null"
                                ng-click="crm_tcs_cntrllr.liberarProjeto(crm_tcs_cntrllr.entity)">
                            </item-dropdown>

                            <item-dropdown item-label="Cancelar a liberação do Projeto" ng-if="crm_tcs_cntrllr.entity.projeto != null && crm_tcs_cntrllr.entity.projeto.projeto != null"
                                ng-click="crm_tcs_cntrllr.cancelarLiberacaoProjeto(crm_tcs_cntrllr.entity)">
                            </item-dropdown>
        
                        </nsj-button-dropdown>
        
                        <nsj-button color="default" 
                            ng-if="crm_tcs_cntrllr.entity.projeto && (crm_tcs_cntrllr.entity.projeto.projeto!=null)" 
                            ng-click="crm_tcs_cntrllr.abrirProjeto()"><i class="fas fa-link"></i> Ir Para o Projeto</nsj-button>   
        
                        <!-- Envio de e-mail do atendimento -->
                        <nsj-button-dropdown
                            ng-if="crm_tcs_cntrllr.entity.negocio"
                            color="default" 
                            dropdown-direction="right" 
                            class="acao btn-enviar-email" 
                            label=""
                        >
                            <!-- Ícone ao lado esquerdo -->
                            <span slot="start">
                                <span class="icone-envelope">
                                    <i class="fas fa-envelope"></i>
                                </span>
                                <span class="icone-seta">
                                    <i class="fas fa-caret-down"></i>
                                </span>
                            </span>
        
                        <!-- Ação Enviar e-amail para Seguradora -->
                            <item-dropdown 
                                ng-if="crm_tcs_cntrllr.entity.possuiseguradora && crm_tcs_cntrllr.entity.cliente && crm_tcs_cntrllr.entity.cliente.cliente"
                                item-label="Enviar e-mail para a seguradora"
                                ng-click="crm_tcs_cntrllr.abrirModalEnviarEmail(crm_tcs_cntrllr.EnumTipoEnvioEmail.teeSeguradora, crm_tcs_cntrllr.entity.cliente.cliente)">
                                
                                <div slot="end" class="nome">
                                    {{ crm_tcs_cntrllr.entity.cliente.nomefantasia }}
                                </div>
                            </item-dropdown>
        
                            <!-- Ação Enviar e-amail para Prestadora-->
                            <item-dropdown 
                                ng-repeat="fornecedorEnvolvido in crm_tcs_cntrllr.arrFornecedoresEnvolvidos"
                                item-label="Enviar e-mail para a prestadora"
                                ng-click="crm_tcs_cntrllr.abrirModalEnviarEmail(crm_tcs_cntrllr.EnumTipoEnvioEmail.teePrestadora, fornecedorEnvolvido.fornecedor.fornecedor)">
                                
                                <div slot="end" class="nome">
                                    {{ fornecedorEnvolvido.fornecedor.nomefantasia }}
                                </div>
                            </item-dropdown>
        
                            <!-- Ação Enviar e-amail para Outros-->
                            <item-dropdown item-label="Enviar e-mail para outros"
                                ng-click="crm_tcs_cntrllr.abrirModalEnviarEmail()">
                            </item-dropdown>
        
                            <!-- Ação Enviar documentos e-amail para Seguradora -->
                            <item-dropdown 
                                ng-if="crm_tcs_cntrllr.entity.possuiseguradora && crm_tcs_cntrllr.entity.cliente && crm_tcs_cntrllr.entity.cliente.cliente"
                                item-label="Enviar documentos para a seguradora"
                                ng-click="crm_tcs_cntrllr.abrirModalEnviarDocsEmail(crm_tcs_cntrllr.entity.cliente.cliente)">
                                
                                <div slot="end" class="nome">
                                    {{ crm_tcs_cntrllr.entity.cliente.nomefantasia }}
                                </div>
                            </item-dropdown>
        
                            <!-- Ação Enviar documentos e-amail para Cliente -->
                            <item-dropdown 
                                ng-if="!crm_tcs_cntrllr.entity.possuiseguradora && crm_tcs_cntrllr.entity.cliente && crm_tcs_cntrllr.entity.cliente.cliente"
                                item-label="Enviar documentos para o cliente"
                                ng-click="crm_tcs_cntrllr.abrirModalEnviarDocsEmail(crm_tcs_cntrllr.entity.cliente.cliente)">
                                
                                <div slot="end" class="nome">
                                    {{ crm_tcs_cntrllr.entity.cliente.nomefantasia }}
                                </div>
                            </item-dropdown>

                            <!-- Ação Solicitar orçamento por e-mail -->
                            <!-- Ação comentada porque está sendo resolvido o problema do link. Após solução descomentar item -->
                            <!-- <item-dropdown 
                                item-label="Solicitar orçamento por e-mail"
                                ng-click="crm_tcs_cntrllr.abrirModalSolicitarOrcamentoPorEmail()">
                            </item-dropdown> -->
                        </nsj-button-dropdown>
                        <!-- Histórico do atendimento -->
                        <button class="btn  btn-default btn-delete btn-geral" ng-disabled="!crm_tcs_cntrllr.entity.negocio" ng-click="crm_tcs_cntrllr.abrirHistoricoModal()" ng-class="{'btn-md':!isLarge , 'btn-md btn-circle btn-fixed-sub': isLarge}" type="button">
                            <i class="fas fa-history"></i>
                        </button>
                        <!-- Modo tela cheia -->
                        <button type="button" class="btn btn-sm btn-default" ng-click="crm_tcs_cntrllr.fullscreenService.ativaDesativaFullscreen(!crm_tcs_cntrllr.fullscreenService.isAtivado())">
                            <i class="fas fa-expand"></i>
                        </button>
                    </span>
                </div>
            </nsj-headline>
        </div>
        <!-- Container com as seções do atendimento comercial -->
        <div id="crm-atcs" class="secao-container-scroll" ng-on-scroll="crm_tcs_cntrllr.onSecaoContainerScroll()">
            <!-- <div class="grupo-accordions"> -->

                <!-- <div class="coluna-accordion-principal"> -->

                    <!-- <nsj-accordion-group id="principal"> -->
                        <div class="row scroll-item">
                            <div class="col-sm-12">
                                <!-- Dados atendimento -->
                                <nsj-accordion id="accordion-dados-atendimento" init-open="true" keep-open headline="Dados do Atendimento" class="secao-scroll" >
                                    <nsj-button ng-click="crm_tcs_cntrllr.voltarParaLista()" ng-if="!crm_tcs_cntrllr.criandoNovo()" slot="right" icon="fas fa-caret-left"> Voltar</nsj-button>
                            
                                    <nsj-button tem-permissao="crm_atcs_put" ng-show="crm_tcs_cntrllr.entity.negocio && !crm_tcs_cntrllr.isEdit" slot="right" icon="fas fa-edit" ng-click="crm_tcs_cntrllr.mostrarEditar()" ng-disabled="crm_tcs_cntrllr.busy || crm_tcs_cntrllr.entity.status == 3 || crm_tcs_cntrllr.entity.status == 4"></nsj-button>
                                    <div>
                                        <div ng-if="crm_tcs_cntrllr.isEdit" >
                                            <div ng-controller="CrmAtcsFormController as crm_tcs_frm_cntrllr"  ng-inject="{entity:crm_tcs_cntrllr.entity}"  ng-init="crm_tcs_frm_cntrllr.entity = crm_tcs_cntrllr.entity" >
                                                <div class="height-full layout-table form-loading-layout-wrapper">
                                                    <form nsj-focus name="crm_tcs_frm_cntrllr.form" novalidate="novalidate"  role="form"  class="height-full">
                                                        <div class="nsj-form padding-content" >
                                                            <crm-atcs-default entity="crm_tcs_frm_cntrllr.entity"  ng-submit="crm_tcs_frm_cntrllr.submit()" form="crm_tcs_frm_cntrllr.form" busy="crm_tcs_frm_cntrllr.busy" action="crm_tcs_frm_cntrllr.action" constructors="crm_tcs_frm_cntrllr.constructors"></crm-atcs-default>
                                                            <ul class="list-unstyled list-inline pull-left">
                                                                <li>
                                                                    <div class="form-group pull-left btn-salvar-atc">
                                                                        <button type="button" ng-click="crm_tcs_frm_cntrllr.submit()" ng-class="{loading:crm_tcs_frm_cntrllr.busySubmit}" ng-disabled="crm_tcs_frm_cntrllr.busySubmit || crm_tcs_frm_cntrllr.form.$pristine" class="btn btn-sm btn-warning btn-save btn-geral">
                                                                            <i class="fa fa-check"></i>
                                                                            Salvar
                                                                        </button>
        
                                                                        <a class="btn btn-sm" ng-click="crm_tcs_cntrllr.mostrarEditar()" ng-if="crm_tcs_cntrllr.criandoNovo()">
                                                                            <i class="fa fa-times" aria-hidden="true"></i>
                                                                            Cancelar
                                                                        </a>
                                                                    </div>
                                                                </li>
                                                            </ul>
                                                        </div>
        
                                                        <div class="content-loading ajusta-flex" ng-if="crm_tcs_frm_cntrllr.busy">
                                                            <div>
                                                                <div ng-class="{'onloading' : crm_tcs_frm_cntrllr.busy}"></div>
                                                                <p>Carregando...</p>
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="custom-form-view" ng-if="!crm_tcs_cntrllr.isEdit && crm_tcs_cntrllr.entity.negocio && !crm_tcs_cntrllr.mostrarCompletoBool">
                                            <div class="nsj-form-view bottom-buffer resumo-visualizacao" >
        
                                                <div class="row row-form-view" >
                                                    <div class="col-sm-12" >
                                                        <div class="form-group clearfix">
                                                            <!-- <label class="control-label">Nome </label> -->
                                                            <label ng-if="crm_tcs_cntrllr.entity.nomeFalecido" class="control-label" for="nome">Nome do Falecido</label>
                                                            <label ng-if="!crm_tcs_cntrllr.entity.nomeFalecido" class="control-label" for="nome">Nome</label>
                                                            <p class="form-control-static" >
                                                                <span id="nome" class="form-control-static" ng-bind="(crm_tcs_cntrllr.entity.nome) || 'Não informado'"></span>
                                                            </p>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-12" >
                                                        <div class="form-group clearfix">
                                                            <label class="control-label">Código </label>
                                                            <p class="form-control-static"><span id="codigo" class="form-control-static" ng-bind="(crm_tcs_cntrllr.entity.codigo) || 'Não informado'"></span></p>
                                                        </div>
                                                    </div>
                                                </div>
        
                                                <!-- INICIO dados seguro -->
                                                <div class="row row-form-view" ng-if="!crm_tcs_cntrllr.entity.possuiseguradora">
                                                    <div class="col-sm-12" >
                                                        <div class="form-group clearfix">
                                                            <label class="control-label" ng-if="!crm_tcs_cntrllr.entity.possuiseguradora">Cliente </label>
                                                            <label class="control-label" ng-if="crm_tcs_cntrllr.entity.possuiseguradora">Seguradora </label>
                                                            <p class="form-control-static" >
                                                                <span id="nome" class="form-control-static" ng-bind="(crm_tcs_cntrllr.entity.cliente.nomefantasia) || 'Não informado'"></span>
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- FIM dados seguro -->

                                                <div class="mt-20 row row-form-view" ng-if="crm_tcs_cntrllr.entity.possuiseguradora" >
                                                    <div class="col-sm-12 form-group clearfix" >
                                                        <object-list class ="object-list"
                                                            entities='crm_tcs_cntrllr.entity.negociosdadosseguradoras'
                                                            service="CrmAtcsdadosseguradoras"
                                                            constructors="{ 'negocio' : $ctrl.entity.negocio,  }"
                                                            autosaveEnabled= ><div ><div >
                                                            <table class="table table-striped table-hover table-condensed table-bordered"><thead><tr>
                                                                <th>Seguradora</th>
                                                                <th>Telefone</th>
                                                                <th>Produto</th>
                                                                <th>Sinistro</th>
                                                            </tr></thead><tbody>
                                                                <tr ng-repeat="subentity in oblistctrl.entities"  ng-controller="ObjectListItemCtrl as itemctrl">
                                                                    <td>{{ subentity.seguradora.nomefantasia }} </td>
                                                                    <td>
                                                                      <!-- Tratando os possíveis inputs de DDI -->
                                                                      {{ crm_tcs_cntrllr.entity.respfinanceiroddi.length === 1 ? (crm_tcs_cntrllr.entity.respfinanceiroddi | mask: '+9' ) : ''}}
                                                                      {{ crm_tcs_cntrllr.entity.respfinanceiroddi.length === 2 ? (crm_tcs_cntrllr.entity.respfinanceiroddi | mask: '+99' ) : ''}}
                                                                      {{ crm_tcs_cntrllr.entity.respfinanceiroddi.length === 3 ? (crm_tcs_cntrllr.entity.respfinanceiroddi | mask: '+999' ) : ''}}

                                                                      <!-- Tratando os possíveis inputs de DDD -->
                                                                      {{ crm_tcs_cntrllr.entity.respfinanceiroddd.length === 1 ? (crm_tcs_cntrllr.entity.respfinanceiroddd | mask: '(9)' ) : ''}}
                                                                      {{ crm_tcs_cntrllr.entity.respfinanceiroddd.length === 2 ? (crm_tcs_cntrllr.entity.respfinanceiroddd | mask: '(99)') : ''}}
                                                                      {{ crm_tcs_cntrllr.entity.respfinanceiroddd.length === 3 ? (crm_tcs_cntrllr.entity.respfinanceiroddd | mask: '(999)') : ''}}

                                                                      <!-- Tratando os possíveis inputs de telefone -->
                                                                      {{ crm_tcs_cntrllr.entity.respfinanceirotelefone.length === 0 ? 'Não informado' : ''}}
                                                                      {{ crm_tcs_cntrllr.entity.respfinanceirotelefone.length === 8 ?  (crm_tcs_cntrllr.entity.respfinanceirotelefone | mask: '9999-9999') : '' }}
                                                                      {{ crm_tcs_cntrllr.entity.respfinanceirotelefone.length === 9 ?  (crm_tcs_cntrllr.entity.respfinanceirotelefone | mask: '99999-9999') : '' }}
                                                                      {{ crm_tcs_cntrllr.entity.respfinanceirotelefone.length !== 0 &&
                                                                         crm_tcs_cntrllr.entity.respfinanceirotelefone.length !== 8 && 
                                                                         crm_tcs_cntrllr.entity.respfinanceirotelefone.length !== 9 ? 
                                                                         (crm_tcs_cntrllr.entity.respfinanceirotelefone) : '' 
                                                                      }}
                                                                    </td> 
                                                                    <td>{{ subentity.produtoseguradora.nome }} </td>
                                                                    <td>{{ subentity.sinistro }} </td>
                                                                </tr></tbody>
                                                            <tfoot ng-if="oblistctrl.entities.length == 0">
                                                                <tr>
                                                                    <td colspan="15" class="state-empty">
                                                                        <div class="empty-list"><p class="text-center"> Não existem itens para mostrar nesta lista. </p></div>
                                                                    </td>
                                                                </tr>
                                                            </tfoot></table>
                                                        </div></div></object-list>
                                                    </div>
                                                </div>
                                                <div class="row row-campos-customizados-resumo">
                                                  <div class="col-sm-12">
                                                    <section ng-if="$ctrl.camposcustomizadosVelorioSepultamento.length > 0">
                                                      <nsj-custom-field ng-prop-custom_fields="$ctrl.camposcustomizadosVelorioSepultamento"
                                                        id-field="camposcustomizadosVelorioSepultamento" ng-prop-visible_config="$ctrl.config"
                                                        ng-prop-model="$ctrl.entity.camposcustomizados" ng-on-field_change="$ctrl.change($event)" mode="view">
                                                      </nsj-custom-field>
                                                    </section>
                                                  </div>
                                                </div>
                                                <div class="row row-campos-customizados-resumo">
                                                  <div class="col-sm-12">
                                                    <section>
                                                      <nsj-custom-field ng-prop-custom_fields="$ctrl.camposcustomizadosTranslado"
                                                      id-field="camposcustomizadosTranslado" ng-prop-visible_config="$ctrl.config"
                                                      ng-prop-model="$ctrl.entity.camposcustomizados" ng-on-field_change="$ctrl.change($event)">
                                                    </nsj-custom-field>
                                                  </section>
                                                  </div>
                                                </div>

                                                <div class="row row-campos-customizados-resumo" ng-if="crm_tcs_cntrllr.entity.area.localizacao === true">
                                                    <div class="col-sm-6 form-group clearfix">
                                                        <label class="control-label"> Estado</label>
                                                        <p class="form-control-static">
                                                            <span id="localizacaoestado" class="form-control-static"
                                                                ng-bind="crm_tcs_cntrllr.entity.localizacaoestado.nome || 'Não informado'">
                                                            </span>
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-6 form-group clearfix">
                                                        <label class="control-label">Município 
                                                            <button class="btn btn-link btn-tooltip" type='button'
										                        uib-popover-html="crm_tcs_cntrllr.tooltipCidadesInformacoesFunerarias"
										                        popover-placement='auto bottom' popover-trigger="'mouseenter click outsideClick'">
										                        <i class="fas fa-question-circle"></i>
								                            </button>
                                                        </label>
                                                        <p class="form-control-static" >
                                                            <span id="localizacaomunicipio" class="form-control-static" 
                                                                ng-bind="crm_tcs_cntrllr.entity.localizacaomunicipio.nome || 'Não informado'">
                                                            </span>
                                                        </p>
                                                    </div>
                                                </div>

                                                <div class="row row-campos-customizados-resumo" ng-if="crm_tcs_cntrllr.entity.area.localizacao === true && crm_tcs_cntrllr.exibeCamposSepultamento">
                                                    <div class="col-sm-6 form-group clearfix">
                                                        <label class="control-label"> Estado de Sepultamento </label>
                                                        <p class="form-control-static">
                                                            <span id="localizacaoestadosepultamento" class="form-control-static"
                                                                ng-bind="crm_tcs_cntrllr.entity.localizacaoestadosepultamento.nome || 'Não informado'">
                                                            </span>
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-6 form-group clearfix ">
                                                        <label class="control-label" >Município de Sepultamento 
                                                            <button class="btn btn-link btn-tooltip" type='button'
									                        uib-popover-html="crm_tcs_cntrllr.tooltipCidadesInformacoesFunerariasSepultamento"
										                    popover-placement='auto bottom'
										                    popover-trigger="'mouseenter click outsideClick'">
										                    <i class="fas fa-question-circle"></i>
									                    </button>
                                                        </label>
                                                        <div class="localizacaomunicipiosepultamento">
                                                        <p class="form-control-static">
                                                            <span id="localizacaomunicipiosepultamento" class="form-control-static"
                                                                ng-bind="crm_tcs_cntrllr.entity.localizacaomunicipiosepultamento.nome || 'Não informado'">
                                                            </span>
                                                        </p> 
                                                        <a class="btn btn-xs btn-primary" ng-click="crm_tcs_cntrllr.abrirModalRotasGoogle()"
										                    ng-if="crm_tcs_cntrllr.entity.localizacaomunicipiosepultamento && crm_tcs_cntrllr.entity.localizacaomunicipio.nome">
                                                            <i class="fas fa-map-marker-alt fa-lg"></i> 
                                                            <nsj-tooltip tooltip-position="bottom"><p>Ver rotas</p></nsj-tooltip>    
									                    </a>  
                                                    </div>
                                                    </div>
                                                </div>

                                                <div class="row row-campos-customizados-resumo" ng-if="crm_tcs_cntrllr.camposcustomizadosResponsavelViewResumo.length > 0" >
                                                        <nsj-custom-field style="width: 100%"
                                                            ng-prop-custom_fields="crm_tcs_cntrllr.camposcustomizadosResponsavelViewResumo" 
                                                            id-field="camposcustomizadosResponsavelViewResumo" 
                                                            ng-prop-visible_config="crm_tcs_cntrllr.config" 
                                                            ng-prop-model="crm_tcs_cntrllr.entity.camposcustomizados" 
                                                            mode="view"></nsj-custom-field>
                                                </div>

                                                <div class="row row-campos-customizados-resumo" ng-if="crm_tcs_cntrllr.camposcustomizadosFalecidoViewResumo.length > 0" >
                                                    <nsj-custom-field style="width: 100%"
                                                        ng-prop-custom_fields="crm_tcs_cntrllr.camposcustomizadosFalecidoViewResumo" 
                                                        id-field="camposcustomizadosFalecidoViewResumo" 
                                                        ng-prop-visible_config="crm_tcs_cntrllr.config" 
                                                        ng-prop-model="crm_tcs_cntrllr.entity.camposcustomizados" 
                                                        mode="view"></nsj-custom-field>
                                                </div>
                                            
                                                <!--INICIO responsaveis financeiros-->
                                                <!-- <div class="mt-20 row row-form-view" >
                                                    <div class="col-sm-12" >                     
                                                        <object-list class ="object-list"
                                                        entities='crm_tcs_cntrllr.entity.responsaveisfinanceiros'
                                                            service="CrmAtcsresponsaveisfinanceiros"
                                                            constructors="{ 'negocio' : crm_tcs_cntrllr.entity.negocio,  }"
                                                            autosaveEnabled= >
                                                            <div class="row row-form-view">
                                                                <div class="col-xs-6 form-group clearfix">
                                                                    <label class="text-left control-label"><p class="text-left">Nome Responsável Financeiro</p></label>
                                                                </div>
                                                                <div class="col-xs-6 form-group clearfix">
                                                                    <label class="text-left control-label"><p class="text-left">Telefone </p></label>
                                                                </div>
                                                            </div>
                                                            <div class="row row-form-view" ng-repeat="subentity in oblistctrl.entities"  ng-controller="ObjectListItemCtrl as itemctrl">
                                                                <div class="col-xs-6 form-group clearfix">
                                                                    <p class="form-control-static"><a href ui-sref='ns_clientes_show({ cliente: subentity.responsavelfinanceiro.cliente })'>{{ subentity.responsavelfinanceiro.nomefantasia }} </a></p>
                                                                </div>
                                                                <div class="col-xs-6 form-group clearfix">
                                                                                                    <p class="form-control-static" ><span id="respfinanceiroprincipaltelefone" class="form-control-static" ng-bind="(subentity.responsavelfinanceiro.telefone) | mask: '+99 (99) 99999-9999' || 'Não informado'" ></span></p>
                                                                </div>
                                                            </div>
                                                        </object-list>               
                                                    </div>
                                                </div> -->
                                                <!--FIM responsaveis financeiros-->   
                                            </div>        
        
                                            <div class="btn-controle-atc-show-container">
                                                <nsj-button icon="fas fa-edit" ng-click="crm_tcs_cntrllr.mostrarCompleto()" >
                                                    Mostrar mais informações
                                                </nsj-button>
                                            </div>
                                        </div>
                                        <div ng-if="!crm_tcs_cntrllr.isEdit && crm_tcs_cntrllr.entity.negocio && crm_tcs_cntrllr.mostrarCompletoBool">
                                            <div>
                                                <!-- <div class="height-full layout-table" ng-controller="CrmAtcsVisualizacaoShowController as crm_tcs_frm_shw_cntrllr" ng-init="crm_tcs_frm_shw_cntrllr = crm_tcs_cntrllr"> -->
        
                                            <div class="height-full layout-table" ng-init="crm_tcs_frm_shw_cntrllr = crm_tcs_cntrllr">
                                                <div class='height-full'>
        
                                                    <div class="nsj-form">
                                                        <div class="bottom-buffer" ng-show="!crm_tcs_frm_shw_cntrllr.busy">
                                                            <!-- <crm-atcs-visualizacao-show  entity="crm_tcs_frm_shw_cntrllr.entity" action="crm_tcs_frm_shw_cntrllr.action" busy="crm_tcs_frm_shw_cntrllr.busy" constructors="crm_tcs_frm_shw_cntrllr.constructors"></crm-atcs-visualizacao-show>
                                                            <div class="mt-20 form-control-static" ng-if="crm_tcs_frm_shw_cntrllr.entity.projeto">
                                                                <p>Este projeto está vinculado ao projeto
                                                                    <strong>
                                                                        <span ng-bind="crm_tcs_frm_shw_cntrllr.entity.projeto.nome || 'Não informado'"></span>
                                                                        no Sistema GP:</strong>
                                                                </p>
                                                                <p>
                                                                    <strong>Iniciado em:
                                                                    </strong>
                                                                    <span ng-bind="crm_tcs_frm_shw_cntrllr.entity.projeto.datainicio | asDate | date: 'dd/MM/yyyy' || 'Não informado.'"></span>
                                                                    |
                                                                    <strong>Término Previsto:
                                                                    </strong>
                                                                    <span ng-bind="crm_tcs_frm_shw_cntrllr.entity.projeto.datafim | asDate | date: 'dd/MM/yyyy' || 'Não informado.'"></span>
                                                                </p>
                                                            </div>            -->
                                                            <crm-atcs-visualizacaocompleta-show 
                                                                entity="crm_tcs_frm_shw_cntrllr.entity" 
                                                                action="crm_tcs_frm_shw_cntrllr.action" 
                                                                busy="crm_tcs_frm_shw_cntrllr.busy" 
                                                                constructors="crm_tcs_frm_shw_cntrllr.constructors" class="custom-form-view">
                                                            </crm-atcs-default-show>
                                                        </div>
        
                                                        <div class="content-loading" ng-show="crm_tcs_frm_shw_cntrllr.busy">
                                                            <div class="center-loading text-center">
                                                                <div class="onloading"></div>
                                                                Carregando...
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
        
                                            </div>
                                            <div class="btn-controle-atc-show-container">
                                                <nsj-button icon="fas fa-edit" ng-click="crm_tcs_cntrllr.mostrarCompleto()" >
                                                    Mostrar menos informações
                                                </nsj-button>
                                            </div>
                                        </div>
                                    </div>
        
                                </nsj-accordion>
                            </div>
                        </div>

                        <!-- <nsj-accordion  headline="Execução">
                            {# adicionar o ng-disabled no botão enquanto carrega quando a funcionalidade for implementada #}
                                                        <nsj-button slot="right" icon="fas fa-plus"></nsj-button>
                        </nsj-accordion> -->


                        <div class="row scroll-item">
                            <div class="col-sm-12">
                                <!-- Pendências -->
                                <nsj-accordion init-open keep-open ng-controller="CrmAtcsPendenciasController as ctrl_pendencias" 
                                    ng-inject="{entity:crm_tcs_cntrllr.entity, layout: 'block', telaorigem: 'atc', carregarDados: (crm_tcs_cntrllr.entity != undefined && crm_tcs_cntrllr.entity.negocio != undefined), ctrlReqChild: null, secaoctrl: crm_tcs_cntrllr.getSecaoCtrl('secao-pendencias')}" headline="Pendências" color-title="color-default" color-accordion="mostarda" class="pendencias-wrapper form-loading-layout-wrapper secao-scroll" 
                                    id="secao-pendencias"  >

                                    <!-- Ação de atualizar accordion-->
                                    <button 
                                        slot="right" 
                                        class="btn btn-default btn-md" 
                                        ng-click="ctrl_pendencias.carregarListaPendencias(null, true)" 
                                        ng-disabled="ctrl_pendencias.isBusyPendencias() || crm_tcs_cntrllr.blockButtons || ctrl_pendencias.busyHistorico">

                                        <i class="fas fa-sync-alt"></i> 

                                    </button>

                                    <button slot="right" class="btn btn-default btn-md" ng-click="ctrl_pendencias.abrirHistoricoModal('pendencia')" ng-disabled="ctrl_pendencias.isBusyPendencias() || crm_tcs_cntrllr.blockButtons || ctrl_pendencias.busyHistorico" ng-class="{'loading':ctrl_pendencias.busyHistorico}"><i class="fas fa-history"></i> </button>
                                    <button slot="right" tem-permissao="crm_atcspendencias_create" class="btn btn-default btn-md" ng-click="ctrl_pendencias.crmAtcspendenciasForm(crm_tcs_cntrllr.entity.negocio)" ng-disabled="ctrl_pendencias.isBusyPendencias() || crm_tcs_cntrllr.blockButtons || ctrl_pendencias.busy" ng-class="{'loading':ctrl_pendencias.busy}"><i class="fas fa-plus"></i></button>

                                    <div ng-if="(ctrl_pendencias.layout == 'block') && (!ctrl_pendencias.entities || ctrl_pendencias.entities.length == 0) && !ctrl_pendencias.isBusyPendencias()"
                                        class="state-empty">
                                        <div class="empty-list">
                                            <p class="text-center">
                                                Não existem itens para mostrar nesta lista.
                                            </p>
                                        </div>
                                    </div>
                                    <div class="content-loading" ng-if="ctrl_pendencias.isBusyPendencias() && !ctrl_pendencias.busyInicializacao">
                                        <div class="center-loading text-center">
                                            <div class="onloading"></div>
                                            Carregando...
                                        </div>
                                    </div>
                                    <!-- Skeleton de carregamento -->
                                    <div class="skeleton-container" ng-if="ctrl_pendencias.busyInicializacao">
                                        <div class="pendencia" ng-repeat="skeleton in ctrl_pendencias.arrQtdSkeletons">
                                            <div class="pendencia-header">
                                                <div class="grupo1">
                                                    <div class="item-skeleton"></div>
                                                </div>
                                                <div class="grupo2">
                                                    <div class="item-skeleton"></div>
                                                    <div class="item-skeleton"></div>
                                                </div>
                                            </div>
                                            <div class="pendencia-corpo">
                                                <div class="grupo1">
                                                    <div class="item-skeleton"></div>
                                                </div>
                                                <div class="grupo2">
                                                    <div class="item-skeleton"></div>
                                                    <div class="item-skeleton"></div>
                                                    <div class="item-skeleton"></div>
                                                </div>
                                                <div class="grupo3">
                                                    <div class="item-skeleton"></div>
                                                    <div class="item-skeleton"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="lista-pendencias pendencias-in-atc" ng-if="!ctrl_pendencias.busyInicializacao">
                                        <div class="container-block" ng-if="ctrl_pendencias.layout == 'block' && ctrl_pendencias.entities.length > 0">
                                            <div class="pendencia" ng-repeat="pendencia in ctrl_pendencias.entities">
                                                <div class="pendencia-header">
                                                    <div class="prioridade campo" ng-style="{'color': pendencia.prioridade.cor}"
                                                        ng-class="{'acao-imediata': pendencia.prioridade.ordem == 0 || pendencia.prioridade.ordem == 1}">
                                                        <i class="fas fa-exclamation-triangle"></i>
                                                    </div>
                                                    <div class="tipo-atendimento-container campo">
                                                        Tipo: <span class="tipo-atendimento">{{pendencia.negociopendencialista.nome}}</span>
                                                    </div>
                                                    <div class="direita campo">
                                                        <div class="prazo-container campo">
                                                            {{ ctrl_pendencias.CrmAtcspendenciasUtilsService.minutosParaDataFormatada(pendencia.aberta_ha) }}
                                                        </div>
                                                        <div class="status campo"
                                                            ng-class="{'aberta': pendencia.status == ctrl_pendencias.EStatusPendencia.sAberta, 'fechada': pendencia.status == ctrl_pendencias.EStatusPendencia.sFechada}">
                                                            {{ctrl_pendencias.CrmAtcspendenciasUtilsService.getStatusDescricao(pendencia.status)}}
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="pendencia-corpo">
                                                    <div class="numero">
                                                        #{{pendencia.numero}}
                                                        <span class="descricao-pendencia"> {{pendencia.texto}}</span>
                                                    </div>
                                                    <div class="atribuido-a-container" ng-if="pendencia.atribuidoa">
                                                        Atribuída à <span ng-bind="pendencia.atribuidoa" class="atribuido-a"></span>
                                                    </div>

                                                    <div class="responsavel-impeditivo-container" ng-if="pendencia.status == ctrl_pendencias.EStatusPendencia.sAberta">
                                                        Responsável do impeditivo: <span
                                                            class="responsavel-impeditivo">{{ctrl_pendencias.CrmAtcspendenciasUtilsService.getImpeditivoDescricao(pendencia.impeditivo)}}</span>
                                                    </div>

                                                    <div ng-class="{'aberto-por': (pendencia.status == ctrl_pendencias.EStatusPendencia.sAberta)}">
                                                        Aberta por <span class="aberto-por-nome">{{pendencia.created_by.nome}}</span>
                                                        em <span
                                                            class="aberto-por-data">{{ctrl_pendencias.CrmAtcspendenciasUtilsService.getDataFormatada(pendencia.created_at)}}</span>
                                                        às <span
                                                            class="aberto-por-hora">{{ctrl_pendencias.CrmAtcspendenciasUtilsService.getHoraFormatada(pendencia.created_at)}}</span>
                                                    </div>

                                                    <!-- Informações sobre a finalização da pendência -->
                                                    <div class="fechado-por" ng-if="pendencia.status != ctrl_pendencias.EStatusPendencia.sAberta">
                                                        Fechada por <span class="aberto-por-nome">{{pendencia.fechadapor.nome}}</span>
                                                        em <span
                                                            class="aberto-por-data">{{ctrl_pendencias.CrmAtcspendenciasUtilsService.getDataFormatada(pendencia.fechadaem)}}</span>
                                                        às <span
                                                            class="aberto-por-hora">{{ctrl_pendencias.CrmAtcspendenciasUtilsService.getHoraFormatada(pendencia.fechadaem)}}</span>
                                                    </div>

                                                    <nsj-button 
                                                        icon="fa fa-info-circle" 
                                                        ng-click="ctrl_pendencias.crmAtcspendenciasForm(pendencia.negocio.negocio, pendencia)"  
                                                    > 
                                                        Consultar Pendência
                                                    </nsj-button>
                                                    <nsj-button 
                                                        tem-permissao="crm_atcspendencias_marcar" 
                                                        icon="fas fa-check" 
                                                        ng-click="ctrl_pendencias.fecharPendencia(pendencia)" 
                                                        ng-disabled="ctrl_pendencias.entity.$$__submitting" 
                                                        class="btn-footer btn-fechar-pendencia" 
                                                        ng-class="{loading:ctrl_pendencias.entity.$$__submitting}" 
                                                        ng-if="pendencia.status == ctrl_pendencias.EStatusPendencia.sAberta"
                                                    > 
                                                        Fechar Pendência
                                                    </nsj-button>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="container-table" ng-if="ctrl_pendencias.layout == 'table'">

                                            <nsj-toolbar 
                                                ng-on-change_toolbar="ctrl_pendencias.filtrar($event.detail)"
                                                search="true" refresh="true" holder="Buscar..">

                                                <nsj-filters slot="filters">
                                                    <label for="filtroatcpendencialista" id="labelfiltroatcpendencialista" >
                                                    Tipo
                                                    <nsj-lookup
                                                        name="filtroatcpendencialista"
                                                        id-name="filtroatcpendencialista"
                                                        factory="CrmAtcspendenciaslistas"
                                                        ng-model="ctrl_pendencias.filtroAtcPendenciaLista"
                                                        max-label="2" constructor="{ }"
                                                        config='{ "nome":""}'
                                                    ></nsj-lookup>
                                                    </label>

                                                    <label for="filtroatribuidoa" id="labelfiltroatribuidoa" >
                                                    Atribuído a
                                                    <nsj-lookup
                                                        name="filtroatribuidoa"
                                                        id-name="filtroatribuidoa"
                                                        factory="CrmAtcspendencias"
                                                        default-text="'Sem Atribuição'"
                                                        ng-model="ctrl_pendencias.filtroatribuidoa"
                                                        max-label="2" constructor="{ }"
                                                        config='{ "atribuidoa":"atribuidoa" }'
                                                        ng-change="ctrl_pendencias.filtrar($event.detail)"
                                                    ></nsj-lookup>
                                                    </label>
                                                </filters>

                                            </nsj-toolbar>

                                            <table class="nsj-table table">
                                                <thead class="header">
                                                    <tr>
                                                        <th><span>Atendimento</span></th>
                                                        <th><span>Descrição</span></th>
                                                        <th><span>Tipo</span></th>
                                                        <th><span>Aberta há</span></th>
                                                    </tr>
                                                </thead>
                                                <tbody class="corpo">
                                                    <tr ng-if="(!ctrl_pendencias.entities || ctrl_pendencias.entities.length == 0) && !ctrl_pendencias.isBusyPendencias()">
                                                        <td colspan="4">
                                                            <div class="state-empty">
                                                                <div class="empty-list">
                                                                    <p class="text-center">
                                                                        Não existem itens para mostrar nesta lista.
                                                                    </p>
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                

                                                    <tr ng-repeat="pendencia in ctrl_pendencias.entities" class="pendencia"
                                                        ng-class="{'prazo-proximo-expiracao': pendencia.prazoStatus == ctrl_pendencias.EPendenciaPrazoStatus.ppsProximoExpiracao, 'prazo-expirado': pendencia.prazoStatus == ctrl_pendencias.EPendenciaPrazoStatus.ppsExpirado}">
                                                        <td>
                                                            <span class="prioridade" ng-style="{'color': pendencia.prioridade.cor}">
                                                                <i class="fas fa-exclamation-triangle"></i>
                                                            </span>
                                                            <span class="atendimento">#{{pendencia.negocio.codigo}}</span>
                                                        </td>
                                                        <td class="descricao"><span class="texto">{{pendencia.texto}}</span></td>
                                                        <td class="tipo">{{pendencia.negociopendencialista.nome}}</td>
                                                        <td class="aberta-ha">
                                                            {{ctrl_pendencias.CrmAtcspendenciasUtilsService.minutosParaDataFormatada(pendencia.aberta_ha)}}
                                                        </td>

                                                        <td class="actions ng-binding">
                                                            <div class="table-btns-actions" >
                                                                <nsj-actions action-model="{{pendencia}}">

                                                                    <nsj-action target="_self" icon="fas fa-eye" tooltip="Visualizar Atendimento" disabled="false"
                                                                        ui-sref="crm_atcs_full({atc : pendencia.negocio.negocio})" ></nsj-action>
                                                                    
                                                                    <nsj-action target="_self" icon="fas fa-exclamation-triangle" tooltip="Consultar Pendência" disabled="false"
                                                                        ng-click="ctrl_pendencias.crmAtcspendenciasForm(pendencia.negocio.negocio, pendencia)"
                                                                    ></nsj-action>
                                                                </nsj-actions>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div
                                          ng-if="!(ctrl_pendencias.service.to_load <= 0) && !ctrl_pendencias.finishedLoading && !((!ctrl_pendencias.entities || ctrl_pendencias.entities.length == 0) && !ctrl_pendencias.isBusyPendencias())">
                                          <div class="text-center cursor-pointer" ng-click="ctrl_pendencias.loadMore()">
                                            <p class="list-group-item dados-follow">
                                              <a href="">Ver mais...</a>
                                            </p>
                                          </div>
                                        </div>
                                        </div>
                                </nsj-accordion>
                            </div>
                        </div>

                        

                    <!-- </nsj-accordion-group> -->


                <!-- </div> -->
                
            <!-- </div> -->


            <!-- Acompanhamento -->
            <div class="row mt-20 scroll-item">
                <div class="col-xs-12">
                    <div class="form-group form-loading-layout-wrapper-body div-acompanhamento" ng-controller="CrmAtcsFollowupsController as ctrl_followups" 
                        ng-inject="{entity:crm_tcs_cntrllr.entity, secaoctrl: crm_tcs_cntrllr.getSecaoCtrl('accordion-followups')}" >

                        <!-- {# Acordeon que exibe lista e formulário para adicionar um acompanhamento (followup)
                        Descomentar para ver seu comportamento em tela #} -->
                        <nsj-accordion id="accordion-followups" init-open keep-open headline="Acompanhamento" class="secao-scroll" ng-class="{'followups-in-atc' : !ctrl_followups.exibeForm }">
                            
                            <!-- Ação de atualizar accordion-->
                            <nsj-button 
                                slot="right" 
                                icon="fas fa-sync-alt" 
                                ng-click="ctrl_followups.carregaFollowups()" 
                                ng-disabled="ctrl_followups.boqueiaBotaoAdicionarFollowup || ctrl_followups.exibeForm || crm_tcs_cntrllr.blockButtons">

                            </nsj-button>

                            <nsj-button slot="right" icon="fas fa-plus" ng-click="ctrl_followups.mudaVisualizacaoFollowup(crm_tcs_cntrllr.entity.negocio)" ng-disabled="ctrl_followups.boqueiaBotaoAdicionarFollowup || ctrl_followups.exibeForm || crm_tcs_cntrllr.blockButtons">
                            </nsj-button>
                            <!-- Listagem -->
                            <div ng-if="!ctrl_followups.exibeForm">
                                <div class="list-group" id="crm_atcsfollowups_list" infinite-scroll='ctrl_followups.nextPage()' infinite-scroll-disabled='ctrl_followups.isBusy()' infinite-scroll-distance='1'>
                                    <div class="content-loading"  ng-if="ctrl_followups.isBusyFollowup() && !ctrl_followups.busyInicializacao">
                                        <div class="center-loading text-center">
                                        <div class="onloading"></div>
                                        Carregando...
                                        </div>
                                    </div>
                                    <!-- Skeleton -->
                                    <div class="skeleton-container"  ng-if="ctrl_followups.busyInicializacao">
                                        <div class="skeleton-acompanhamento-item" ng-repeat="skeleton in ctrl_followups.arrQtdSkeletons">
                                            <div class="linha1">
                                                <div class="item-skeleton"></div>
                                                <div class="item-skeleton"></div>
                                            </div>
                                            <div class="linha2">
                                                <div class="item-skeleton"></div>
                                            </div>
                                            <div class="linha3">
                                                <div class="item-skeleton"></div>
                                                <div class="item-skeleton"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <div ng-if="ctrl_followups.entities.length > 0 && !ctrl_followups.busyInicializacao" class="row dados-follow">
                                        <div class="col-md-12">
                                            <nsj-timeline>
                                                <nsj-timeline-item ng-repeat="item in ctrl_followups.arrayTimeline" obj="{{item}}" mensagem="{{item.mensagem}}" ng-prop-funcaoexterna="ctrl_followups.abrirModalAnexos" btnlabel="{{item.numeroanexos}}"></nsj-timeline-item>
                                            </nsj-timeline>
                                        </div>
                                    </div>
                                    <p class="list-group-item dados-follow" ng-if="!ctrl_followups.finished && (ctrl_followups.service.to_load <= 0) && !ctrl_followups.busyInicializacao">
                                        <a href="" ng-click="ctrl_followups.loadMore()">Ver mais...</a>
                                    </p>
                                    <p class="text-center article-loading height-full dados-follow" ng-class="{'onloading' : ctrl_followups.isBusy() }"  ng-if="!ctrl_followups.isBusyFollowup() && !ctrl_followups.busyInicializacao"></p>
                                    <p class="text-center nfound dados-follow" ng-if="ctrl_followups.entities.length == 0 && !ctrl_followups.isBusyFollowup() && !ctrl_followups.busyInicializacao">Nenhum dado encontrado</p>
                                </div>
                                    
                            </div>
                            <!-- Formulário -->
                            <div ng-if="ctrl_followups.exibeForm" >
                                <div ng-controller="CrmAtcsfollowupsFormNewController as ctrl_newfollowups" ng-inject="{entity:crm_tcs_cntrllr.entity}">
                                    <form nsj-focus name="ctrl_newfollowups.form" novalidate="novalidate" ng-class="{'content-scroll':'list' === 'table','nsj-loading-page' : ctrl_newfollowups.busy }" role="form" class="height-full">

                                        <crm-atcsfollowups-default
                                            entity="ctrl_newfollowups.entity"
                                            form="ctrl_newfollowups.form"
                                            busy="ctrl_newfollowups.busy"
                                            action="ctrl_newfollowups.action"
                                            constructors="ctrl_newfollowups.constructors">

                                        </crm-atcsfollowups-default>

                                        <button type="button"
                                                ng-click="ctrl_newfollowups.submit()"
                                                ng-class="{loading:ctrl_newfollowups.entity.$$__submitting}"
                                                ng-disabled="ctrl_newfollowups.entity.$$__submitting || ctrl_newfollowups.form.$pristine"
                                                class="btn btn-sm btn-warning btn-save btn-geral">

                                            <i class="fa fa-check"></i> Salvar
                                        </button>

                                        <a class="btn btn-sm" ng-click="ctrl_followups.mudaVisualizacaoFollowup()">
                                            <i class="fa fa-times" aria-hidden="true"></i>
                                            Cancelar
                                        </a>
                                    </form>
                                </div>
                            </div>
                        </nsj-accordion>
                    </div>
                </div>
            </div>

            <!-- Pedidos -->
            <div class="row scroll-item">
                <div class="col-xs-12">
                    <div class="form-group form-loading-layout-wrapper-body div-pedidos" style="display:block" ng-controller="CrmAtcsPedidosController as ctrl_pedidos" ng-inject="{entity:crm_tcs_cntrllr.entity, secaoctrl: crm_tcs_cntrllr.getSecaoCtrl('secao-pedidos')}">
                        <nsj-accordion init-open keep-open headline="Pedido" class="secao-scroll" id="secao-pedidos">
                                
                            <!-- Ação de atualizar accordion-->
                            <button 
                                slot="right" 
                                class="btn btn-default btn-md" 
                                ng-click="ctrl_pedidos.carregarDadosTela()" 
                                ng-disabled="ctrl_pedidos.busyPedidos || crm_tcs_cntrllr.blockButtons" 
                                ng-class="{'loading':ctrl_pedidos.busyPedidos}">

                                <i class="fas fa-sync-alt"></i> 

                            </button>
                            <button slot="right" class="btn btn-default btn-md" ng-click="ctrl_pedidos.abrirHistoricoModal('pedidos')" ng-disabled="ctrl_pedidos.busyPedidos || crm_tcs_cntrllr.blockButtons" ng-class="{'loading':ctrl_pedidos.busyPedidos}"><i class="fas fa-history"></i> </button>
                            <!-- {########## Descomentar quando a funcionalidade for implementada ###########} -->
                                <!-- <nsj-button slot="right" icon="fas fa-plus" ng-click="ctrl_pedidos.crmPropostascapitulosForm('', ctrl_pedidos.proposta.proposta, '',0)" ng-disabled="ctrl_documentos.isBusyPedidos() || crm_tcs_cntrllr.blockButtons"></nsj-button> -->
                            <nsj-button slot="right" icon="fas fa-plus" ng-click="ctrl_pedidos.abrirModal()" ng-disabled="ctrl_pedidos.entity.possuiseguradora==false || ctrl_pedidos.entity.negociosdadosseguradoras[0] === undefined || crm_tcs_cntrllr.entity.status == 3 || crm_tcs_cntrllr.entity.status == 4"> Serviços do Seguro</nsj-button>
                            
                                                                                                            
                            <div class="row" ng-if="ctrl_pedidos.proposta && ctrl_pedidos.proposta.proposta && !ctrl_pedidos.busyInicializacao">
                                <p class="col-xs-12 col-md-6"><strong>Iniciado em:</strong> {{ ctrl_pedidos.proposta.updated_at | asDateTime | date: 'dd/MM/yyyy HH:mm:ss'}}</p>
                            

                            </div>
                            <!-- Skeleton -->
                            <div class="skeleton-container totais-superiores" ng-if="ctrl_pedidos.proposta && ctrl_pedidos.proposta.proposta && ctrl_pedidos.busyInicializacao">
                                <div class="item-skeleton"></div>
                                <div class="item-skeleton"></div>
                            </div>

                                                        
                            <!-- nsj-button ng-if="ctrl_pedidos.proposta.proposta" slot="right" icon="fas fa-plus" ng-click="ctrl_pedidos.crmPropostascapitulosForm('', ctrl_pedidos.proposta.proposta, '',0)" ng-disabled="ctrl_documentos.isBusyPedidos()"></nsj-button>
                            
                            <div ng-if="ctrl_pedidos.proposta.proposta">
                            <nsj-button slot="right" icon="fas fa-money-check-alt"  ng-if="!ctrl_pedidos.entity.contrato && ctrl_pedidos.entity.negocio" ng-click="crm_tcs_cntrllr.geraContrato()"></nsj-button>
                            <nsj-button slot="right" icon="fas fa-money-check-alt" color="danger"  ng-if="ctrl_pedidos.entity.contrato" ng-disabled="!ctrl_pedidos.entity.contratopodeexcluir" ng-click="crm_tcs_cntrllr.excluiContrato(ctrl_pedidos.entity)"></nsj-button>
                            <tree-grid ng-if="ctrl_pedidos.proposta.capitulos.length > 0" -->
                            
                            <div ng-if="ctrl_pedidos.proposta && ctrl_pedidos.proposta.proposta" class="container-tabela">
                                <tree-grid ng-if="ctrl_pedidos.proposta.capitulos.length > 0 && !ctrl_pedidos.busyInicializacao"
                                    tree-data="ctrl_pedidos.proposta.capitulos" 
                                    expand-on="ctrl_pedidos.expanding_property" 
                                    tree-control="ctrl_pedidos.treePedidos"
                                    col-defs="ctrl_pedidos.col_defs" 
                                    sorted-asc="fas fa-sort-alpha-up-alt" 
                                    sorted-desc="fas fa-sort-alpha-down-alt" 
                                    icon-expand="fas fa-chevron-down" 
                                    icon-collapse="fas fa-chevron-down"
                                    expand-level="20">
                                </tree-grid>

                                <div ng-if="(!ctrl_pedidos.proposta.capitulos || ctrl_pedidos.proposta.capitulos.length === 0) && !ctrl_pedidos.busyInicializacao">
                                    <p>Nenhum dado a exibir.</p>
                                </div>
                                <div class="content-loading" ng-if="ctrl_pedidos.isBusyPedidos()">
                                    <div class="center-loading text-center">
                                    <div class="onloading"></div>
                                    Carregando...
                                    </div>
                                </div>
                                <div class="skeleton-container container-tabela" ng-if="ctrl_pedidos.busyInicializacao">
                                    <!-- Tabela de dados -->
                                    <table class="table nsj-table table-skeleton-pedidos">
                                        <thead>
                                            <tr>
                                                <th></th>
                                                <th>
                                                    <div class="item-skeleton"></div>
                                                </th>
                                                <th>
                                                    <div class="item-skeleton"></div>
                                                </th>
                                                <th>
                                                    <div class="item-skeleton"></div>
                                                </th>
                                                <th>
                                                    <div class="item-skeleton"></div>
                                                </th>
                                                <th>
                                                    <div class="item-skeleton"></div>
                                                </th>
                                                <th>
                                                    <div class="item-skeleton"></div>
                                                </th>
                                                <th>
                                                    <div class="item-skeleton"></div>
                                                </th>
                                                <th>
                                                    <div class="item-skeleton"></div>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <!-- Linha 1 -->
                                            <tr>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                            </tr>
                                            <!-- Linha 2 -->
                                            <tr>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                            </tr>
                                            <!-- Linha 3 -->
                                            <tr>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                            </tr>
                                            <!-- Linha 4 -->
                                            <tr>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                            </tr>
                                            <!-- Linha 5 -->
                                            <tr>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                                <td>
                                                    <div class="item-skeleton"></div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                        </nsj-accordion>
                    </div>
                </div>
            </div>

            <!-- Ficha financeira -->
            <div class="row scroll-item">
                <div class="col-xs-12">
                    <div class="ficha-financeira-container form-group" ng-controller="CrmAtcsFichaFinanceiraController as ctrl_atcficha" 
                        ng-inject="{ entity: crm_tcs_cntrllr.entity, secaoctrl: crm_tcs_cntrllr.getSecaoCtrl('secao-fichafinanceira') }">
                        <nsj-accordion init-open keep-open headline="Ficha Financeira" id="secao-fichafinanceira" class="secao-scroll">
                            
                            <!-- Ação de atualizar accordion-->
                            <button slot="right" class="btn btn-default btn-md" ng-click="ctrl_atcficha.carregarDadosTela()" 
                                ng-disabled="ctrl_atcficha.busyInicializacao || ctrl_atcficha.busy">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                            
                            <!-- Ação de histórico-->
                            <button slot="right" class="btn btn-default btn-md" ng-click="ctrl_atcficha.abrirHistoricoModal('orçamento')" 
                                ng-disabled="ctrl_atcficha.busyInicializacao || ctrl_atcficha.busy">
                                <i class="fas fa-history"></i>
                            </button>

                            <div class="accordion-container" ng-class="{
                                'form-loading-layout-wrapper-body': ctrl_atcficha.busy
                            }">
                                <!-- Container de dados -->
                                <div class="dados-container" ng-if="!ctrl_atcficha.busyInicializacao">
                                    <div ng-if="ctrl_atcficha.arrDadosFicha.length > 0 && ctrl_atcficha.possuiPrestadorDaEmpresa !== true && ctrl_atcficha.entity.possuiseguradora == true" class="div-info-taxa-adm alert-modal nsj-alert unset-mb {{ctrl_atcficha.taxaAdministrativaView.classe}}">
                                        <span ng-class="ctrl_atcficha.taxaAdministrativaView.icone"></span>
                                        {{ctrl_atcficha.taxaAdministrativaView.mensagem}}
                                        
                                        <!--Botão taxa administrativa-->
                                        <div class="pull-right">
                                            <button tem-permissao="crm_contratostaxasadm_gerenciar"
                                                class="btn btn-default"
                                                ng-class="{loading:crm_tcs_cntrllr.desativaBtnTaxaAdm}"
                                                ng-click="crm_tcs_cntrllr.abrirModalTaxaAdministrativa(crm_tcs_cntrllr.entity)"
                                                ng-disabled="ctrl_atcficha.taxaAdministrativaView.status == 3 || crm_tcs_cntrllr.desativaBtnTaxaAdm || crm_tcs_cntrllr.entity.status == 3 || crm_tcs_cntrllr.entity.status == 4">
                                                <i class="fas fa-money-bill-alt"></i> 
                                                Taxa administrativa
                                            </button>
                                        </div>

                                    </div>
                                    <!-- Container da ficha do fornecedor-->
                                    <div ng-repeat="dadoFicha in ctrl_atcficha.arrDadosFicha">
                                      <!-- Loading de processamento -->
                                      <div class="pull-right height-60">
                                        <div class="atualizando-orcamento" ng-if="dadoFicha.ficha.saving">
                                          <span>
                                            Atualizando orçamento...
                                          </span>
                                          <div class="onloading"></div>
                                        </div>
                                      </div>
                                      <div class="ficha-fornecedor-container">
                                        <!-- Tabela de dados -->
                                        <table class="tabela-fornecedor table nsj-table btns-actions">
                                            <tbody>
                                                <!-- Linha de títulos do fornecedor-->
                                                <tr class="titulos">
                                                    <td colspan="5">Prestador de Serviços</td>
                                                    <td colspan="{{ dadoFicha.ficha.fornecedorEnvolvido.possuidescontoparcial ? 2 : 1 }}">Acionamento</td>
                                                    <td>Última atualização</td>
                                                    <td ng-if="ctrl_atcficha.entity.possuiseguradora" colspan="2">Valor coberto pela apólice</td>
                                                    <td class="situacao">Situação</td>
                                                    <td></td>
                                                </tr>
                                                <!-- Linha e dados do fornecedor -->
                                                <tr class="dados-fornecedor">
                                                    <!-- Nome do fornecedor -->
                                                    <td colspan="5">{{ dadoFicha.ficha.fornecedorEnvolvido.fornecedor.nomefantasia }}</td>
                                                    <!-- Dados de acionamento -->
                                                    <td class="data-acionamento" colspan="{{ dadoFicha.ficha.fornecedorEnvolvido.possuidescontoparcial ? 2 : 1 }}">
                                                        <!-- Informativo de dados do acionamento-->
                                                        <div class="dados-tooltip" ng-if="dadoFicha.ficha.acionado()">
                                                            <span class="icone">
                                                                <i class="fas fa-info-circle blue"></i>
                                                            </span>
                                                            <nsj-tooltip tooltip-position="top">
                                                                <p>
                                                                    <strong style="font-size:96%;">DADOS DO ACIONAMENTO </strong>
                                                                    <a href="http://www.google.com">Google</a>
                                                                </p>
                                                                <p>
                                                                    <i class="fas fa-bullhorn"></i> 
                                                                    <span ng-bind="dadoFicha.ficha.getAcionamentoMetodoDescricao() || 'Não informado.'"></span>
                                                                </p>
                                                                <p>
                                                                    <i class="fas fa-calendar"></i>
                                                                    <span>
                                                                        {{ ctrl_atcficha.getDataFormatada(dadoFicha.ficha.getAcionamentoData(), 'DD/MM/YYYY HH:mm') }}
                                                                    </span>
                                                                </p>
                                                                <p>
                                                                    <i class="fas fa-user"></i>
                                                                    <span ng-bind="dadoFicha.ficha.acionador || 'Não informado.'"></span>
                                                                </p>
                                                            </nsj-tooltip>
                                                        </div>
                                                        <!-- Data do acionamento -->
                                                        <span ng-if="dadoFicha.ficha.acionado()">
                                                            {{ ctrl_atcficha.getDataFormatada(dadoFicha.ficha.getAcionamentoData(), 'DD/MM/YYYY HH:mm') }}
                                                        </span>
                                                        <span ng-if="!dadoFicha.ficha.acionado()">
                                                            <button tem-permissao="crm_fornecedoresenvolvidos_create"
                                                                type="button"
                                                                ng-class="{loading: dadoFicha.desativaBtnAcionar}"
                                                                ng-click="crm_tcs_cntrllr.desabilitaBotaoAcionarPrestador(dadoFicha, ctrl_atcficha.arrDadosFicha); ctrl_atcficha.onAcionarPrestadoraClick(dadoFicha)"
                                                                ng-disabled="dadoFicha.desativaBtnAcionar || crm_tcs_cntrllr.entity.status == 3 || crm_tcs_cntrllr.entity.status == 4"
                                                                class="btn btn-sm btn-warning btn-save btn-geral botao-acionar"
                                                                >

                                                                <i class="fas fa-bullhorn"></i> 
                                                                Acionar prestadora
                                                            </button>
                                                        </span>
                                                    </td>
                                                    <!-- Última atualização -->
                                                    <td>
                                                        <span ng-bind="dadoFicha.ficha.ultimaAtualizacao | asDateTime | date: 'dd/MM/yyyy' || '-'">
                                                        </span>
                                                    </td>
                                                    <!-- Cobertura da apólice -->
                                                    <td ng-if="ctrl_atcficha.entity.possuiseguradora" colspan="2">{{ dadoFicha.ficha.valorCobertoApolice | currency : 'R$ ' : 2 }}</td>
                                                    <!-- Situação -->
                                                    <td class="situacao">
                                                        <label class="label" ng-class="{
                                                            'label-default': !dadoFicha.ficha.acionado(),
                                                            'label-warning': dadoFicha.ficha.status.status == ctrl_atcficha.EOrcamentoStatus.osAberto,
                                                            'label-info': dadoFicha.ficha.status.status == ctrl_atcficha.EOrcamentoStatus.osEnviado,
                                                            'label-success': dadoFicha.ficha.status.status == ctrl_atcficha.EOrcamentoStatus.osAprovado,
                                                            'label-error': dadoFicha.ficha.status.status == ctrl_atcficha.EOrcamentoStatus.osRecusado
                                                        }">
                                                            {{ dadoFicha.ficha.status.descricao }}
                                                        </label>
                                                    </td>
                                                    <!-- Ações -->
                                                    <td>
                                                        <div class='table-btns-actions'
                                                            ng-class="{'naopossuiacoes': dadoFicha.acoes.length == 0}">
                                                            <nsj-actions >
                                                                <nsj-action
                                                                    ng-repeat="acao in dadoFicha.acoes"  
                                                                    ng-click='acao.funcao(dadoFicha)' 
                                                                    icon={{acao.icone}}
                                                                    title={{acao.nome}}
                                                                >
                                                                </nsj-action>
                                                            </nsj-actions>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <!-- Linhas dos serviços e produtos -->
                                                <tr class="produtos-servicos" ng-repeat="linha in dadoFicha.linhasServicosProdutos"
                                                    ng-class="{
                                                        'titulos': linha.tipo == 'titulo',
                                                        'linha-valores': linha.tipo != 'titulo'
                                                    }"
                                                >
                                                    <!-- Descrição do serviço -->
                                                    <td class="descricao" colspan="3">
                                                        <!-- Se for linha de título -->
                                                        <div ng-if="linha.tipo == 'titulo'">{{ linha.nome }}</div>
                                                        <!-- Se for linha de valor -->
                                                        <div ng-if="linha.tipo == 'valor'" class="valor"
                                                            ng-class="{
                                                                'pode-editar': ctrl_atcficha.podeEditarCampoOrcamento(
                                                                    dadoFicha.ficha, linha, 'descricao'
                                                                )
                                                            }"
                                                        >
                                                            <div class="visualizacao">
                                                                {{ linha.orcamento.descricao }}
                                                                <!-- Informativo de dados do prestador terceirizado -->
                                                                <div class="dados-tooltip-prestador-terceirizado" ng-if="linha.orcamento.servicotipo">
                                                                    <span class="icone">
                                                                        <i class="fas fa-info-circle blue"></i>
                                                                    </span>
                                                                    <nsj-tooltip tooltip-position="top">
                                                                        <p ng-if="linha.orcamento.servicotipo != null">
                                                                            <strong style="font-size:96%;">{{ linha.orcamento.servicotipoDescricao }}</strong>
                                                                        </p>
                                                                        <p ng-if="linha.orcamento.fornecedorterceirizado">
                                                                            <span class="icone-prestadora">
                                                                                <i class="fas fa-building"></i>
                                                                            </span>
                                                                            {{ linha.orcamento.fornecedorterceirizadonomefantasia }}
                                                                        </p>
                                                                    </nsj-tooltip>
                                                                </div>
                                                            </div>
                                                            <div class="edicao">
                                                                <input type="text" class="form-control"
                                                                    ng-disabled = "crm_tcs_cntrllr.entity.status == 3 || crm_tcs_cntrllr.entity.status == 4"
                                                                    ng-model="linha.orcamento.descricao"
                                                                    ng-blur="ctrl_atcficha.onCampoOrcamentoChange(dadoFicha.ficha, linha, 'descricao')" />
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <!-- Custo -->
                                                    <td class="custo">
                                                        <!-- Se for linha de título -->
                                                        <div ng-if="linha.tipo == 'titulo'">Custo</div>
                                                        <!-- Se for linha de valor -->
                                                        <div ng-if="linha.tipo == 'valor'" class="valor"
                                                        >
                                                        <!-- ng-class que pertencia a div valor, retirada temporariamente -> TAREFA 60848
                                                          ng-class="{
                                                          'pode-editar': ctrl_atcficha.podeEditarCampoOrcamento(
                                                              dadoFicha.ficha, linha, 'custo'
                                                          )
                                                        }" -->
                                                            <div class="visualizacao">
                                                                {{ linha.orcamento.custo | currency : 'R$ ' : 2 }}
                                                            </div>
                                                            <!-- retirado temporariamente -> TAREFA 60848
                                                              <div class="edicao">
                                                                <input class="form-control" ui-money-mask
                                                                    ng-model="linha.orcamento.custo"
                                                                    ng-blur="ctrl_atcficha.onCampoOrcamentoChange(dadoFicha.ficha, linha, 'custo')" />
                                                            </div> -->
                                                        </div>
                                                    </td>
                                                    <!-- Valor unitário -->
                                                    <td class="valorunitario">
                                                        <!-- Se for linha de título -->
                                                        <div ng-if="linha.tipo == 'titulo'">Valor unitário</div>
                                                        <!-- Se for linha de valor -->
                                                        <div ng-if="linha.tipo == 'valor'" class="valor"
                                                            ng-class="{
                                                                'pode-editar': ctrl_atcficha.podeEditarCampoOrcamento(
                                                                    dadoFicha.ficha, linha, 'valorunitario'
                                                                )
                                                            }"
                                                        >
                                                            <div class="visualizacao">
                                                                {{ linha.orcamento.valorunitario | currency : 'R$ ' : 2 }}
                                                            </div>
                                                            <div class="edicao">
                                                                <input class="form-control" ui-money-mask
                                                                    ng-disabled = "crm_tcs_cntrllr.entity.status == 3 || crm_tcs_cntrllr.entity.status == 4"
                                                                    ng-model="linha.orcamento.valorunitario"
                                                                    ng-blur="ctrl_atcficha.onCampoOrcamentoChange(dadoFicha.ficha, linha, 'valorunitario')" />
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <!-- Quantidade -->
                                                    <td class="quantidade">
                                                        <!-- Se for linha de título -->
                                                        <div ng-if="linha.tipo == 'titulo'">Quantidade</div>
                                                        <!-- Se for linha de valor -->
                                                        <div ng-if="linha.tipo == 'valor'" class="valor"
                                                            ng-class="{
                                                                'pode-editar': ctrl_atcficha.podeEditarCampoOrcamento(
                                                                    dadoFicha.ficha, linha, 'quantidade'
                                                                )
                                                            }"
                                                        >
                                                            <div class="visualizacao">
                                                                {{ linha.orcamento.quantidade }}
                                                            </div>
                                                            <div class="edicao">
                                                                <input class="form-control" 
                                                                    ng-disabled = "crm_tcs_cntrllr.entity.status == 3 || crm_tcs_cntrllr.entity.status == 4"
                                                                    ng-model="linha.orcamento.quantidade"
                                                                    ng-blur="ctrl_atcficha.onCampoOrcamentoChange(dadoFicha.ficha, linha, 'quantidade')" />
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <!-- Desconto -->
                                                    <td class="desconto" ng-if="dadoFicha.ficha.fornecedorEnvolvido.possuidescontoparcial">
                                                        <!-- Se for linha de título -->
                                                        <div ng-if="linha.tipo == 'titulo'">Desconto</div>
                                                        <!-- Se for linha de valor -->
                                                        <div ng-if="linha.tipo == 'valor'" class="valor"
                                                            ng-class="{
                                                                'pode-editar': ctrl_atcficha.podeEditarCampoOrcamento(
                                                                    dadoFicha.ficha, linha, 'desconto'
                                                                )
                                                            }"
                                                        >
                                                            <div class="visualizacao">
                                                                {{ linha.orcamento.desconto | currency : 'R$ ' : 2 }}
                                                            </div>
                                                            <div class="edicao">
                                                                <input class="form-control" ui-money-mask
                                                                    ng-disabled = "crm_tcs_cntrllr.entity.status == 3 || crm_tcs_cntrllr.entity.status == 4"
                                                                    ng-model="linha.orcamento.desconto"
                                                                    ng-blur="ctrl_atcficha.onCampoOrcamentoChange(dadoFicha.ficha, linha, 'desconto')" />
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <!-- Orçamento final -->
                                                    <td class="orcamentofinal">
                                                        <!-- Se for linha de título -->
                                                        <div ng-if="linha.tipo == 'titulo'">Orçamento</div>
                                                        <!-- Se for linha de valor -->
                                                        <div ng-if="linha.tipo == 'valor'" class="valor">
                                                            <div class="visualizacao">
                                                                {{ linha.orcamento.orcamentofinal | currency : 'R$ ' : 2 }}
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <!-- Valor autorizado -->
                                                    <td class="valorreceber" ng-if="ctrl_atcficha.entity.possuiseguradora" >
                                                        <!-- Se for linha de título -->
                                                        <div ng-if="linha.tipo == 'titulo'">Valor autorizado</div>
                                                        <!-- Se for linha de valor -->
                                                        <div ng-if="linha.tipo == 'valor'" class="valor"
                                                            ng-class="{
                                                                'pode-editar': ctrl_atcficha.podeEditarCampoOrcamento(
                                                                    dadoFicha.ficha, linha, 'valorreceber'
                                                                )
                                                            }"
                                                        >
                                                            <div class="visualizacao">
                                                                {{ linha.orcamento.valorreceber | currency : 'R$ ' : 2 }}
                                                            </div>
                                                            <div class="edicao">
                                                                <input class="form-control" ui-money-mask
                                                                    ng-disabled = "crm_tcs_cntrllr.entity.status == 3 || crm_tcs_cntrllr.entity.status == 4"
                                                                    ng-model="linha.orcamento.valorreceber"
                                                                    ng-blur="ctrl_atcficha.onCampoOrcamentoChange(dadoFicha.ficha, linha, 'valorreceber')" />
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <!-- Valor excedente -->
                                                    <td class="valorexcedente" ng-if="ctrl_atcficha.entity.possuiseguradora" >
                                                        <!-- Se for linha de título -->
                                                        <div ng-if="linha.tipo == 'titulo'">Valor excedente</div>
                                                        <!-- Se for linha de valor -->
                                                        <div ng-if="linha.tipo == 'valor'" class="valor">
                                                            <div class="visualizacao">
                                                                {{ linha.orcamento.valorexcedente | currency : 'R$ ' : 2 }}
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <!-- Faturar -->
                                                    <td class="faturar">
                                                        <!-- Se for linha de título -->
                                                        <div ng-if="linha.tipo == 'titulo'">Faturar</div>
                                                        <!-- Se for linha de valor -->
                                                        <div ng-if="linha.tipo == 'valor'" class="valor"
                                                            ng-class="{
                                                                'pode-editar': ctrl_atcficha.podeEditarCampoOrcamento(
                                                                    dadoFicha.ficha, linha, 'faturamentotipo'
                                                                )
                                                            }"
                                                        >
                                                            <div class="visualizacao">
                                                                {{ linha.orcamento.faturamentoDescricao }}
                                                            </div>
                                                            <div class="edicao">
                                                                <select
                                                                    class="form-control" 
                                                                    id="faturamentotipo"
                                                                    name="faturamentotipo"
                                                                    ng-model="linha.orcamento.faturamentotipo"
                                                                    ng-change="ctrl_atcficha.onCampoOrcamentoChange(dadoFicha.ficha, linha, 'faturamentotipo')"
                                                                    ng-disabled = "crm_tcs_cntrllr.entity.status == 3 || crm_tcs_cntrllr.entity.status == 4"
                                                                >
                                                                    <option ng-value="ctrl_atcficha.EFaturamentoTipo.ftNaoFaturar" selected
                                                                        ng-if="ctrl_atcficha.apresentarTipoFaturamento(dadoFicha.ficha, ctrl_atcficha.EFaturamentoTipo.ftNaoFaturar)"
                                                                    >
                                                                        {{ ctrl_atcficha.getFaturamentoDescricao(ctrl_atcficha.EFaturamentoTipo.ftNaoFaturar) }}
                                                                    </option>
                                                                    <option ng-value="ctrl_atcficha.EFaturamentoTipo.ftFaturarSeguradoraSemNFS"
                                                                        ng-if="ctrl_atcficha.apresentarTipoFaturamento(dadoFicha.ficha, ctrl_atcficha.EFaturamentoTipo.ftFaturarSeguradoraSemNFS)"
                                                                    >
                                                                        {{ ctrl_atcficha.getFaturamentoDescricao(ctrl_atcficha.EFaturamentoTipo.ftFaturarSeguradoraSemNFS) }}
                                                                    </option>
                                                                    <option ng-value="ctrl_atcficha.EFaturamentoTipo.ftFaturarSeguradoraComNFS"
                                                                        ng-if="ctrl_atcficha.apresentarTipoFaturamento(dadoFicha.ficha, ctrl_atcficha.EFaturamentoTipo.ftFaturarSeguradoraComNFS)"
                                                                    >
                                                                        {{ ctrl_atcficha.getFaturamentoDescricao(ctrl_atcficha.EFaturamentoTipo.ftFaturarSeguradoraComNFS) }}
                                                                    </option>
                                                                    <option ng-value="ctrl_atcficha.EFaturamentoTipo.ftFaturarClienteComNFS"
                                                                        ng-if="ctrl_atcficha.apresentarTipoFaturamento(dadoFicha.ficha, ctrl_atcficha.EFaturamentoTipo.ftFaturarClienteComNFS)"
                                                                    >
                                                                        {{ ctrl_atcficha.getFaturamentoDescricao(ctrl_atcficha.EFaturamentoTipo.ftFaturarClienteComNFS) }}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <!-- Ações -->
                                                    <td>
                                                        <div class='table-btns-actions'
                                                            ng-class="{'naopossuiacoes': linha.acoes.length == 0}">
                                                            <nsj-actions >
                                                                <nsj-action
                                                                    ng-repeat="acao in linha.acoes"  
                                                                    ng-click='acao.funcao(dadoFicha, linha)' 
                                                                    icon={{acao.icone}}
                                                                    title={{acao.nome}}
                                                                >
                                                                </nsj-action>
                                                            </nsj-actions>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <!-- Totais: Só apresento se fornecedor já foi acionado -->
                                                <tr class="titulos totais" ng-if="dadoFicha.ficha.acionado() && dadoFicha.linhasServicosProdutos.length > 0">
                                                    <td colspan="3">Totais</td>
                                                    <td>{{ dadoFicha.ficha.getTotal('custo') | currency : 'R$ ' : 2 }}</td>
                                                    <td></td>
                                                    <td></td>
                                                    <td ng-if="dadoFicha.ficha.fornecedorEnvolvido.possuidescontoparcial">{{ dadoFicha.ficha.getTotal('desconto') | currency : 'R$ ' : 2 }}</td>
                                                    <td>{{ dadoFicha.ficha.getTotal('orcamentofinal') | currency : 'R$ ' : 2 }}</td>
                                                    <td ng-if="ctrl_atcficha.entity.possuiseguradora">{{ dadoFicha.ficha.getTotal('valorreceber') | currency : 'R$ ' : 2 }}</td>
                                                    <td ng-if="ctrl_atcficha.entity.possuiseguradora">{{ dadoFicha.ficha.getTotal('valorexcedente') | currency : 'R$ ' : 2 }}</td>
                                                    <td></td>
                                                    <!-- Ações -->
                                                    <td></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <!-- Container de descontos e totais -->
                                        <div class="container-descontos" ng-if="dadoFicha.ficha.acionado()">
                                            
                                            <!--Div com descontos-->
                                            <div class="div-descontos">

                                                <!--Desconto parcial-->
                                                <div class="descontos-item desconto-parcial" ng-if="dadoFicha.ficha.apresentarInformacoesDesconto()">
                                                    
                                                    <div class="container-descontos-item">
                                                        <div class="superior-container">
                                                            <span class="checkbox-container">
                                                                <nsj-switch name="possuidescontoparcial" id="possuidescontoparcial"
                                                                    ng-model="dadoFicha.ficha.fornecedorEnvolvido.possuidescontoparcial"
                                                                    ng-change="ctrl_atcficha.onConfigDescontosChange(dadoFicha.ficha, 'possuidescontoparcial')"
                                                                    ng-disabled="dadoFicha.ficha.status.status != ctrl_atcficha.EOrcamentoStatus.osAberto || crm_tcs_cntrllr.entity.status == 3  || crm_tcs_cntrllr.entity.status == 4">
                                                                </nsj-switch>
                                                            </span>
                                                            <div class="titulo-desconto">Desconto Parcial</div>
                                                            <div class="dados-tooltip">
                                                                <span class="icone">
                                                                    <i class="fas fa-info-circle blue"></i>
                                                                </span>
                                                                <nsj-tooltip tooltip-position="top">
                                                                    <p>
                                                                        Permitir descontos para cada item de produto ou serviço específico.
                                                                    </p>
                                                                </nsj-tooltip>
                                                            </div>
                                                        </div>
                                                        <div class="inferior-container">
                                                            <input class="form-control" disabled
                                                                ng-value="dadoFicha.ficha.getTotal('desconto') | currency : 'R$ ' : 2" />
                                                        </div>
                                                    </div>

                                                </div>

                                                <!--Desconto global-->
                                                <div class="descontos-item desconto-global" ng-if="dadoFicha.ficha.apresentarInformacoesDesconto()">
                                                    
                                                    <div class="container-descontos-item">
                                                        <div class="superior-container">
                                                            <span class="checkbox-container">
                                                                <nsj-switch name="possuidescontoglobal" id="possuidescontoglobal"
                                                                    ng-model="dadoFicha.ficha.fornecedorEnvolvido.possuidescontoglobal"
                                                                    ng-change="ctrl_atcficha.onConfigDescontosChange(dadoFicha.ficha, 'possuidescontoglobal')"
                                                                    ng-disabled="dadoFicha.ficha.status.status != ctrl_atcficha.EOrcamentoStatus.osAberto || crm_tcs_cntrllr.entity.status == 3 || crm_tcs_cntrllr.entity.status == 4">
                                                                </nsj-switch>
                                                            </span>
                                                            <div class="titulo-desconto">Desconto Global</div>
                                                            <div class="dados-tooltip">
                                                                <span class="icone">
                                                                    <i class="fas fa-info-circle blue"></i>
                                                                </span>
                                                                <nsj-tooltip tooltip-position="top">
                                                                    <p>
                                                                        Permitir desconto integral em cima do valor total.
                                                                    </p>
                                                                </nsj-tooltip>
                                                            </div>
                                                        </div>
                                                        <div class="inferior-container">
                                                            <select
                                                                class="form-control descontoglobaltipo" 
                                                            class="form-control descontoglobaltipo" 
                                                                class="form-control descontoglobaltipo" 
                                                            class="form-control descontoglobaltipo" 
                                                                class="form-control descontoglobaltipo" 
                                                                id="descontoglobaltipo"
                                                                name="descontoglobaltipo"
                                                                ng-model="dadoFicha.ficha.fornecedorEnvolvido.descontoglobaltipo"
                                                                ng-change="ctrl_atcficha.onConfigDescontosChange(dadoFicha.ficha, 'descontoglobaltipo')"
                                                                ng-disabled="!dadoFicha.ficha.fornecedorEnvolvido.possuidescontoglobal || dadoFicha.ficha.status.status != ctrl_atcficha.EOrcamentoStatus.osAberto || crm_tcs_cntrllr.entity.status == 3 || crm_tcs_cntrllr.entity.status == 4"
                                                            >
                                                                <option ng-value="ctrl_atcficha.EDescontoGlobalTipo.dgtValor" selected>
                                                                    Valor
                                                                </option>
                                                                <option ng-value="ctrl_atcficha.EDescontoGlobalTipo.dgtPercentual">
                                                                    Percentual
                                                                </option>
                                                            </select>
                                                            <!-- Input de valor -->
                                                            <input class="form-control descontoglobalvalor" ui-money-mask
                                                                ng-if="dadoFicha.ficha.fornecedorEnvolvido.descontoglobaltipo == ctrl_atcficha.EDescontoGlobalTipo.dgtValor"
                                                                ng-model="dadoFicha.ficha.fornecedorEnvolvido.descontoglobal"
                                                                ng-blur="ctrl_atcficha.onConfigDescontosChange(dadoFicha.ficha, 'descontoglobal')" 
                                                                ng-disabled="!dadoFicha.ficha.fornecedorEnvolvido.possuidescontoglobal || dadoFicha.ficha.status.status != ctrl_atcficha.EOrcamentoStatus.osAberto || crm_tcs_cntrllr.entity.status == 3 || crm_tcs_cntrllr.entity.status == 4" />
                                                            <!-- Input de percentual -->
                                                            <input class="form-control descontoglobalvalor" ui-percentage-mask ui-percentage-value
                                                                ng-if="dadoFicha.ficha.fornecedorEnvolvido.descontoglobaltipo == ctrl_atcficha.EDescontoGlobalTipo.dgtPercentual"
                                                                ng-model="dadoFicha.ficha.fornecedorEnvolvido.descontoglobal"
                                                                ng-blur="ctrl_atcficha.onConfigDescontosChange(dadoFicha.ficha, 'descontoglobal')" 
                                                                ng-disabled="!dadoFicha.ficha.fornecedorEnvolvido.possuidescontoglobal || dadoFicha.ficha.status.status != ctrl_atcficha.EOrcamentoStatus.osAberto || crm_tcs_cntrllr.entity.status == 3 || crm_tcs_cntrllr.entity.status == 4" />
                                                        </div>
                                                    </div>

                                                </div>

                                            </div>


                                            <!--Div com totais-->
                                            <div class="div-totais">

                                                <!--Total Orçamento-->
                                                <div class="descontos-item total-orcamento" ng-class="{'somente-total-orcamento': !ctrl_atcficha.entity.possuiseguradora}">

                                                    <div class="container-descontos-item">
                                                        <div class="superior-container">
                                                            <div class="titulo-desconto">Total orçamento</div>
                                                            <div class="dados-tooltip">
                                                                <span class="icone">
                                                                    <i class="fas fa-info-circle blue"></i>
                                                                </span>
                                                                <nsj-tooltip tooltip-position="top">
                                                                    <p>
                                                                        Este campo é a soma da coluna "Orçamento" menos o desconto global aplicado quando o mesmo existir.
                                                                    </p>
                                                                </nsj-tooltip>
                                                            </div>
                                                        </div>
                                                        <div class="inferior-container">
                                                            <input class="form-control" disabled
                                                                ng-value="(dadoFicha.ficha.getTotal('orcamentofinal') - dadoFicha.ficha.getValorDescontoGlobal()) | currency : 'R$ ' : 2" />
                                                        </div>
                                                    </div>

                                                </div>

                                                <!--Total receber prestadora-->
                                                <div class="descontos-item total-receber-prestadora" ng-if="ctrl_atcficha.entity.possuiseguradora">

                                                    <div class="container-descontos-item">
                                                        <div class="superior-container">
                                                            <div class="titulo-desconto">Total receber prestadora</div>
                                                            <div class="dados-tooltip">
                                                                <span class="icone">
                                                                    <i class="fas fa-info-circle blue"></i>
                                                                </span>
                                                                <nsj-tooltip tooltip-position="top">
                                                                    <p>
                                                                        Este campo é a soma da coluna "Valor autorizado" menos o desconto global aplicado quando o mesmo existir.
                                                                    </p>
                                                                </nsj-tooltip>
                                                            </div>
                                                        </div>
                                                        <div class="inferior-container">
                                                            <input class="form-control" disabled
                                                                ng-value="(dadoFicha.ficha.getTotal('valorreceber') - dadoFicha.ficha.getValorDescontoGlobal()) | currency : 'R$ ' : 2" />
                                                        </div>
                                                    </div>

                                                </div>

                                                <!--Total autorizado seguradora-->
                                                <div class="descontos-item total-autorizado-seguradora" ng-if="ctrl_atcficha.entity.possuiseguradora">

                                                    <div class="container-descontos-item">
                                                        <div class="superior-container">
                                                            <div class="titulo-desconto">Total autorizado seguradora</div>
                                                            <div class="dados-tooltip">
                                                                <span class="icone">
                                                                    <i class="fas fa-info-circle blue"></i>
                                                                </span>
                                                                <nsj-tooltip tooltip-position="top">
                                                                    <p>
                                                                        Este campo é a soma da coluna "Valor autorizado" mais o valor da taxa administrativa informada menos o desconto global aplicado quando o mesmo existir.
                                                                    </p>
                                                                </nsj-tooltip>
                                                            </div>
                                                        </div>
                                                        <div class="inferior-container">
                                                            <input class="form-control" disabled
                                                                ng-value="( ( dadoFicha.ficha.getTotal('valorreceber') + crm_tcs_cntrllr.getValorTaxaAdm() ) - dadoFicha.ficha.getValorDescontoGlobal() ) | currency : 'R$ ' : 2" />
                                                        </div>
                                                    </div>

                                                </div>

                                            </div>
                                        </div>
                                      </div>
                                    </div>
                                    <!-- Mensagem de sem dados -->
                                    <div class="sem-dados" ng-if="ctrl_atcficha.arrDadosFicha.length == 0">
                                        <p>Não existem dados para apresentar!</p>
                                    </div>
                                </div>
                                <!-- Esqueleto de carregamento -->
                                <div class="skeleton-container" ng-if="ctrl_atcficha.busyInicializacao">
                                    <div class="ficha-fornecedor-container">
                                        <!-- Tabela de dados -->
                                        <table class="tabela-fornecedor table nsj-table btns-actions">
                                            <tbody>
                                                <!-- Linha de títulos do fornecedor-->
                                                <tr class="titulos">
                                                    <td colspan="3">
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <td>
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <td>
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <td ng-if="ctrl_atcficha.entity.possuiseguradora" colspan="2">
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <td class="situacao">
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <td></td>
                                                </tr>
                                                <!-- Linha e dados do fornecedor -->
                                                <tr class="dados-fornecedor">
                                                    <!-- Nome do fornecedor -->
                                                    <td colspan="3">
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <!-- Dados de acionamento -->
                                                    <td class="data-acionamento">
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <!-- Última atualização -->
                                                    <td>
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <!-- Cobertura da apólice -->
                                                    <td ng-if="ctrl_atcficha.entity.possuiseguradora" colspan="2">
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <!-- Situação -->
                                                    <td class="situacao">
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <!-- Ações -->
                                                    <td>
                                                        <div class='table-btns-actions naopossuiacoes'>
                                                            <nsj-actions >
                                                            </nsj-actions>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <!-- Linhas dos serviços: Títulos -->
                                                <tr class="produtos-servicos titulos">
                                                    <!-- Descrição do serviço -->
                                                    <td class="descricao">
                                                        <!-- Se for linha de título -->
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <!-- Custo -->
                                                    <td class="custo">
                                                        <!-- Se for linha de título -->
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <!-- Valor unitário -->
                                                    <td class="valorunitario">
                                                        <!-- Se for linha de título -->
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <!-- Quantidade -->
                                                    <td class="quantidade">
                                                        <!-- Se for linha de título -->
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <!-- Orçamento -->
                                                    <td class="valor">
                                                        <!-- Se for linha de título -->
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <!-- Valor autorizado -->
                                                    <td class="valorreceber" ng-if="ctrl_atcficha.entity.possuiseguradora" >
                                                        <!-- Se for linha de título -->
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <!-- Valor excedente -->
                                                    <td class="valorexcedente" ng-if="ctrl_atcficha.entity.possuiseguradora" >
                                                        <!-- Se for linha de título -->
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <!-- Faturar -->
                                                    <td class="faturar">
                                                        <!-- Se for linha de título -->
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <!-- Ações -->
                                                    <td>
                                                        <div class='table-btns-actions naopossuiacoes'>
                                                            <nsj-actions ></nsj-actions>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <!-- Linhas dos serviços: Valores -->
                                                <tr class="produtos-servicos linha-valores">
                                                    <!-- Descrição do serviço -->
                                                    <td class="descricao">
                                                        <!-- Se for linha de título -->
                                                        <div class="valor">
                                                            <div class="item-skeleton"></div>
                                                        </div>
                                                    </td>
                                                    <!-- Custo -->
                                                    <td class="custo">
                                                        <!-- Se for linha de título -->
                                                        <div class="valor">
                                                            <div class="item-skeleton"></div>
                                                        </div>
                                                    </td>
                                                    <!-- Valor unitário -->
                                                    <td class="valorunitario">
                                                        <!-- Se for linha de título -->
                                                        <div class="valor">
                                                            <div class="item-skeleton"></div>
                                                        </div>
                                                    </td>
                                                    <!-- Quantidade -->
                                                    <td class="quantidade">
                                                        <!-- Se for linha de título -->
                                                        <div class="valor">
                                                            <div class="item-skeleton"></div>
                                                        </div>
                                                    </td>
                                                    <!-- Orçamento -->
                                                    <td class="valor">
                                                        <!-- Se for linha de título -->
                                                        <div class="valor">
                                                            <div class="item-skeleton"></div>
                                                        </div>
                                                    </td>
                                                    <!-- Valor autorizado -->
                                                    <td class="valorreceber" ng-if="ctrl_atcficha.entity.possuiseguradora" >
                                                        <!-- Se for linha de título -->
                                                        <div class="valor">
                                                            <div class="item-skeleton"></div>
                                                        </div>
                                                    </td>
                                                    <!-- Valor excedente -->
                                                    <td class="valorexcedente" ng-if="ctrl_atcficha.entity.possuiseguradora" >
                                                        <!-- Se for linha de título -->
                                                        <div class="valor">
                                                            <div class="item-skeleton"></div>
                                                        </div>
                                                    </td>
                                                    <!-- Faturar -->
                                                    <td class="faturar">
                                                        <!-- Se for linha de título -->
                                                        <div class="valor">
                                                            <div class="item-skeleton"></div>
                                                        </div>
                                                    </td>
                                                    <!-- Ações -->
                                                    <td>
                                                        <div class='table-btns-actions naopossuiacoes'>
                                                            <nsj-actions ></nsj-actions>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <!-- Linhas dos serviços: Títulos -->
                                                <tr class="produtos-servicos titulos">
                                                    <!-- Descrição do serviço -->
                                                    <td class="descricao">
                                                        <!-- Se for linha de título -->
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <!-- Custo -->
                                                    <td class="custo">
                                                        <!-- Se for linha de título -->
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <!-- Valor unitário -->
                                                    <td class="valorunitario">
                                                        <!-- Se for linha de título -->
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <!-- Quantidade -->
                                                    <td class="quantidade">
                                                        <!-- Se for linha de título -->
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <!-- Orçamento -->
                                                    <td class="valor">
                                                        <!-- Se for linha de título -->
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <!-- Valor autorizado -->
                                                    <td class="valorreceber" ng-if="ctrl_atcficha.entity.possuiseguradora" >
                                                        <!-- Se for linha de título -->
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <!-- Valor excedente -->
                                                    <td class="valorexcedente" ng-if="ctrl_atcficha.entity.possuiseguradora" >
                                                        <!-- Se for linha de título -->
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <!-- Faturar -->
                                                    <td class="faturar">
                                                        <!-- Se for linha de título -->
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <!-- Ações -->
                                                    <td>
                                                        <div class='table-btns-actions naopossuiacoes'>
                                                            <nsj-actions ></nsj-actions>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <!-- Linhas dos serviços: Valores -->
                                                <tr class="produtos-servicos linha-valores">
                                                    <!-- Descrição do serviço -->
                                                    <td class="descricao">
                                                        <!-- Se for linha de título -->
                                                        <div class="valor">
                                                            <div class="item-skeleton"></div>
                                                        </div>
                                                    </td>
                                                    <!-- Custo -->
                                                    <td class="custo">
                                                        <!-- Se for linha de título -->
                                                        <div class="valor">
                                                            <div class="item-skeleton"></div>
                                                        </div>
                                                    </td>
                                                    <!-- Valor unitário -->
                                                    <td class="valorunitario">
                                                        <!-- Se for linha de título -->
                                                        <div class="valor">
                                                            <div class="item-skeleton"></div>
                                                        </div>
                                                    </td>
                                                    <!-- Quantidade -->
                                                    <td class="quantidade">
                                                        <!-- Se for linha de título -->
                                                        <div class="valor">
                                                            <div class="item-skeleton"></div>
                                                        </div>
                                                    </td>
                                                    <!-- Orçamento -->
                                                    <td class="valor">
                                                        <!-- Se for linha de título -->
                                                        <div class="valor">
                                                            <div class="item-skeleton"></div>
                                                        </div>
                                                    </td>
                                                    <!-- Valor autorizado -->
                                                    <td class="valorreceber" ng-if="ctrl_atcficha.entity.possuiseguradora" >
                                                        <!-- Se for linha de título -->
                                                        <div class="valor">
                                                            <div class="item-skeleton"></div>
                                                        </div>
                                                    </td>
                                                    <!-- Valor excedente -->
                                                    <td class="valorexcedente" ng-if="ctrl_atcficha.entity.possuiseguradora" >
                                                        <!-- Se for linha de título -->
                                                        <div class="valor">
                                                            <div class="item-skeleton"></div>
                                                        </div>
                                                    </td>
                                                    <!-- Faturar -->
                                                    <td class="faturar">
                                                        <!-- Se for linha de título -->
                                                        <div class="valor">
                                                            <div class="item-skeleton"></div>
                                                        </div>
                                                    </td>
                                                    <!-- Ações -->
                                                    <td>
                                                        <div class='table-btns-actions naopossuiacoes'>
                                                            <nsj-actions ></nsj-actions>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <!-- Totais: Só apresento se fornecedor já foi acionado -->
                                                <tr class="titulos totais">
                                                    <td>
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <td>
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <td></td>
                                                    <td></td>
                                                    <td>
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <td ng-if="ctrl_atcficha.entity.possuiseguradora">
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <td ng-if="ctrl_atcficha.entity.possuiseguradora">
                                                        <div class="item-skeleton"></div>
                                                    </td>
                                                    <td></td>
                                                    <!-- Ações -->
                                                    <td></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="content-loading"  ng-if="ctrl_atcficha.busy">
                                  <div class="center-loading text-center">
                                      <div class="onloading"></div>
                                      {{ ctrl_atcficha.busyMensagem }}
                                  </div>
                                </div>
                            </div>
                        </nsj-accordion>
                    </div>
                </div>
            </div>

            <!-- Contas a pagar -->
            <div class="row scroll-item" tem-permissao="crm_atcscontasapagar_gerenciar">
                <div class="col-xs-12">
                    <div class="contas-pagar-container form-group" ng-controller="crmAtcContaPagarController as ctrl_contaspagar" 
                        ng-inject="{ entity: crm_tcs_cntrllr.entity, secaoctrl: crm_tcs_cntrllr.getSecaoCtrl('secao-contaspagar') }">
                        <nsj-accordion init-open keep-open headline="Contas a pagar" id="secao-contaspagar" class="secao-scroll">
                            
                            <!-- Ação de atualizar accordion-->
                            <button slot="right" class="btn btn-default btn-md" ng-click="ctrl_contaspagar.carregarDadosTela()" 
                                ng-disabled="ctrl_contaspagar.busyInicializacao || ctrl_contaspagar.busy">
                                <i class="fas fa-sync-alt"></i>
                            </button>

                            <!-- Ação de histórico-->
                            <button slot="right" class="btn btn-default btn-md" ng-click="ctrl_contaspagar.abrirHistoricoModal()" 
                                ng-disabled="ctrl_contaspagar.busyInicializacao || ctrl_contaspagar.busy">
                                <i class="fas fa-history"></i>
                            </button>

                            <div class="accordion-container" ng-class="{
                                'form-loading-layout-wrapper-body': ctrl_contaspagar.busy
                            }">
                                <!-- Container de dados -->
                                <div class="dados-container" ng-if="!ctrl_contaspagar.busyInicializacao && !ctrl_contaspagar.busy">
                                    <!-- Tabela de dados -->
                                    <table class="tabela-fornecedor table nsj-table btns-actions" ng-if="ctrl_contaspagar.arrDadosTabela.length > 0">
                                        <thead>
                                            <!-- Linha de títulos do fornecedor-->
                                            <tr class="titulos">
                                                <th>Prestadora de Serviço</th>
                                                <th>Número do documento</th>
                                                <th>Data de recebimento</th>
                                                <th>Serviço / Produto</th>
                                                <th>Quantidade</th>
                                                <th>Valor acordado</th>
                                                <th>Total</th>
                                                <th>Valor a pagar</th>
                                                <th>Processamento</th>
                                                <!-- Ações -->
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <!-- Linhas dos serviços e produtos -->
                                            <tr class="dados" ng-repeat="linha in ctrl_contaspagar.arrDadosTabela"
                                                ng-class="{
                                                    'linha-fornecedor': linha.tipo == 'fornecedor',
                                                    'linha-valores': linha.tipo == 'contapagar'
                                                }"
                                            >
                                                <!-- Prestadora de Serviço -->
                                                <td class="prestadora">
                                                    <!-- Se for linha de fornecedor -->
                                                    <div ng-if="linha.tipo == 'fornecedor'">
                                                        {{ linha.contapagar.prestador.nomefantasia }}
                                                    </div>
                                                </td>
                                                <!-- Número do documento -->
                                                <td class="numerodocumento">
                                                    <!-- Se for linha de conta a pagar -->
                                                    <div ng-if="linha.tipo == 'contapagar'" class="valor">
                                                        <div class="visualizacao">
                                                            {{ linha.contapagar.numerodocumento || '-' }}
                                                        </div>
                                                    </div>
                                                </td>
                                                <!-- Data de recebimento -->
                                                <td class="datadocumento">
                                                    <!-- Se for linha de conta a pagar -->
                                                    <div ng-if="linha.tipo == 'contapagar'" class="valor">
                                                        <div class="visualizacao">
                                                            {{ ctrl_contaspagar.getDataFormatada(linha.contapagar.datadocumento) }}
                                                        </div>
                                                    </div>
                                                </td>
                                                <!-- Serviço / Produto -->
                                                <td class="descricao">
                                                    <!-- Se for linha de conta a pagar -->
                                                    <div ng-if="linha.tipo == 'contapagar'" class="valor">
                                                        <div class="visualizacao">
                                                            {{ linha.contapagar.descricao }}
                                                        </div>
                                                    </div>
                                                </td>
                                                <!-- Quantidade -->
                                                <td class="quantidade">
                                                    <!-- Se for linha de conta a pagar -->
                                                    <div ng-if="linha.tipo == 'contapagar'" class="valor"
                                                        ng-class="{
                                                            'pode-editar': ctrl_contaspagar.podeEditarContaPagar(linha.contapagar)
                                                        }"
                                                    >
                                                        <div class="visualizacao">
                                                            {{ linha.contapagar.quantidade }}
                                                        </div>
                                                        <div class="edicao">
                                                            <input class="form-control" type="number"
                                                                ng-model="linha.contapagar.quantidade"
                                                                ng-blur="ctrl_contaspagar.onCampoContaPagarChange(linha)"
                                                            />
                                                        </div>
                                                    </div>
                                                </td>
                                                <!-- Valor acordado -->
                                                <td class="valoracordado">
                                                    <!-- Se for linha de conta a pagar -->
                                                    <div ng-if="linha.tipo == 'contapagar'" class="valor">
                                                        <div class="visualizacao">
                                                            {{ linha.contapagar.valoracordado | currency : 'R$ ' : 2 }}
                                                        </div>
                                                    </div>
                                                </td>
                                                <!-- Total -->
                                                <td class="total">
                                                    <!-- Se for linha de conta a pagar -->
                                                    <div ng-if="linha.tipo == 'contapagar'" class="valor">
                                                        <div class="visualizacao">
                                                            {{ linha.contapagar.total | currency : 'R$ ' : 2 }}
                                                        </div>
                                                    </div>
                                                </td>
                                                <!-- Valor a pagar -->
                                                <td class="valorpagar">
                                                    <!-- Se for linha de conta a pagar -->
                                                    <div ng-if="linha.tipo == 'contapagar'" class="valor"
                                                        ng-class="{
                                                            'pode-editar': ctrl_contaspagar.podeEditarContaPagar(linha.contapagar)
                                                        }"
                                                    >
                                                        <div class="visualizacao">
                                                            {{ linha.contapagar.valorpagar | currency : 'R$ ' : 2 }}
                                                        </div>
                                                        <div class="edicao">
                                                            <input class="form-control" ui-money-mask
                                                                ng-model="linha.contapagar.valorpagar"
                                                                ng-blur="ctrl_contaspagar.onCampoContaPagarChange(linha)" />
                                                            <span class="icone-limpar" ng-click="ctrl_contaspagar.limparCampoValor(linha, 'valorpagar')">
                                                                <i class="fas fa-times"></i>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </td>
                                                <!-- Processamento -->
                                                <td class="processamento">
                                                    <!-- Se for linha de fornecedor -->
                                                    <div ng-if="linha.tipo == 'fornecedor'">
                                                        <!-- Tooltip Processado -->
                                                        <div class="tooltip-item tooltip-processado" ng-if="linha.contapagar.situacao == ctrl_contaspagar.ECrmAtcContaPagarSituacao.cacpsProcessado">
                                                            <span class="icone">
                                                                <i class="fas fa-check-circle"></i>
                                                            </span>
                                                            <nsj-tooltip tooltip-position="{{ctrl_contaspagar.getTooltipPosition($index, 'processado')}}">
                                                                <p class="texto">
                                                                    Processado
                                                                </p>
                                                            </nsj-tooltip>
                                                        </div>
                                                        <!-- Tooltip Não Processado -->
                                                        <div class="tooltip-item tooltip-nao-processado" ng-if="linha.contapagar.situacao == ctrl_contaspagar.ECrmAtcContaPagarSituacao.cacpsNaoProcessado">
                                                            <span class="icone">
                                                                <i class="fas fa-check-circle"></i>
                                                            </span>
                                                            <nsj-tooltip tooltip-position="{{ctrl_contaspagar.getTooltipPosition($index, 'processado')}}">
                                                                <p class="texto">
                                                                    Não processado
                                                                </p>
                                                            </nsj-tooltip>
                                                        </div>
                                                        <!-- Tooltip Impedido -->
                                                        <div class="tooltip-item tooltip-impedido" ng-if="linha.contapagar.situacao == ctrl_contaspagar.ECrmAtcContaPagarSituacao.cacpsImpedido">
                                                            <span class="icone">
                                                                <i class="fas fa-exclamation-triangle"></i>
                                                            </span>
                                                            <nsj-tooltip tooltip-position="{{ctrl_contaspagar.getTooltipPosition($index, 'impedido')}}">
                                                                <p class="texto">
                                                                    O(s) documento(s) necessário(s) para o faturamento ainda não foram anexado(s) e/ou aprovados
                                                                </p>
                                                            </nsj-tooltip>
                                                        </div>
                                                    </div>
                                                </td>
                                                <!-- Ações -->
                                                <td>
                                                    <div class='table-btns-actions'
                                                        ng-class="{'naopossuiacoes': linha.acoes.length == 0}">
                                                        <nsj-actions >
                                                            <nsj-action
                                                                ng-repeat="acao in linha.acoes"  
                                                                ng-click='acao.funcao(linha)' 
                                                                icon={{acao.icone}}
                                                                title={{acao.nome}}
                                                            >
                                                            </nsj-action>
                                                        </nsj-actions>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <!-- Mensagem de sem dados -->
                                    <div class="sem-dados" ng-if="ctrl_contaspagar.arrDadosTabela.length == 0">
                                        <p>Não existem dados para apresentar!</p>
                                    </div>
                                </div>
                                <!-- Esqueleto de carregamento -->
                                <div class="skeleton-container dados-container" ng-if="ctrl_contaspagar.busyInicializacao">

                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="container-table">
                                                <table class="tabela-fornecedor tabela-skeleton nsj-table table no-cell-border">
                                                    <thead class="header">

                                                        <!-- Primeira linha da tabela -->
                                                        <tr class="titulos">
                                                            <th>
                                                                <!-- LINHA 1 COLUNA 1 -->
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </th>
                                                            <th>
                                                                <!-- LINHA 1 COLUNA 2 -->
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </th>
                                                            <th>
                                                                <!-- LINHA 1 COLUNA 3 -->
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </th>
                                                            <th>
                                                                <!-- LINHA 1 COLUNA 4 -->
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </th>
                                                            <th>
                                                                <!-- LINHA 1 COLUNA 5 -->
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </th>
                                                            <th>
                                                                <!-- LINHA 1 COLUNA 6 -->
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </th>
                                                            <th>
                                                                <!-- LINHA 1 COLUNA 7 -->
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </th>
                                                            <th>
                                                                <!-- LINHA 1 COLUNA 8 -->
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </th>
                                                            <th>
                                                                <!-- LINHA 1 COLUNA 9 -->
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </th>

                                                            <th>
                                                            </th>
                                                        </tr>
                                                
                                                    </thead>
                                                    <tbody class="corpo">
                                                
                                                        <!-- Segunda linha da tabela -->
                                                        <tr class="dados">

                                                            <!-- LINHA 2 COLUNA 1 -->
                                                            <td class="prestadora">
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 2 COLUNA 2 -->
                                                            <td class="numerodocumento"></td>
                                                
                                                            <!-- LINHA 2 COLUNA 3 -->
                                                            <td class="datadocumento"></td>
                                                
                                                            <!-- LINHA 2 COLUNA 4 -->
                                                            <td class="descricao"></td>
                                                
                                                            <!-- LINHA 2 COLUNA 5 -->
                                                            <td class="quantidade"></td>
                                                
                                                            <!-- LINHA 2 COLUNA 6 -->
                                                            <td class="valoracordado"></td>
                                                
                                                            <!-- LINHA 2 COLUNA 7 -->
                                                            <td class="total"></td>

                                                            <!-- LINHA 2 COLUNA 8 -->
                                                            <td class="valorpagar"></td>

                                                            <!-- LINHA 2 COLUNA 9 -->
                                                            <td class="processamento"></td>

                                                            <td></td>

                                                        </tr>
                                                
                                                        <!-- Terceira linha da tabela -->
                                                        <tr class="dados">

                                                            <!-- LINHA 3 COLUNA 1 -->
                                                            <td></td>
                                                
                                                            <!-- LINHA 3 COLUNA 2 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 3 COLUNA 3 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 3 COLUNA 4 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 3 COLUNA 5 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 3 COLUNA 6 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 3 COLUNA 7 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>

                                                            <!-- LINHA 3 COLUNA 8 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 3 COLUNA 9 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>

                                                            <td></td>
                                                
                                                        </tr>
                                                
                                                        <!-- Quarta linha da tabela -->
                                                        <tr class="dados">
                                                            <!-- LINHA 4 COLUNA 1 -->
                                                            <td></td>
                                                
                                                            <!-- LINHA 4 COLUNA 2 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 4 COLUNA 3 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 4 COLUNA 4 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 4 COLUNA 5 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 4 COLUNA 6 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 4 COLUNA 7 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 4 COLUNA 8 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 4 COLUNA 9 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>

                                                            <td></td>
                                                
                                                        </tr>
                                                
                                                        <!-- Quinta linha da tabela -->
                                                        <tr class="dados">
                                                            <!-- LINHA 5 COLUNA 1 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 5 COLUNA 2 -->
                                                            <td></td>
                                                
                                                            <!-- LINHA 5 COLUNA 3 -->
                                                            <td></td>
                                                
                                                            <!-- LINHA 5 COLUNA 4 -->
                                                            <td></td>
                                                
                                                            <!-- LINHA 5 COLUNA 5 -->
                                                            <td></td>
                                                
                                                            <!-- LINHA 5 COLUNA 6 -->
                                                            <td></td>
                                                
                                                            <!-- LINHA 5 COLUNA 7 -->
                                                            <td></td>
                                                
                                                            <!-- LINHA 5 COLUNA 8 -->
                                                            <td></td>
                                                
                                                            <!-- LINHA 5 COLUNA 9 -->
                                                            <td></td>

                                                            <td></td>
                                                        </tr>
                                                
                                                        <!-- Sexta linha da tabela -->
                                                        <tr class="dados">
                                                            <!-- LINHA 6 COLUNA 1 -->
                                                            <td></td>
                                                
                                                            <!-- LINHA 6 COLUNA 2 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 6 COLUNA 3 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 6 COLUNA 4 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 6 COLUNA 5 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 6 COLUNA 6 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 6 COLUNA 7 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 6 COLUNA 8 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 6 COLUNA 9 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>

                                                            <td></td>
                                                
                                                        </tr>
                                                
                                                        <!-- Sétima linha da tabela -->
                                                        <tr class="dados">
                                                            <!-- LINHA 7 COLUNA 1 -->
                                                            <td></td>
                                                
                                                            <!-- LINHA 7 COLUNA 2 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 7 COLUNA 3 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 7 COLUNA 4 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 7 COLUNA 5 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 7 COLUNA 6 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 7 COLUNA 7 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 7 COLUNA 8 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>
                                                
                                                            <!-- LINHA 7 COLUNA 9 -->
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="item-skeleton"></div>
                                                                </div>
                                                            </td>

                                                            <td></td>
                                                
                                                        </tr>

                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Loading de processamento -->
                                <div class="content-loading"  ng-if="ctrl_contaspagar.busy && !ctrl_contaspagar.busyInicializacao">
                                    <div class="center-loading text-center">
                                        <div class="onloading"></div>
                                        {{ ctrl_contaspagar.busyMensagem }}
                                    </div>
                                </div>
                            </div>
                        </nsj-accordion>
                    </div>
                </div>
            </div>

            <!-- Prestadoras de Serviços Envolvidas -->
            <div class="row scroll-item">
                <div class="col-xs-12">
                    <div class="form-group" style="display:block">         
                    <!-- Accordion: Prestadoras de Serviços Envolvidas -->
                        <nsj-accordion 
                            ng-controller="CrmAtcsFornecedoresAccordionController as ctrl_accordionfornecedores" 
                            ng-inject="{entity:crm_tcs_cntrllr.entity, secaoctrl: crm_tcs_cntrllr.getSecaoCtrl('secao-prestadorasenvolvidas')}"
                            headline="Prestadoras de Serviços Envolvidas"
                            init-open
                            keep-open
                            class="accordion-atcs-fornecedores secao-scroll"
                            id="secao-prestadorasenvolvidas" >

                            <!-- Ação de atualizar accordion-->
                            <button slot="right" class="btn btn-default btn-md" ng-click="ctrl_accordionfornecedores.carregarListaFornecedoresDoAtc()" 
                                ng-disabled="ctrl_accordionfornecedores.busyInicializacao || ctrl_accordionfornecedores.busy">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                            
                            <!-- Mensagem sem dados -->
                            <div ng-if="(ctrl_accordionfornecedores.arrFornecedores.length == 0) && !ctrl_accordionfornecedores.busyInicializacao"
                                class="state-empty">

                                <div class="empty-list">
                                    <p class="text-center">
                                        Não existem prestadoras de serviços envolvidas para mostrar nesta lista.
                                    </p>
                                </div>
                            </div>
                            <!-- Loading de carregamento -->
                            <div class="content-loading" ng-if="ctrl_accordionfornecedores.isBusy() && !ctrl_accordionfornecedores.busyInicializacao">
                                <div class="center-loading text-center">
                                    <div class="onloading"></div>
                                    Carregando...
                                </div>
                            </div>
                            <!-- Loading de carregamento -->
                            <div class="skeleton-container" ng-if="ctrl_accordionfornecedores.busyInicializacao">
                                <div class="fornecedor-envolvido-skeleton-container">
                                    <div class="logo efeito-skeleton">
                                        <div class="imagem-fornecedor-container">
                                            <div class="icone-vazio-container">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="informacoes">
                                        <div class="grupo1">
                                            <div class="item-skeleton"></div>
                                            <div class="item-skeleton"></div>
                                            <div class="item-skeleton"></div>
                                        </div>
                                        <div class="grupo2">
                                            <div class="item-skeleton"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Lista de fornecedores -->
                            <div class="lista-fornecedores" ng-if="ctrl_accordionfornecedores.arrFornecedores.length > 0 && !ctrl_accordionfornecedores.busyInicializacao && !ctrl_accordionfornecedores.isBusy()">
                                
                                <!-- Informações dos fornecedores envolvidos -->
                                <div class="fornecedor" ng-repeat="fornecedor in ctrl_accordionfornecedores.arrFornecedores">
                                    <div class="dados-principais">
                                        <div class="logo">
                                            <div class="imagem-fornecedor-container">
                                                <div class="icone-vazio-container" ng-if="!fornecedor.path_logo">
                                                    <i class="fas fa-image icone-imagem-vazio" ></i>
                                                </div>
                                                <img class="img-fornecedor" ng-if="fornecedor.path_logo" 
                                                    ng-src="{{fornecedor.path_logo}}">
                                            </div>
                                            <div class="fornecedor-status" 
                                                ng-if="fornecedor.fornecedor_status != ctrl_accordionfornecedores.EnumFornecedorStatus.fsAtivo"
                                                ng-class="{
                                                    'fncd-suspenso': fornecedor.fornecedor_status == ctrl_accordionfornecedores.EnumFornecedorStatus.fsSuspenso, 
                                                    'fncd-banido': fornecedor.fornecedor_status == ctrl_accordionfornecedores.EnumFornecedorStatus.fsBanido
                                                }">

                                                <!-- Ícone fornecedor Suspenso -->
                                                <i class="fas fa-ban icone" 
                                                    ng-if="fornecedor.fornecedor_status == ctrl_accordionfornecedores.EnumFornecedorStatus.fsSuspenso"></i>
                                                <!-- Ícone fornecedor Banido 
                                                <i class="far fa-times-circle icone" 
                                                    ng-if="fornecedor.fornecedor_status == ctrl_accordionfornecedores.EnumFornecedorStatus.fsBanido"></i>-->
                                                <img ng-src="{{ctrl_accordionfornecedores.imgBanned}}" class="icone"
                                                    ng-if="fornecedor.fornecedor_status == ctrl_accordionfornecedores.EnumFornecedorStatus.fsBanido">
                                                <!-- Descrição do status do fornecedor -->
                                                <span>{{ ctrl_accordionfornecedores.getFornecedorStatusDescricao(fornecedor.fornecedor_status) }}</span>
                                            </div>
                                        </div>
                                        <div class="informacoes">
                                            <div class="info razao-social">
                                                <div class="titulo">Razão Social:</div>
                                                <div class="valor">{{ fornecedor.fornecedor_razaosocial }}</div>
                                            </div>
                                            <div class="info nome-fantasia">
                                                <div class="titulo">Nome Fantasia:</div>
                                                <div class="valor">{{ fornecedor.fornecedor_nomefantasia }}</div>
                                            </div>
                                            <div class="info cpf-cnpj">
                                                <div class="titulo">CNPJ/CPF:</div>
                                                <div class="valor">{{ fornecedor.fornecedor_cnpj }}</div>
                                            </div>

                                            <!-- Dados Bancários -->
                                            <div class="info" ng-if="!fornecedor.conta_todos_nulos">

                                                <!-- Banco -->
                                                <span ng-if="fornecedor.conta_banco">
                                                    <span class="titulo">Banco:</span>
                                                    <span class="valor">{{ fornecedor.conta_banco }}</span>
                                                </span>

                                                <!-- Agência -->
                                                <span ng-if="fornecedor.conta_agencianumero || fornecedor.conta_agenciadv" >
                                                    
                                                    <span class="titulo">Agência:</span>
                                                    <!-- Caso haja número da agência e dígito verificador da agência -->
                                                    <span ng-if="fornecedor.conta_agencianumero && fornecedor.conta_agenciadv">
                                                        <span class="valor" ng-if="fornecedor.conta_agenciadv">
                                                            {{ fornecedor.conta_agencianumero + '-' + fornecedor.conta_agenciadv }} 
                                                        </span>
                                                    </span>
    
                                                    <!-- Caso não haja dígito verificador na agência -->
                                                    <span class="valor" ng-if="!fornecedor.conta_agenciadv">
                                                        {{ fornecedor.conta_agencianumero }} 
                                                    </span>
                                                </span>

                                                <!-- Conta -->
                                                <span ng-if="fornecedor.conta_contanumero || fornecedor.conta_contadv">

                                                    <span class="titulo">Conta:</span>
                                                    <span class="valor" ng-if="fornecedor.conta_contanumero && fornecedor.conta_contadv">
                                                        {{ fornecedor.conta_contanumero + '-' + fornecedor.conta_contadv }}
                                                    </span>
                                                    <!-- Caso não haja dígito verificador na conta -->
                                                    <span class="valor" ng-if="!fornecedor.conta_contadv">
                                                        {{ fornecedor.conta_contanumero }}
                                                    </span>

                                                </span>

                                            </div>
                                            <div class="btn-ver-mais" ng-click="ctrl_accordionfornecedores.verMais(fornecedor)">
                                                {{ fornecedor.ver_mais_informacoes ? 'Veja menos' : 'Veja mais' }}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="dados-ver-mais" ng-if="fornecedor.ver_mais_informacoes">
                                        
                                        <!-- Dados do contato principal -->
                                        <div class="dados-container contato" ng-if="fornecedor.contatoPrincipal != null">
                                            <div class="icone">
                                                <div class="icone-container">
                                                    <i class="fas fa-address-book"></i>
                                                </div>
                                            </div>
                                            <div class="informacoes">

                                                <!-- Nome Contato principal -->
                                                <div class="info nome">
                                                    <div class="titulo">Contato principal:</div>
                                                    <div class="valor">{{ fornecedor.contatoPrincipal.nome }}</div>
                                                </div>

                                                <!-- Telefone principal contato principal -->
                                                <div class="info telefone" ng-if="fornecedor.contatoPrincipal.telPrincipal != null">
                                                    <div class="titulo">Telefone principal:</div>
                                                    <div class="valor">{{ fornecedor.contatoPrincipal.telPrincipal }}</div>
                                                </div>
                                                
                                                <!-- Outros telefones contato principal -->
                                                <div class="info telefone" ng-if="fornecedor.contatoPrincipal.outrosTelefones != null && fornecedor.contatoPrincipal.outrosTelefones.length > 0">
                                                    <div class="titulo">Outros telefones:</div>
                                                    <div class="valor" ng-repeat="telefone in fornecedor.contatoPrincipal.outrosTelefones">
                                                        {{ telefone.telcompleto }} <span ng-if="!$last"> | </span> 
                                                    </div>
                                                </div>

                                                <!-- Email contato principal -->
                                                <div class="info email" ng-if="fornecedor.contatoPrincipal.email != null">
                                                    <div class="titulo">E-mail:</div>
                                                    <div class="valor">{{ fornecedor.contatoPrincipal.email }}</div>
                                                </div>
                                                
                                                <!-- Botão para abrir modal de outros contatos -->
                                                <div class="info email" ng-if="fornecedor.outrosContatos.length > 0">
                                                    <button class="btn btn-default" ng-click="crm_tcs_cntrllr.abrirModalVisualizarMaisContatos(fornecedor.outrosContatos)">
                                                        <i class="fas fa-eye"></i>
                                                        Visualizar mais contatos
                                                    </button>
                                                </div>

                                            </div>
                                        </div>
                                        <div class="dados-container advertencia">
                                            <div class="icone">
                                                <div class="icone-container">
                                                    <i class="fas fa-bomb"></i>
                                                </div>
                                            </div>
                                            <div class="informacoes">
                                                <div class="info qtd-advertencia">
                                                    <div class="titulo">Quantidade de advertências:</div>
                                                    <div class="valor">{{ fornecedor.qtd_advertencia }}</div>
                                                </div>
                                                <div class="info ultima-advertencia">
                                                    <div class="titulo">Última advertência:</div>
                                                    <div class="valor">{{ ctrl_accordionfornecedores.getDataFormatada(fornecedor.data_ultima_advertencia) }}</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </nsj-accordion>
                    </div>
                </div>
            </div>

            <!-- Documentos Automáticos -->
            <div class="row scroll-item">
                <div class="col-xs-12">
                    <div class="form-group" style="display:block">
                        <nsj-accordion 
                            headline="Documentos Automáticos" 
                            init-open
                            keep-open
                            ng-controller="CrmAtcsDocumentosAutomaticosController as ctrl_docsautomaticos" 
                            ng-inject="{ entity: crm_tcs_cntrllr.entity, secaoctrl: crm_tcs_cntrllr.getSecaoCtrl('secao-docsautomaticos') }"
                            id="secao-docsautomaticos"
                            class="secao-scroll" >

                            <!-- Ação de atualizar accordion-->
                            <button slot="right" class="btn btn-default btn-md" ng-click="ctrl_docsautomaticos.carregarDadosTela()" 
                                ng-disabled="ctrl_docsautomaticos.busyInicializacao || ctrl_docsautomaticos.busy">
                                <i class="fas fa-sync-alt"></i>
                            </button>

                            <div ng-if="ctrl_docsautomaticos.inicializado" class="div-atcsdocumentosautomaticos form-loading-layout-wrapper-body">

                                <!-- Skeleton -->
                                <div class="skeleton-container" ng-if="ctrl_docsautomaticos.busyInicializacao">

                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="container-table">
                                                <table class="nsj-table table no-cell-border">
                                                    <thead class="header">
                                                        <!-- Primeira linha da tabela -->
                                                        <tr>
                                                            <th>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="coluna1">
                                                                        <div class="item-skeleton"></div>
                                                                    </div>
                                                                </div>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="coluna2 nivel1">
                                                                        <div class="item-skeleton"></div>
                                                                    </div>
                                                                </div>
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody class="corpo">
                                                        <!-- Segunda linha da tabela -->
                                                        <tr>
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="coluna1 nivel2">
                                                                        <div class="item-skeleton"></div>
                                                                    </div>
                                                                </div>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="coluna2 nivel2">
                                                                        <div class="item-skeleton"></div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <!-- Terceira linha da tabela -->
                                                        <tr>
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="coluna1 nivel3">
                                                                        <div class="item-skeleton"></div>
                                                                    </div>
                                                                </div>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="coluna2 nivel3">
                                                                        <div class="item-skeleton"></div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <!-- Quarta linha da tabela -->
                                                        <tr>
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="coluna1 nivel2">
                                                                        <div class="item-skeleton"></div>
                                                                    </div>
                                                                </div>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="coluna2 nivel2">
                                                                        <div class="item-skeleton"></div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <!-- Quinta linha da tabela -->
                                                        <tr>
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="coluna1 nivel3">
                                                                        <div class="item-skeleton"></div>
                                                                    </div>
                                                                </div>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="coluna2 nivel3">
                                                                        <div class="item-skeleton"></div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <!-- Sexta linha da tabela -->
                                                        <tr>
                                                            <th>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="coluna1">
                                                                        <div class="item-skeleton"></div>
                                                                    </div>
                                                                </div>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="coluna2 nivel1">
                                                                        <div class="item-skeleton"></div>
                                                                    </div>
                                                                </div>
                                                            </th>
                                                        </tr>
                                                        <!-- Sétima linha da tabela -->
                                                        <tr>
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="coluna1 nivel2">
                                                                        <div class="item-skeleton"></div>
                                                                    </div>
                                                                </div>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="coluna2 nivel2">
                                                                        <div class="item-skeleton"></div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <!-- Oitava linha da tabela -->
                                                        <tr>
                                                            <td>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="coluna1 nivel3">
                                                                        <div class="item-skeleton"></div>
                                                                    </div>
                                                                </div>
                                                                <div class="skeleton-dados-tabela">
                                                                    <div class="coluna2 nivel3">
                                                                        <div class="item-skeleton"></div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
    
                                </div>

                                <tree-grid ng-if="ctrl_docsautomaticos.dadosTreeEmCascata.length > 0 && (!ctrl_docsautomaticos.isBusyDocumentos() || ctrl_docsautomaticos.busyGeracaoDocumento)"
                                    tree-data="ctrl_docsautomaticos.dadosTreeEmCascata" 
                                    expand-on="ctrl_docsautomaticos.expanding_property" 
                                    tree-control="ctrl_docsautomaticos.treeDocsAutomaticos"
                                    col-defs="ctrl_docsautomaticos.col_defs" 
                                    sorted-asc="fas fa-sort-alpha-up-alt" 
                                    sorted-desc="fas fa-sort-alpha-down-alt" 
                                    icon-expand="fas fa-chevron-right" 
                                    icon-collapse="fas fa-chevron-down"
                                    expand-level="20">
                                </tree-grid>

                                <div ng-if="ctrl_docsautomaticos.dadosTreeEmCascata.length == 0 && !ctrl_docsautomaticos.isBusyDocumentos() && !ctrl_docsautomaticos.busyInicializacao"
                                    class="msg-sem-documentos dados-docsautomaticos">
                                    <div class="texto">Nenhum documento a exibir.</div>
                                </div>
                                <div class="content-loading" ng-if="ctrl_docsautomaticos.isBusyDocumentos() && !ctrl_docsautomaticos.busyInicializacao">
                                    <div class="center-loading text-center">
                                        <div class="onloading"></div>
                                        Carregando...
                                    </div>
                                </div>
                            </div>
                        </nsj-accordion>
                    </div>
                </div>
            </div>

            <!-- Atendimentos Relacionados -->
            <div class="row scroll-item">
                <div class="col-xs-12">
                    <div class="form-group" style="display:block">
                        <nsj-accordion init-open keep-open ng-controller="CrmAtcsRelacionadosController as ctrl_relacionados" 
                            ng-inject="{entity:crm_tcs_cntrllr.entity, secaoctrl: crm_tcs_cntrllr.getSecaoCtrl('secao-atcsrelacionados')}" headline="Atendimentos Relacionados"
                            id="secao-atcsrelacionados" class="secao-scroll">
                            
                            <!-- Ação de atualizar accordion-->
                            <nsj-button  
                                slot="right" icon="fas fa-sync-alt" 
                                class="btn-default" 
                                ng-class="{'loading': crm_tcs_cntrllr.btnBusy}" 
                                ng-disabled="ctrl_relacionados.isBusyNegRel() || crm_tcs_cntrllr.blockButtons || crm_tcs_cntrllr.btnBusy"  
                                ng-click="ctrl_relacionados.getAtcsFilhos()">
                            </nsj-button>
                            
                            <nsj-button tem-permissao="crm_atcs_create" slot="right" icon="fas fa-plus" class="btn-default" ng-class="{'loading': crm_tcs_cntrllr.btnBusy}" ng-disabled="ctrl_relacionados.isBusyNegRel() || crm_tcs_cntrllr.blockButtons || crm_tcs_cntrllr.btnBusy || crm_tcs_cntrllr.entity.status == 3 || crm_tcs_cntrllr.entity.status == 4"  ng-click="crm_tcs_cntrllr.irParaNovoAtcRelacionado()">
                            </nsj-button>

                            <!-- Skeleton Screen -->
                            <div class="list-group div-atcsdocumentos skeleton-container" ng-if="ctrl_relacionados.busyInicializacao">
                                <div class="list-group-item border-0 skeleton-dados">
                                    
                                    <div class="linha1">
                                        <div class="item-skeleton"></div>
                                        <div class="item-skeleton"></div>
                                    </div>

                                    <div class="linha2">
                                        <div class="item-skeleton"></div>
                                    </div>

                                    <div class="linha3">
                                        <div class="item-skeleton"></div>
                                    </div>

                                </div>
                            </div>

                            <div class="list-group div-atcsdocumentos" ng-if="!ctrl_relacionados.isBusyNegRel()">
                                <div class="list-group-item border-0 dados-atcsrelacionados" ng-repeat="atc in ctrl_relacionados.atcsfilhos">
                                    <h4 class="list-group-item-heading">
                                        <strong>
                                            #{{ atc.nome }} 
                                        </strong>
                                        <span ng-if="atc.status == '0'" class=" span-status-modal-geral"
                                            style="background-color: rgb(91, 192, 222);">
                                            Novo
                                        </span>
                                        <span ng-if="atc.status == '1'" class="span-status-modal-geral"
                                            style="background-color: rgb(119, 119, 119);">
                                            Em Atendimento
                                        </span>
                                        <span ng-if="atc.status == '2'" class="span-status-modal-geral"
                                            style="background-color: rgb(240, 173, 78);">
                                            Processando
                                        </span>
                                        <span ng-if="atc.status == '3'" class="span-status-modal-geral"
                                            style="background-color: rgb(92, 184, 92);">
                                            Finalizado
                                        </span>
                                        <span ng-if="atc.status == '4'" class="span-status-modal-geral"
                                            style="background-color: rgb(217, 83, 79);">
                                            Cancelado
                                        </span>
                                    </h4>
                                    <p class="list-group-item-text"><strong>Início:</strong>
                                        <span ng-bind="atc.datacriacao | asDate | date: 'dd/MM/yyyy' || 'Não informado.'"></span>
                                    </p>
                                    <p class="list-group-item-text"><strong>Última atualização:</strong>
                                        <span ng-bind="atc.dataedicao | asDate | date: 'dd/MM/yyyy' || 'Não informado.'"></span>
                                    </p>
                                </div>
                                <div ng-if="ctrl_relacionados.atcsfilhos.length == 0 && !ctrl_relacionados.isBusyNegRel()" class="state-empty dados-atcsrelacionados">
                                    <div class="empty-list">
                                        <p class="text-center">
                                            Não existem itens para mostrar nesta lista.
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <div class="content-loading" ng-if="ctrl_relacionados.isBusyNegRel() && !ctrl_relacionados.busyInicializacao">
                                <div class="center-loading text-center">
                                    <div class="onloading"></div>
                                    Carregando...
                                </div>
                            </div>                        
                        </nsj-accordion>
                    </div>
                </div>
            </div>

            <!-- Documentos -->
            <div class="row scroll-item">
                <div class="col-xs-12">
                    <div class="form-group" style="display:block">
                        <nsj-accordion init-open keep-open headline="Documentos" ng-controller="CrmAtcsDocumentosController as ctrl_documentos" 
                            ng-inject="{entity:crm_tcs_cntrllr.entity, secaoctrl: crm_tcs_cntrllr.getSecaoCtrl('secao-documentos')}"
                            id="secao-documentos" 
                            class="secao-scroll" 
                            ng-class="{
                                'form-loading-layout-wrapper-body': ctrl_documentos.isBusyDocumentos()
                            }"
                        >
                            <!-- Ações que ficam na barra do accordion-->

                            <!-- Ação de atualizar accordion-->
                            <nsj-button slot="right" icon="fas fa-sync-alt"
                                ng-disabled="ctrl_documentos.isBusyDocumentos() || ctrl_documentos.busyInicializacao"
                                ng-click="ctrl_documentos.carregarDados()">
                            </nsj-button>

                            <!-- Solicitar novo tipo de documento -->
                            <nsj-button slot="right" icon="fas fa-plus" color="warning"
                                ng-disabled="ctrl_documentos.isBusyDocumentos() || ctrl_documentos.busyInicializacao"
                                ng-class="{'loading': ctrl_documentos.isBusyDocumentos() || ctrl_documentos.busyInicializacao}"
                                ng-click="ctrl_documentos.onSolicitarNovoTipoDocumentoClick()">
                                Solicitar novo tipo de documento
                            </nsj-button>

                            <!-- Container da tela que só é apresentado após ela estar inicializada -->
                            <div class="nsj-form div-atcsdocumentos" ng-if="ctrl_documentos.inicializado">
                                <!-- Dropzone -->
                                <div class="container-dropzone">
                                    <ns-dropzone 
                                        add-file="ctrl_documentos.addFile(file)" error-file="ctrl_documentos.errorFile(response)" 
                                        model="ctrl_documentos.modelDropzone" options="ctrl_documentos.options" 
                                        remove-file="ctrl_documentos.removeFile(file)" success-file="ctrl_documentos.successFile(response)"
                                        ng-disabled="ctrl_documentos.isBusyDocumentos() || ctrl_documentos.busyInicializacao">
                                    </ns-dropzone>
                                </div>
                                <!-- Linha de escolha do tipo de documento -->
                                <div class="linha-escolha-tipo-documento">
                                    <!-- Select de tipos de documentos -->
                                    <div class="tipo-documento-container">
                                        <label class="lbl-form" for="tipodocumento">Tipo de Documento</label>
                                        <select class="form-control" id="tipodocumento" name="tipodocumento" 
                                            ng-model="ctrl_documentos.tipoDocumentoSelecionado" 
                                            ng-options="documentoTela.atctipodocumentorequisitante.tipodocumento.nome for documentoTela in ctrl_documentos.arrDocumentosTela track by documentoTela.atctipodocumentorequisitante.negociotipodocumentorequisitante"
                                            ng-disabled= "ctrl_documentos.arrDocumentosTela.length == 0 || ctrl_documentos.isBusyDocumentos() || ctrl_documentos.busyInicializacao"
                                            ng-change="ctrl_documentos.habilitarDesabilitarEnvio()">
                                            <option disabled select value="">Tipo de documento</option>
                                        </select>
                                    </div>
                                    <!-- Botão de enviar documento -->
                                    <nsj-button slot="right" 
                                        color="warning"    
                                        icon="fas fa-check" 
                                        class="btn-enviar"
                                        ng-disabled="!ctrl_documentos.isEnvioHabilitado() || ctrl_documentos.isBusyDocumentos() || ctrl_documentos.arrDocumentosTela.length < 1"
                                        ng-class="{'loading': ctrl_documentos.isBusyDocumentos() || ctrl_documentos.busyInicializacao}"
                                        ng-click="ctrl_documentos.onEnviarDocumento()">
                                        Enviar
                                    </nsj-button>
                                </div>
                                <!-- Tabela de documentos -->
                                <div class="row div-documentos" ng-if="!ctrl_documentos.busyInicializacao && !ctrl_documentos.isBusyDocumentos()">
                                    <nsj-objectlist 
                                        ng-prop-list="ctrl_documentos.arrDocumentosTela" 
                                        ng-prop-columns="ctrl_documentos.configuracaoObjList"
                                        ng-prop-config="ctrl_documentos.onConfigItemLista"
                                        max-info="5"
                                        view-mode="list"
                                    >
                                    </nsj-objectlist>
                                </div>
                                <!-- Esqueleto de carregamento -->
                                <div class="skeleton-container" ng-if="ctrl_documentos.busyInicializacao">
                                    <div class="skeleton-documento" ng-repeat="skeleton in ctrl_documentos.arrQtdSkeletons">
                                        <div class="grupo1">
                                            <div class="item-skeleton"></div>
                                        </div>
                                        <div class="grupo2">
                                            <div class="item-skeleton"></div>
                                            <div class="item-skeleton"></div>
                                            <div class="item-skeleton"></div>
                                            <div class="item-skeleton"></div>
                                            <div class="item-skeleton"></div>
                                        </div>
                                        <div class="grupo3">
                                            <div class="item-skeleton"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Loading de processamento -->
                            <div class="content-loading" ng-if="ctrl_documentos.isBusyDocumentos() && !ctrl_documentos.busyInicializacao">
                                <div class="center-loading text-center">
                                    <div class="onloading"></div>
                                    {{ ctrl_documentos.busyMensagem }}
                                </div>
                            </div>
                        </nsj-accordion>
                    </div>
                </div>
            </div>

            <!-- Contas a receber -->
            <div class="row scroll-item">
                <div class="col-xs-12">
                    <div class="form-group" style="display:block" ng-controller="CrmAtcsContratantesController as ctrl_tcs_cntrtnts_ctrl" 
                        ng-inject="{entity:crm_tcs_cntrllr.entity, secaoctrl: crm_tcs_cntrllr.getSecaoCtrl('secao-contasreceber')}">
                        <nsj-accordion init-open keep-open headline="Contas a Receber" class="accordion-contrato-mais-pagante secao-scroll"
                            id="secao-contasreceber">
                            
                            <!-- Ação de atualizar accordion-->
                            <nsj-button slot="right" icon="fas fa-sync-alt"
                                ng-disabled="ctrl_tcs_cntrtnts_ctrl.isbusyContratantes() || ctrl_tcs_cntrtnts_ctrl.busyInicializacao"
                                ng-click="ctrl_tcs_cntrtnts_ctrl.carregarDadosTela()">
                            </nsj-button>

                            <nsj-button class="hidden-sm hidden-md hidden-lg hidden-xl" slot="right" icon="fas fa-edit" ng-click="crm_tcs_cntrllr.abrirModalContratoMaisPagante()" ng-disabled="!ctrl_tcs_cntrtnts_ctrl.possuiOrcamentos || crm_tcs_cntrllr.blockButtons"></nsj-button>
                            <nsj-button class="hidden-xs" slot="right" icon="fas fa-edit" ng-click="crm_tcs_cntrllr.abrirModalContratoMaisPagante()" ng-disabled="!ctrl_tcs_cntrtnts_ctrl.possuiOrcamentos || ctrl_tcs_cntrtnts_ctrl.possuiOrcamentosAbertos || crm_tcs_cntrllr.blockButtons || crm_tcs_cntrllr.entity.status == 3 || crm_tcs_cntrllr.entity.status == 4"> Editar Responsabilidade Financeira</nsj-button>

                            <nsj-button slot="right" icon="fas fa-history" ng-if="false"></nsj-button> 

                            <div class="content-loading" ng-if="ctrl_tcs_cntrtnts_ctrl.isbusyContratantes() && !ctrl_tcs_cntrtnts_ctrl.busyInicializacao">
                                <div class="center-loading text-center">
                                <div class="onloading"></div>
                                Carregando...
                                </div>
                            </div>                        

                            <div ng-if="ctrl_tcs_cntrtnts_ctrl.arrContratantesTela.length == 0 && !ctrl_tcs_cntrtnts_ctrl.isbusyContratantes()">
                                <div>
                                    <p>Nenhum contratante a exibir.</p>
                                </div>
                            </div>

                            <div class="skeleton-container" ng-if="ctrl_tcs_cntrtnts_ctrl.busyInicializacao">

                                <!-- Informações totais -->
                                <div class="skeleton-informacoes-totais">
                                    <div class="linha1">
                                        <div class="item-skeleton"></div>
                                    </div>
                                    <div class="linha1">
                                        <div class="item-skeleton"></div>
                                    </div>
                                    <div class="linha1">
                                        <div class="item-skeleton"></div>
                                    </div>
                                </div>

                                <!-- Accordion -->
                                <div class="row mt-20">
                                    <div class="col-xs-12">
                                        <div class="form-group" style="display:block">
                                            <nsj-accordion init-open keep-open headline="">
                                                <div class="row">
                                                    <div class="col-md-8">
                                                        <div class="container-table">
                                                            <table class="nsj-table table no-cell-border">
                                                                <thead class="header">
                                                                    <!-- Primeira linha da tabela -->
                                                                    <tr>
                                                                        <th>
                                                                            <div class="skeleton-dados-tabela">
                                                                                <div class="linha1 coluna1">
                                                                                    <div class="item-skeleton"></div>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th class="text-right">
                                                                            <div class="skeleton-dados-tabela">
                                                                                <div class="linha1 coluna2">
                                                                                    <div class="item-skeleton"></div>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody class="corpo">
                                                                    <!-- Segunda linha da tabela -->
                                                                    <tr>
                                                                        <td>
                                                                            <div class="skeleton-dados-tabela">
                                                                                <div class="linha2 coluna1">
                                                                                    <div class="item-skeleton"></div>
                                                                                </div>
                                                                            </div>
                                                                        </td>
                                                                        <td class="text-right">
                                                                            <div class="skeleton-dados-tabela">
                                                                                <div class="linha2 coluna2">
                                                                                    <div class="item-skeleton"></div>
                                                                                </div>
                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                    <!-- Terceira linha da tabela -->
                                                                    <tr>
                                                                        <th>
                                                                            <div class="skeleton-dados-tabela">
                                                                                <div class="linha3 coluna1">
                                                                                    <div class="item-skeleton"></div>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th class="text-right">
                                                                            <div class="skeleton-dados-tabela">
                                                                                <div class="linha3 coluna2">
                                                                                    <div class="item-skeleton"></div>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </nsj-accordion>
                                        </div>
                                    </div>
                                </div>

                            </div> 

                            <div ng-if="ctrl_tcs_cntrtnts_ctrl.arrContratantesTela.length > 0">
                                
                                <!-- <div class="content-loading"  ng-if="ctrl_tcs_cntrtnts_ctrl.isbusyContratantes()">
                                        <div class="center-loading text-center">
                                        <div class="onloading"></div>
                                        Carregando...
                                        </div>
                                    </div> -->

                                    <div ng-if="!ctrl_tcs_cntrtnts_ctrl.isbusyContratantes()">

                                        <div class="row dados-contasreceber">
                                            <div class="col-md-4">
                                                <strong>Total a Faturar: <span ng-bind="(ctrl_tcs_cntrtnts_ctrl.totalAFaturar | currency : 'R$' : 2) || ' '"></span></strong>
                                            </div>
                                            <div class="col-md-4">
                                                <strong>Total Faturado: <span ng-bind="(ctrl_tcs_cntrtnts_ctrl.totalFaturado | currency : 'R$' : 2) || ' '"></span></strong>
                                            </div>
                                            <div class="col-md-4">
                                                <strong>Falta Faturar: <span ng-bind="(ctrl_tcs_cntrtnts_ctrl.totalNaoFaturado() | currency : 'R$' : 2) || ' '"></span></strong>
                                            </div>
                                        </div>

                                        <div class="row mt-20" ng-repeat="contratante in ctrl_tcs_cntrtnts_ctrl.arrContratantesTela">
                                            <div class="col-xs-12">
                                                <div class="form-group" style="display:block">
                                                    <nsj-accordion init-open headline="Contratante: {{contratante.nome}}">
                                                        <div class="row">
                                                            <div class="col-md-8">
                                                                <div class="container-table">
                                                                    <table class="nsj-table table no-cell-border dados-contasreceber">
                                                                        <thead class="header">
                                                                            <tr>
                                                                                <th><span>Serviços</span></th>
                                                                                <th class="text-right"><span>Valor a Receber</span></th> 
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody class="corpo">
                                                                            <tr ng-if="contratante.servicos.length === 0">
                                                                                <td colspan="2">Nenhum item nesta responsabilidade.</td>
                                                                            </tr>
                                                                            <tr ng-repeat="servico in contratante.servicos track by $index">
                                                                                <td><span ng-bind="servico.nome || ' '"></span></td>
                                                                                <td class="text-right"><span ng-bind="(servico.valor | currency : 'R$' : 2) || ' '"></span></td>
                                                                            </tr>
                                                                            <tr>
                                                                                <th><span>Total</span></th>
                                                                                <th class="text-right"><span ng-bind="(contratante.totalservicos | currency : 'R$' : 2) || ' '"></span></th>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-4 dados-contasreceber" ng-if="contratante.servicos.length > 0">
                                                                <div class="form-group" ng-if="!contratante.contratogerado">
                                                                    <label class="control-label" for="cliente">Forma de Pagamento</label>
                                                                    <nsj-lookup 
                                                                        name="formaspagamentos" 
                                                                        id-name="formapagamento" 
                                                                        factory="NsFormaspagamentos"
                                                                        ng-model="contratante.formapagamento"
                                                                        max-label="1" 
                                                                        constructor="{  }" 
                                                                        config='{ "descricao":"Forma de Pagamento",  }' 
                                                                        >
                                                                    </nsj-lookup>
                                                                                                </div>
                                                                <div class="form-group" ng-if="!contratante.contratogerado">
                                                                    <label class="control-label" for="cliente">Município de Prestação</label>
                                                                    <nsj-lookup 
                                                                        name="municipios"
                                                                        id-name="pessoamunicipio" 
                                                                        factory="ServicosPessoasmunicipios"
                                                                        ng-model="contratante.municipioprestacao" 
                                                                        max-label="1" 
                                                                        constructor="{ 'cliente' : ctrl_tcs_cntrtnts_ctrl.entity.cliente.cliente, }"
                                                                        config='{ "nome":"Município de Prestacao",  }' 
                                                                        >
                                                                    </nsj-lookup>

                                                                </div>
                                                                <div class="pull-right">
                                                                    <button type="button" name="submit"
                                                                        class="btn btn-success"
                                                                        ng-class="{loading: ctrl_tcs_cntrtnts_ctrl.isBusyBtn() && contratante.gerandocontrato}"
                                                                        ng-if="!contratante.contratogerado"
                                                                        ng-click="ctrl_tcs_cntrtnts_ctrl.gerarContrato(contratante)"
                                                                        ng-disabled="ctrl_tcs_cntrtnts_ctrl.formularioInvalido(contratante) || (ctrl_tcs_cntrtnts_ctrl.isBusyBtn() && contratante.gerandocontrato) ">
                                                                        <i class="fas fa-check" aria-hidden="true"></i>
                                                                        <span ng-if="contratante.geranotafiscal == true">Gerar Contrato com NF-S</span>
                                                                        <span ng-if="contratante.geranotafiscal == false">Gerar Contrato sem NF-S</span>
                                                                    </button>
                                                                </div>
                                                                <div class="pull-right">
                                                                    <button type="button" name="submit" class="btn btn-danger"
                                                                        ng-class="{loading: ctrl_tcs_cntrtnts_ctrl.isBusyBtn() && contratante.excluindocontrato}"
                                                                        ng-if="contratante.contratogerado"
                                                                        ng-click="ctrl_tcs_cntrtnts_ctrl.excluirContrato(contratante)"
                                                                        ng-disabled="ctrl_tcs_cntrtnts_ctrl.isBusyBtn() && contratante.excluindocontrato">
                                                                        <i class="fas fa-times" aria-hidden="true"></i>
                                                                        <span ng-if="contratante.geranotafiscal == true">Excluir Contrato com NF-S</span>
                                                                        <span ng-if="contratante.geranotafiscal == false">Excluir Contrato sem NF-S</span>
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </nsj-accordion>
                                                </div>
                                            </div>
                                        </div>

                                    </div>                                    
                                </div>
                            </div>
                        </nsj-accordion>
                    </div>
            </div>
                    
            <!-- Projetos -->
            <div class="row scroll-item">
                <div class="col-sm-12">
                    <nsj-accordion init-open keep-open ng-controller="CrmAtcsProjetoAccordionController as ctrl_projeto_accrdn" headline="Projeto"
                        ng-inject="{entity:crm_tcs_cntrllr.entity, secaoctrl: crm_tcs_cntrllr.getSecaoCtrl('secao-projetos')}"
                        id="secao-projetos" class="secao-scroll form-group">
                        <nsj-label slot="right" class="label" ng-class="ctrl_projeto_accrdn.labelClass" ng-bind="ctrl_projeto_accrdn.verificaStatus()"></nsj-label>
                        <div ng-if="crm_tcs_cntrllr.entity.projeto">
                            <p>Este atendimento está associado ao Projeto 
                                <strong>
                                    <a ng-bind="crm_tcs_cntrllr.entity.projeto.nome || 'Não informado'" href="{{ctrl_projeto_accrdn.urlProjeto}}" target="_blank" class="link-projeto-gp"></a>
                                </strong>.
                            </p>
                            <p>
                                Projeto liberado por
                                <span> <strong>{{crm_tcs_cntrllr.parseCreatedBy(crm_tcs_cntrllr.entity.projeto.created_by)}}</strong> em </span>
                                <span ng-bind="(crm_tcs_cntrllr.entity.projeto.created_at | asDate | date: 'dd/MM/yyyy HH:mm') || 'Não informado'"></span>.
                            </p>
                        </div>

                        <div ng-if="!(crm_tcs_cntrllr.entity.projeto)">
                            <p>Este atendimento não está associado a um Projeto.</p>
                        </div>    
                    </nsj-accordion>
                </div>
            </div>

        </div>

    </div>
</div>

<!-- {# html para criar navegação por indicadores da pagina como em carousel #}
{# <div style=" display: flex; flex-direction: column; justify-content: center;height:-webkit-fill-available; width:5%;">
    <ol class="carousel-indicators" style="display: flex; flex-direction: column;">
        <li ng-repeat="li in crm_tcs_cntrllr.listofaccordion" 
            ng-click="crm_tcs_cntrllr.indicador($index)"  
            ng-class="{'active' : crm_tcs_cntrllr.selectedIndex == $index}"></li>
    </ol>
</div> #} -->