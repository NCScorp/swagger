<?xml version="1.0" encoding="UTF-8"?>
<nsjusecase xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../../schemas/nsjusecase.xsd" name="followups" label="followups" project="atendimento/admin" >
    <entity schema="ns" table="followups">
        <fieldmodel name="followup" datatype="guid" isid="true" column="followup" />
        <fieldmodel name="atendimento" datatype="guid" column="atendimento" />
        <fieldmodel name="created_at" datatype="date" column="data" />
        <fieldmodel name="tipo" datatype="integer" column="tipo" />
        <fieldmodel name="created_by" datatype="json" column="created_by" />
        <fieldmodel name="historico" datatype="string" column="historico" />
        <fieldmodel name="resumo" datatype="string" column="resumo" />
        <fieldmodel name="cliente" datatype="string" column="participante" />
        <fieldmodel name="criador" datatype="boolean" column="criadopelocliente" />
        <fieldmodel name="tenant" datatype="integer" column="tenant" />
        <fieldmodel name="canal" datatype="string" column="canal"/>
        <fieldmodel name="anexos" datatype="objectlist" column="atendimento" useCaseLink="ns\documentosged" notMapped="true" />
        <fieldmodel name="artigo" datatype="guid" column="artigo" />
        <fieldmodel name="conteudo_textual" datatype="string" column="conteudo_textual" notMapped="true" />
        <fieldmodel name="copiaoculta" datatype="string" notMapped="true" />
    </entity>
    <constructors>
        <constructoritem required="true">tenant</constructoritem>
        <constructoritem required="true">atendimento</constructoritem>
    </constructors>
    <viewbrowser paginate="false" layout="list">
        <fieldsbrowser>
            <fieldbrowser alias="followup" entitylink="followup" isid="true" />
            <fieldbrowser alias="Data de criação" entitylink="created_at" width="20" unique="true" indefaultorder="true" direction="desc" cansearch="false" visible="true" avaliable="true" />
            <fieldbrowser alias="Responsável" entitylink="created_by" width="80" cansearch="false" visible="true" avaliable="true" />
            <fieldbrowser alias="historico" entitylink="historico" width="80" cansearch="false" visible="true" avaliable="true" />
            <fieldbrowser alias="tipo" entitylink="tipo" width="80" cansearch="false" visible="true" avaliable="true" />
            <fieldbrowser alias="criador" entitylink="criador" width="80" cansearch="false" visible="true" avaliable="true" />
            <fieldbrowser alias="artigo" entitylink="artigo" width="80" cansearch="false" visible="true" avaliable="true" />
        </fieldsbrowser>
    </viewbrowser>
    <viewedit>
        <layout>
            <headerform>
                <row>
                    <cell colspan="12" name="tipo" controltype="combobox" entitylink="tipo">
                        <validates>
                            <validate type="vnull" displaytext="O campo tipo não pode ser vazio."/>
                        </validates>
                        <itenscombobox type="json">{'1':'Comentário', '0':'Resposta'}</itenscombobox>
                    </cell>
                </row>
                <row>
                    <cell colspan="12" name="historico" controltype="wysiwyg" entitylink="historico">
                        <validates>
                            <validate type="vnull" displaytext="O campo historico não pode ser vazio."/>
                        </validates>
                    </cell>
                </row>
            </headerform>
        </layout>
    </viewedit>
    <actions>
        <action>
            <name>insert</name>
            <api>
                <name>FollowupAtendimentoNovo_V3</name>
                <fromto valueapi="atendimento" valueentity="atendimento" />
                <fromto valueapi="historico" valueentity="historico" />
                <fromto valueapi="resumo" valueentity="resumo" />
                <fromto valueapi="created_by" valueentity="logged_user" />
                <fromto valueapi="participante" valueentity="cliente" />
                <fromto valueapi="tipo" valueentity="tipo" />
                <fromto valueapi="tenant" valueentity="tenant" />
                <fromto valueapi="canal" valueentity="canal" />
                <fromto valueapi="artigo" valueentity="artigo" />
                <fromto valueapi="conteudo_textual" valueentity="conteudo_textual" />
            </api>
        </action>
    </actions>
</nsjusecase>