<div style="padding: 0px 40px 20px 40px;">
    <h3>Visita</h3>
    <div class="row">
        <div class="col-sm-3">
            <div class="form-group">
                <label class="control-label">Data</label>
                <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao==0">
                    {#{{ form_widget(form.visitas.vars.prototype.datavisita, {
                    'attr': { 'ng-model': 'srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].datavisita',
                    'ng-change': 'srvcs_rdns_srvc_frm_cntrllr.saveVisita(visitaindex)' } })
                    }}#}
                </div>
                <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao!=0">{{'{{srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].datavisita | date: "dd/MM/yyyy"}}' }}</div>
            </div>
        </div>
        <div class="col-sm-3" ng-if="srvcs_rdns_srvc_frm_cntrllr.context.estimativadehoras">
            <div class="form-group">
                <label class="control-label">Inicio</label>
                <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao==0">
{#                    {{ form_widget(form.visitas.vars.prototype.hora_estimada_inicio, {'attr': { 'ui-mask':'99:99:99', 'ng-model': 'srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].hora_estimada_inicio', 'ng-change': 'srvcs_rdns_srvc_frm_cntrllr.saveVisita(visitaindex)' } }) }}</div>#}
                <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao!=0">{{'{{srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].hora_estimada_inicio}}'}}</div>
            </div>
        </div>
        <div class="col-sm-3" ng-if="srvcs_rdns_srvc_frm_cntrllr.context.estimativadehoras">
            <div class="form-group">
                <label class="control-label">Término</label>
{#                <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao==0">{{ form_widget(form.visitas.vars.prototype.hora_estimada_fim, {'attr': { 'ui-mask':'99:99:99', 'ng-model': 'srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].hora_estimada_fim', 'ng-change': 'srvcs_rdns_srvc_frm_cntrllr.saveVisita(visitaindex)' }}) }}</div>#}
{#                <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao!=0">{{'{{srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].hora_estimada_fim}}'}}</div>#}
            </div>
        </div>
        <div class="col-sm-3">
            <div class="form-group">
                <label class="control-label">Consecutiva</label>
{#                <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao==0">{{ form_widget(form.visitas.vars.prototype.atendimento_consecutivo, {'attr': { 'ng-model': 'srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].atendimento_consecutivo', 'ng-change': 'srvcs_rdns_srvc_frm_cntrllr.saveVisita(visitaindex)'} }) }} Marque caso seja consecutiva</div>#}
                <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao!=0">{{'{{srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].atendimento_consecutivo?"Sim":"Não"}}'}}</div>
            </div>
        </div>
    </div>



    <div lass="row">
        <div ng-init="srvcs_rdns_srvc_frm_cntrllr.loadTecnicos(visitaindex)">
            <h4>Técnico(s)</h4>
            <table class="table table-hover table-bordered table-condensed servicos-visitas-tecnicos">
                <tbody>
                    <tr ng-repeat="tc in srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].tecnicos track by $index">
                        <td class="text-center">
                <mda-ui-select
                    service="NsTecnico"
                    constructors="{  }"
                    opts='{ "attr" : { "ng-model" : "tc.tecnico", "ng-disabled" : "(srvcs_rdns_srvc_frm_cntrllr.entity.situacao!=0)", "ng-change" : "srvcs_rdns_srvc_frm_cntrllr.saveTecnico(visitaindex,$index)", "placeholder" : "",  } , "required" : false, "match" : "nome" }'
                    fields='["nome"]'>
                </mda-ui-select>
                </td>
                <td class="text-center" width="40">
                    <a ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao==0" href class="btn btn-danger btns-acoes" ng-click="srvcs_rdns_srvc_frm_cntrllr.removeTecnico(visitaindex,$index)" title="Excluir serviço"><i class="el el-remove"></i></a>
                </td>
                </tr>
                </tbody>
                <tfoot ng-if="(srvcs_rdns_srvc_frm_cntrllr.entity.situacao==0)">
                    <tr>
                        <th colspan="4"><a href ng-click="srvcs_rdns_srvc_frm_cntrllr.addTecnico(visitaindex)">Adicionar Usuário</a></th>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>



    <h3 ng-if="srvcs_rdns_srvc_frm_cntrllr.context.saidaparacliente &AMP;&AMP; srvcs_rdns_srvc_frm_cntrllr.context.chegadanocliente &AMP;&AMP; srvcs_rdns_srvc_frm_cntrllr.context.saidaparacliente">Dados Adicionais</h3>

    <fieldset ng-if="srvcs_rdns_srvc_frm_cntrllr.context.saidaparacliente">
        <legend><h4>Saída para atendimento</h4></legend>
        <div class="row">
            <div class="col-md-8">
                <div class="form-group">
                    <label class="control-label">Local</label>
                    <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao==0">
                        {#{{ form_widget(form.visitas.vars.prototype.origem_saida, {
                    'attr': { 'ng-model': 'srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].origem_saida',
                    'ng-change': 'srvcs_rdns_srvc_frm_cntrllr.saveVisita(visitaindex)' }
                    })
                        }}#}
                    </div>
                    <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao!=0">{{'{{srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].origem_saida}}'}}</div>
                </div>
            </div>
            <div class="col-md-2">
                <div class="form-group">
                    <label class="control-label">Hora</label>
                    <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao==0">
                        {#{{ form_widget(form.visitas.vars.prototype.hora_saida, {
                    'attr': { 'ng-model': 'srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].hora_saida',
                    'ui-mask':'99:99:99',
                    'ng-change': 'srvcs_rdns_srvc_frm_cntrllr.saveVisita(visitaindex)' }
                    })
                        }}#}
                    </div>
                    <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao!=0">{{'{{srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].hora_saida}}'}}</div>
                </div>
            </div>
            <div class="col-md-2">
                <div class="form-group">
                    <label class="control-label">Km</label>
                    <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao==0">
                        {#{{ form_widget(form.visitas.vars.prototype.km_saida, {
                    'attr': { 'ng-model': 'srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].km_saida',
                    'ng-change': 'srvcs_rdns_srvc_frm_cntrllr.saveVisita(visitaindex)' }
                    })
                        }}#}
                    </div>
                    <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao!=0">{{'{{srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].km_saida}}'}}</div>
                </div>
            </div>
        </div>
    </fieldset>
    <div class="row">
        <div class="col-md-6" ng-if="srvcs_rdns_srvc_frm_cntrllr.context.chegadanocliente">
            <fieldset>
                <legend><h4>Chegada no cliente</h4></legend>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="control-label">Hora</label>
                            <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao==0">
                                {#{{ form_widget(form.visitas.vars.prototype.hora_chegada_cliente, {
                    'attr': { 'ng-model': 'srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].hora_chegada_cliente',
                    'ui-mask':'99:99:99',
                    'ng-change': 'srvcs_rdns_srvc_frm_cntrllr.saveVisita(visitaindex)' }
                        })
                                }}#}
                            </div>
                            <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao!=0">{{'{{srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].hora_chegada_cliente}}'}}</div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="control-label">KM</label>
                            <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao==0">
                                {#{{ form_widget(form.visitas.vars.prototype.km_chegada_cliente,{
                        'attr': { 'ng-model': 'srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].km_chegada_cliente',
                        'ng-change': 'srvcs_rdns_srvc_frm_cntrllr.saveVisita(visitaindex)' }
                        })
                                }}#}
                            </div>
                            <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao!=0">{{'{{srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].km_chegada_cliente}}'}}</div>
                        </div>
                    </div>
                </div>
            </fieldset>
        </div>
        <div class="col-md-6" ng-if="srvcs_rdns_srvc_frm_cntrllr.context.saidaparacliente">
            <fieldset>
                <legend><h4>Saída do cliente</h4></legend>
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label class="control-label">Hora</label>
                            <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao==0">
                                {#{{ form_widget(form.visitas.vars.prototype.hora_saida_cliente, {
                        'attr': { 'ng-model': 'srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].hora_saida_cliente',
                        'ui-mask':'99:99:99',
                        'ng-change': 'srvcs_rdns_srvc_frm_cntrllr.saveVisita(visitaindex)' }
                        })
                                }}#}
                            </div>
                            <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao!=0">{{'{{srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].hora_saida_cliente}}'}}</div>
                        </div>
                    </div>
                </div>
            </fieldset>
        </div>
    </div>

    <div class="headline-sub" ng-if="srvcs_rdns_srvc_frm_cntrllr.context.deslocamentoextra"><h3>Deslocamento Extra</h3></div>
    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label class="control-label">Hora Saída</label>
                <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao==0">
                    {#{{ form_widget(form.visitas.vars.prototype.hora_saida_deslocamento,{
                  'attr': { 'ng-model': 'srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].hora_saida_deslocamento',
                       'ui-mask':'99:99:99',
                      'ng-change': 'srvcs_rdns_srvc_frm_cntrllr.saveVisita(visitaindex)' }
                  })
                    }}#}
                </div>
                <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao!=0">{{'{{srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].hora_saida_deslocamento}}'}}</div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label class="control-label">KM Saída</label>
                <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao==0">
                   {# {{ form_widget(form.visitas.vars.prototype.km_saida_deslocamento,{
                'attr': { 'ng-model': 'srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].km_saida_deslocamento',
                          'ng-change': 'srvcs_rdns_srvc_frm_cntrllr.saveVisita(visitaindex)' }
                })
                    }}#}
                </div>
                <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao!=0">{{'{{srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].km_saida_deslocamento}}'}}</div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label class="control-label">Hora Chegada</label>
                <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao==0">
                    {#{{ form_widget(form.visitas.vars.prototype.hora_chegada_deslocamento,{
                'attr': { 'ng-model': 'srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].hora_chegada_deslocamento',
                          'ui-mask':'99:99:99',
                          'ng-change': 'srvcs_rdns_srvc_frm_cntrllr.saveVisita(visitaindex)' }
                })
                    }}#}
                </div>
                <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao!=0">{{'{{srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].hora_chegada_deslocamento}}'}}</div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label class="control-label">KM Chegada</label>
                <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao==0">
                    {#{{ form_widget(form.visitas.vars.prototype.km_chegada_deslocamento,{
                'attr': { 'ng-model': 'srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].km_chegada_deslocamento',
                          'ng-change': 'srvcs_rdns_srvc_frm_cntrllr.saveVisita(visitaindex)' }
                })
                    }}#}
                </div>
                <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao!=0">{{'{{srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].km_chegada_deslocamento}}'}}</div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="form-group">
                <label class="control-label">Motivo Deslocamento</label>
                <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao==0">
                    {#{{ form_widget(form.visitas.vars.prototype.motivo_deslocamento,{
                'attr': { 'ng-model': 'srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].motivo_deslocamento',
                'ng-change': 'srvcs_rdns_srvc_frm_cntrllr.saveVisita(visitaindex)' }
                })
                    }}#}
                </div>
                <div ng-if="srvcs_rdns_srvc_frm_cntrllr.entity.situacao!=0">{{'{{srvcs_rdns_srvc_frm_cntrllr.entity.visitas[visitaindex].motivo_deslocamento}}'}}</div>
            </div>
        </div>
    </div>


    <div class="row">
        <div class="col-md-12 text-right">
            <a class="btn btn-default" ng-click="srvcs_rdns_srvc_frm_cntrllr.modalVisita.close()">Fechar e salvar</a>
        </div>
    </div>

</div>
