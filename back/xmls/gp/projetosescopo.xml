<?xml version="1.0" encoding="UTF-8"?>
<nsjusecase xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../schemas/nsjusecase.xsd" name="projetosescopo" label="projetosescopo" project="gp" orphan="false" >
    <entity schema="gp" table="vw_projetosescopo_v2">
        <fieldmodel column="projetoescopo" datatype="guid" isid="true" name="projetoescopo" />
        <fieldmodel column="projeto" datatype="guid" name="projeto" useCaseLink="financas\projetos" entityJoinType="inner" />
        <fieldmodel column="atividade" datatype="guid" name="atividade" notMapped="true" />
        <fieldmodel column="pai" datatype="guid" name="pai" useCaseLink="gp\projetosescopo" entityJoinType="left" />
        <fieldmodel column="numero" datatype="string" name="numero" />
        <fieldmodel column="execucoes" datatype="integer" name="execucoes" />
        <fieldmodel column="datainicio" datatype="date" name="datainicio" />
        <fieldmodel column="datafim" datatype="date" name="datafim" />
        <fieldmodel column="previsaoinicio" datatype="date" name="previsaoinicio" />
        <fieldmodel column="previsaofim" datatype="date" name="previsaofim" />
        <fieldmodel column="atividade_codigo" datatype="string" name="atividade_codigo" />
        <fieldmodel column="atividade_descricao" datatype="string" name="atividade_descricao" />
        <fieldmodel column="atividade_tipo" datatype="integer" name="atividade_tipo" />
        <fieldmodel column="atividade_setor" datatype="guid" name="atividade_setor" />
        <fieldmodel column="atividade_funcao" datatype="guid" name="atividade_funcao" />
        <fieldmodel column="atividade_recurso" datatype="guid" name="atividade_recurso" />
        <!-- <fieldmodel column="atividade_unidadeproduto" datatype="guid" name="atividade_unidadeproduto" useCaseLink="estoque\unidade" entityJoinType="left" /> -->
        <fieldmodel column="tenant" datatype="integer" name="tenant" />
        <fieldmodel column="created_at" datatype="datetime" name="created_at" />
        <fieldmodel column="created_by" datatype="json" name="created_by" />
        <fieldmodel column="updated_at" datatype="datetime" name="updated_at" optimistLock="true" />
        <fieldmodel column="updated_by" datatype="json" name="updated_by" />
        <fieldmodel column="grupoinventario" datatype="integer" name="grupoinventario" />
        <fieldmodel column="servicoid" datatype="guid" name="servicoid" />
        <fieldmodel column="custoproduto" datatype="float" name="custoproduto" />
        <fieldmodel column="custoindireto" datatype="float" name="custoindireto" />
        <fieldmodel column="jnss" datatype="float" name="jnss" />
        <fieldmodel column="situacao" datatype="integer" name="situacao" />
        <fieldmodel column="roteirolinha" datatype="guid" name="roteirolinha" notMapped="true" />
        <fieldmodel column="roteiro" datatype="boolean" name="roteiro" />
        <fieldmodel column="descricaoroteiro" datatype="string" name="descricaoroteiro" />
        <fieldmodel column="execucoesoriginais" datatype="integer" name="execucoesoriginais" />
        <fieldmodel column="link" datatype="guid" name="link" />
        <fieldmodel name="filhos" datatype="objectlist" column="projetoescopo" useCaseLink="gp\projetosescopo" notMapped="true" />
        <fieldmodel column="recursosstr" datatype="string" name="recursosstr" />
        <fieldmodel column="situacaostr" datatype="string" name="situacaostr" />
        <fieldmodel column="custo_execucao" datatype="integer" name="custo_execucao" />
        <fieldmodel column="custo_execucao_horas" datatype="integer" name="custo_execucao_horas" />
        <fieldmodel column="custo_execucao_minutos" datatype="integer" name="custo_execucao_minutos" />
        <fieldmodel column="associarroteiro" datatype="boolean" name="associarroteiro" />
        <!-- <fieldmodel name="dependencias" datatype="objectlist" column="projetoescopo" useCaseLink="gp\projetosescopodependencias" /> -->
        <fieldmodel column="dependenciasstr" datatype="string" name="dependenciasstr" />
        <fieldmodel column="ordem" datatype="integer" name="ordem" />
        <fieldmodel column="tipo" datatype="integer" name="tipo" />
        <fieldmodel column="descricao" datatype="string" name="descricao" />
        <fieldmodel column="istarefa" datatype="boolean" name="istarefa" />
        <fieldmodel column="numerotarefa" datatype="string" name="numerotarefa" />
        <fieldmodel column="situacaotarefa" datatype="integer" name="situacaotarefa" />
        <fieldmodel column="alocadomanualmente" datatype="boolean" name="alocadomanualmente" />
        <!-- <fieldmodel column="projetoalocacaousuario" datatype="guid" name="projetoalocacaousuario" useCaseLink="gp\projetosalocacaousuarios" entityJoinType="left" /> -->
        <fieldmodel column="tempoadquirido" datatype="integer" name="tempoadquirido" />
        <fieldmodel column="tempoadquirido_horas" datatype="integer" name="tempoadquirido_horas" />
        <fieldmodel column="tempoadquirido_minutos" datatype="integer" name="tempoadquirido_minutos" />
        <fieldmodel column="temporealizado" datatype="integer" name="temporealizado" />
        <fieldmodel column="temporealizadostr" datatype="string" name="temporealizadostr" />
        <fieldmodel column="saldohoras" datatype="integer" name="saldohoras" />
        <fieldmodel column="saldohorasstr" datatype="string" name="saldohorasstr" />
        <fieldmodel column="pertencearoteiro" datatype="boolean" name="pertencearoteiro" />
        <fieldmodel column="execucoesroteiroescopo" datatype="integer" name="execucoesroteiroescopo" />
    </entity>
    <constructors>
        <constructoritem required="true">projeto</constructoritem>
        <constructoritem required="true">tenant</constructoritem>
    </constructors>    
    <viewbrowser label="Escopo do Projeto" layout="list" paginate="false" target="builtin" >
        <fieldsbrowser>
        </fieldsbrowser>
    </viewbrowser>
    <actions>
        <action layer="back">
            <name>insert</name>
            <api>
                <name>projetosescoponovo_v2</name>
                <fromto valueapi="projetoescopo" valueentity="projetoescopo" />
                <fromto valueapi="projeto" valueentity="projeto" />
                <fromto valueapi="atividade" valueentity="atividade" />
                <fromto valueapi="pai" valueentity="pai" />
                <fromto valueapi="created_by" valueentity="logged_user" />
                <fromto valueapi="tenant" valueentity="tenant"/>
                <fromto valueapi="numero" valueentity="numero"/>
                <fromto valueapi="execucoes" valueentity="execucoes"/>
                <fromto valueapi="roteiro" valueentity="roteiro"/>
                <fromto valueapi="servicoid" valueentity="servicoid"/>
                <fromto valueapi="previsaoinicio" valueentity="previsaoinicio"/>
                <fromto valueapi="previsaofim" valueentity="previsaofim"/>
                <fromto valueapi="descricaoroteiro" valueentity="descricaoroteiro"/>
                <fromto valueapi="custo_execucao" valueentity="custo_execucao"/>
                <fromto valueapi="associarroteiro" valueentity="associarroteiro"/>
                <fromto valueapi="roteirolinha" valueentity="roteirolinha"/>
                <fromto valueapi="ordem" valueentity="ordem"/>
                <fromto valueapi="tipo" valueentity="tipo"/>
                <fromto valueapi="descricao" valueentity="descricao"/>
                <fromto valueapi="tempoadquirido" valueentity="tempoadquirido"/>
                <fromto valueapi="pertencearoteiro" valueentity="pertencearoteiro"/>
                <fromto valueapi="execucoesroteiroescopo" valueentity="execucoesroteiroescopo"/>
                <fromto valueapi="datainicio" valueentity="datainicio"/>
                <fromto valueapi="datafim" valueentity="datafim"/>
                <!-- <fromto valueapi="dependencias" valueentity="dependencias"/> Não é realmente parametro para a API, mas sim uma forma de informar a tela para salvar o objectlist quando a entidade principal for salva -->
            </api>
        </action>
    </actions>
</nsjusecase>
