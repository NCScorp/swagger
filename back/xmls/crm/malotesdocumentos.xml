<?xml version="1.0" encoding="UTF-8"?>
<nsjusecase xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../vendor/nasajon/mdatransformer/schemas/nsjusecase.xsd" name="malotesdocumentos" label="malotesdocumentos" project="crm">
  <entity schema="crm" table="malotesdocumentos">
    <fieldmodel name="malotedocumento" datatype="guid" isid="true" column="malotedocumento"/>
    <fieldmodel name="malote" datatype="guid" column="malote" useCaseLink="crm\malotes" entityJoinType="left"/>
    <fieldmodel name="documento" datatype="guid" column="documento" useCaseLink="crm\atcsdocumentos" entityJoinType="left" />
    <fieldmodel name="tenant" datatype="integer" column="tenant"/>
    <fieldmodel name="created_at" datatype="datetime" column="created_at"/>
    <fieldmodel name="created_by" datatype="json" column="created_by"/>
    <fieldmodel name="updated_at" datatype="datetime" column="updated_at"/>
    <fieldmodel name="updated_by" datatype="json" column="updated_by"/>
    <fieldmodel name="id_grupoempresarial" column="grupoempresarial" datatype="guid"/>
  </entity>
  <constructors>
    <constructoritem>tenant</constructoritem>
    <constructoritem>malote</constructoritem>
    <constructoritem>id_grupoempresarial</constructoritem>
  </constructors>
  <viewbrowser label="Documentos" layout="table" paginate="true" target="inline">
    <fieldsbrowser>     
      <fieldbrowser entitylink="malotedocumento" isid="true" visible="false"/>
      <fieldbrowser alias="malote" entitylink="malote" isid="false" visible="false"/>
      <fieldbrowser alias="documento" entitylink="documento" isid="false" visible="true" fielddetaillookup="{'negociodocumento':'documento'}"/>
    </fieldsbrowser>
  </viewbrowser>
  <forms>
    <form name="default">
        <layout>
            <headerform>
                <row>
                    <cell controltype="textedit" colspan="6" entitylink="malotedocumento"/>
                </row>
                <row>        
                  <cell label="Documento" entitylink="documento" controltype="lookup" colspan="12" fielddetaillookup="{'negociodocumento':'documento'}">
                  </cell>
                </row>
                <!-- <row>
                    <cell label="Malote" entitylink="malote" controltype="lookup" colspan="12" fielddetaillookup="{'malote':'malote'}" />
                </row> -->
            </headerform>
        </layout>
    </form>
  </forms>
  <actions>
      <action>
          <name>retrieve</name>
      </action>
      <action>
          <name>Insert</name>
          <api>
              <name>malotedocumentonovo_v2</name>
              <fromto valueapi="malote" valueentity="malote"/>
              <fromto valueapi="negociodocumento" valueentity="documento"/>
              <fromto valueapi="created_by" valueentity="logged_user" />
              <fromto valueapi="tenant" valueentity="tenant"/>
              <fromto valueapi="grupoempresarial" valueentity="id_grupoempresarial" />
          </api>
      </action>
      <action>
        <name>Delete</name>
        <api>
            <name>malotedocumentoexcluir_v2</name>
            <fromto valueapi="malotedocumento" valueentity="malotedocumento"/>
            <fromto valueapi="tenant" valueentity="tenant"/>
            <fromto valueapi="grupoempresarial" valueentity="id_grupoempresarial" />
        </api>
      </action>
      <action>
        <name>Update</name>
      </action>
    </actions>
</nsjusecase>