<?xml version="1.0" encoding="UTF-8"?>
<nsjusecase xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../vendor/nasajon/mdatransformer/schemas/nsjusecase.xsd" name="prioridades" label="prioridades" project="ns">
  <entity schema="ns" table="prioridades">
    <fieldmodel name="prioridade" datatype="guid" isid="true" column="prioridade"/>
    <fieldmodel name="tenant" datatype="integer"  column="tenant"/>
    <fieldmodel name="nome" datatype="string"  column="nome"/>
    <fieldmodel name="cor" datatype="string"  column="cor">
      <options>
        {"#CA0813":"Vermelho","#FC571F":"Laranja", "#FD9827":"Abóbora", "#FEE433":"Amarelo", "#85E42B":"Verde Claro", 
        "#1FCA5D":"Verde", "#23CFFD":"Azul Claro", "#165AF1":"Azul", 
        "#8E1ED3":"Roxo", "#E41AAB":"Rosa", "#1D1D1D":"Preto", "#4A4A4A":"Cinza 1", 
        "#767676":"Cinza 2", "#A3A3A3":"Cinza 3", "#D0D0D0":"Cinza 4" }
      </options>
    </fieldmodel>
    <fieldmodel name="ordem" datatype="integer"  column="ordem"/>
    <fieldmodel name="id_grupoempresarial" datatype="guid" column="id_grupoempresarial"/>
    <fieldmodel name="prazoexpiracao" datatype="integer" column="prazoexpiracao"/>
    <fieldmodel name="notificarexpiracaofaltando" datatype="integer" column="notificarexpiracaofaltando"/>
    <fieldmodel name="prioridadepadrao" datatype="boolean" column="prioridadepadrao"/>
    <fieldmodel name="descricao" datatype="string" column="descricao"/>
  </entity>
  <constructors>
    <constructoritem>tenant</constructoritem>
     <constructoritem>id_grupoempresarial</constructoritem>  
  </constructors>
  <viewbrowser label="Prioridades" layout="list" paginate="true" target="builtin">
    <fieldsbrowser>
      <fieldbrowser entitylink="prioridade" isid="true" visible="false"/>
      <fieldbrowser alias="Nome" entitylink="nome" visible="true" cansearch="true"/>
      <fieldbrowser alias="Cor" entitylink="cor" visible="true" cansearch="false"/>
      <fieldbrowser alias="Ordem" entitylink="ordem" visible="false" cansearch="false" alloworder="true" indefaultorder="true"/>
      <fieldbrowser alias="prazoexpiracao" entitylink="prazoexpiracao" visible="false" cansearch="false"/>
      <fieldbrowser alias="notificarexpiracaofaltando" entitylink="notificarexpiracaofaltando" visible="false" cansearch="false"/>
      <fieldbrowser alias="prioridadepadrao" entitylink="prioridadepadrao" visible="false" cansearch="false"/>
      <fieldbrowser alias="descricao" entitylink="descricao" visible="false" cansearch="false"/>
      <!-- Deve ser único, de forma que seja enumerado de prioridade -->
    </fieldsbrowser>
  </viewbrowser>
    <forms>
        <form name="default" label="Prioridade">
            <layout>
              <headerform>
                <row>
                    <cell controltype="textedit" label="Nome" colspan="12" entitylink="nome">
                      <validates>
                        <validate type="vnull" displaytext="O campo Nome não pode estar vazio"></validate>
                        <validate type="maxlength" value="30" displaytext="O campo Nome aceita no máximo 30 caracteres"/>
                        <validate type="unique" displaytext="Nome em uso! Escolha um nome válido!"/>
                      </validates>
                    </cell>
                </row>
                <row>
                    <cell controltype="textedit" label="Descrição" colspan="12" entitylink="descricao">
                      <validates>
                        <validate type="vnull" displaytext="O campo Descrição não pode estar vazio"></validate>
                        <validate type="maxlength" value="255" displaytext="O campo Nome aceita no máximo 255 caracteres"/>
                      </validates>
                    </cell>
                </row>
                <row>
                    <cell controltype="number" label="Prazo para expiração" colspan="6" entitylink="prazoexpiracao" />
                    <cell controltype="number" label="Notificar expiração faltando" colspan="6" entitylink="notificarexpiracaofaltando" />
                </row>
                <row>
                    <cell controltype="number" label="Ordem" colspan="6" entitylink="ordem" >
                      <validates>
                        <validate type="vnull" displaytext="O campo Ordem não pode estar vazio"></validate>
                        <validate type="maxlength" value="3" displaytext="O campo Ordem aceita no máximo 3 dígitos"/>
                      </validates>
                    </cell>
                    <cell entitylink="cor" controltype="combobox" label="Cor" colspan="6">
                      <validates>
                        <validate type="vnull" displaytext="O campo Cor não pode estar vazio"></validate>
                      </validates>
                    </cell>
                </row>
                <row>
                    <cell controltype="checkbox" label="Definir como padrão" colspan="6" entitylink="prioridadepadrao" />
                </row>
              </headerform>
            </layout>
          </form>
        <!-- <form name="show" label="Prioridade">
            <layout>
                <headerform>
                    <row> 
                        <cell name="nome" controltype="textedit" label="Nome" colspan="12" entitylink="nome"/>
                    </row> 
                    <row> 
                        <cell name="descricao" controltype="textedit" label="Descrição" colspan="12" entitylink="descricao"/>
                    </row>
                    <row> 
                        <cell name="prazoexpiracao" controltype="number" label="Ordem" colspan="12" entitylink="prazoexpiracao"/>
                    </row>
                    <row> 
                        <cell name="notificarexpiracaofaltando" controltype="number" label="Ordem" colspan="12" entitylink="notificarexpiracaofaltando"/>
                    </row>
                    <row> 
                        <cell name="ordem" controltype="number" label="Ordem" colspan="12" entitylink="ordem"/>
                    </row>
                    <row> 
                        <cell name="prioridadepadrao" controltype="checkbox" label="Definir como padrão" colspan="12" entitylink="prioridadepadrao"/>
                    </row>
                </headerform>           
            </layout>
        </form> -->
    </forms>
    <actions>
        <action form="default">
            <name>retrieve</name>
        </action>
        <action form="default" successMsg="A Prioridade foi criada com sucesso!" failMsg="Ocorreu um erro ao criar a Prioridade!">
            <name>Insert</name>
            <api>
              <name>prioridadeNovo</name>
              <fromto valueapi="nome" valueentity="nome"/>
              <fromto valueapi="ordem" valueentity="ordem"/>
              <fromto valueapi="cor" valueentity="cor"/>
              <fromto valueapi="prazoexpiracao" valueentity="prazoexpiracao"/>
              <fromto valueapi="notificarexpiracaofaltando" valueentity="notificarexpiracaofaltando"/>
              <fromto valueapi="prioridadepadrao" valueentity="prioridadepadrao"/>
              <fromto valueapi="descricao" valueentity="descricao"/>
              <fromto valueapi="tenant" valueentity="tenant"/>
              <fromto valueapi="id_grupoempresarial" valueentity="id_grupoempresarial"/>
            </api>
          </action> 
          <action form="default" successMsg="A Prioridade foi editada com sucesso!" failMsg="Ocorreu um erro ao editar a Prioridade!">
            <name>Update</name>
            <api>
              <name>prioridadeAlterar</name>
              <fromto valueapi="prioridade" valueentity="prioridade"/>
              <fromto valueapi="nome" valueentity="nome"/>
              <fromto valueapi="ordem" valueentity="ordem"/>
              <fromto valueapi="cor" valueentity="cor"/>
              <fromto valueapi="prazoexpiracao" valueentity="prazoexpiracao"/>
              <fromto valueapi="notificarexpiracaofaltando" valueentity="notificarexpiracaofaltando"/>
              <fromto valueapi="prioridadepadrao" valueentity="prioridadepadrao"/>
              <fromto valueapi="descricao" valueentity="descricao"/>
              <fromto valueapi="tenant" valueentity="tenant"/>
              <fromto valueapi="id_grupoempresarial" valueentity="id_grupoempresarial"/>
            </api>
          </action>
          <action successMsg="A Prioridade foi excluída com sucesso!" failMsg="Ocorreu um erro ao excluir a Prioridade!">
            <name>Delete</name>
            <api>
              <name>prioridadeExcluir</name>
              <fromto valueapi="prioridade" valueentity="prioridade"/>
              <fromto valueapi="tenant" valueentity="tenant"/>
              <fromto valueapi="id_grupoempresarial" valueentity="id_grupoempresarial"/>
            </api>
          </action>
    </actions>
</nsjusecase>