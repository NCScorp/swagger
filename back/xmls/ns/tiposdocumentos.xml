<?xml version="1.0" encoding="UTF-8"?>
<nsjusecase xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../vendor/nasajon/mdatransformer/schemas/nsjusecase.xsd" name="tiposdocumentos" label="tiposdocumentos" project="ns">
    <entity schema="ns" table="tiposdocumentos">
        <fieldmodel name="tipodocumento" datatype="guid" isid="true" column="tipodocumento"/>
        <fieldmodel name="nome" datatype="string" column="nome"/>
        <fieldmodel name="emissaonoprocesso" datatype="boolean" column="emissaonoprocesso"/>
        <fieldmodel name="documentosnecessarios" datatype="objectlist" column="id" useCaseLink="ns\documentosnecessarios" entityJoinType="left"/>
        <fieldmodel name="created_at" datatype="datetime" column="created_at"/>
        <fieldmodel name="updated_at" datatype="datetime" column="updated_at"/>
        <fieldmodel name="created_by" datatype="json" column="created_by"/>
        <fieldmodel name="updated_by" datatype="json" column="updated_by" />
        <fieldmodel name="tenant" datatype="integer" column="tenant"/>
        <fieldmodel name="dominio" datatype="integer" column="dominio"/>
        <fieldmodel name="id_grupoempresarial" datatype="guid" column="id_grupoempresarial"/>
        <fieldmodel name="prestador" datatype="guid" column="prestador"/>
    </entity>
    <constructors>
      <constructoritem required="true">tenant</constructoritem>
       <constructoritem>id_grupoempresarial</constructoritem>
    </constructors>
    <viewbrowser paginate="false" layout="list" target="builtin" label="Tipos de Documentos">
    <emptybuiltin title="Selecione ou adicione tipo de documento." gender="f">Selecione um tipo de documento no painel ao lado para ver suas informações.</emptybuiltin>
        <filters>
            <fieldsfilters>
                <fieldfilter entitylink="tipodocumento">
                    <conditions>
                        <condition type="neq"></condition>
                    </conditions>
                </fieldfilter>
                <fieldfilter entitylink="prestador">
                    <conditions>
                        <condition type="eq"></condition>
                    </conditions>
                </fieldfilter>
            </fieldsfilters>
        </filters>
        <fieldsbrowser>
            <fieldbrowser alias="tipodocumento" entitylink="tipodocumento" visible="false" isid="true" unique="true"/>
            <fieldbrowser alias="nome" entitylink="nome" visible="true" cansearch="true" alloworder="true"/>
            <fieldbrowser alias="prestador" entitylink="prestador" visible="true" />
            <fieldbrowser alias="Pode emitir durante o atendimento" entitylink="emissaonoprocesso" visible="true" cansearch="true" alloworder="true"/>
        </fieldsbrowser>
    </viewbrowser>
    <forms>
      <form name="default"  label="Tipo de Documento">
          <layout>
              <headerform>
                  <row>
                      <cell  colspan="6" name="nome" controltype="textedit" entitylink="nome" label="Nome">
                          <validates>
                              <validate type="vnull" displaytext="O nome do campo não pode ser vazio."/>
                              <validate type="maxlength" value="100" displaytext="O campo nome não pode ter mais que 100 caracteres"/>
                          </validates>
                      </cell>
                      <cell colspan="6" name="emissaonoprocesso" controltype="checkbox" entitylink="emissaonoprocesso" label="Documento pode ser emitido durante o atendimento"/>
                  </row>
                  <row visible="emissaonoprocesso">
                    <cell>
                        <groupbox>
                            <caption text="Documentos necessários"/>
                            <row>
                                <cell colspan="12" name="documentosnecessarios" controltype="objectlist" entitylink="documentosnecessarios" label="Documentos necessários">
                              </cell>
                            </row>
                        </groupbox>
                    </cell>
                  </row>
                  <row>
                    <cell colspan="6" name="prestador" controltype="textedit" entitylink="prestador" label="Prestador"></cell>
                  </row>
              </headerform>
          </layout>
      </form>
    </forms>
    <actions>
        <action>
            <name>Retrieve</name>
        </action>
        <action successMsg="O Tipo de Documento foi criado com sucesso!" failMsg="Ocorreu um erro ao criar o Tipo de Documento!">
            <name>Insert</name>
            <api>
                <name>TipoDocumentoNovo_v3</name>
                <fromto valueapi="nome" valueentity="nome"/>
                <fromto valueapi="emissaonoprocesso" valueentity="emissaonoprocesso"/>
                <fromto valueapi="dominio" valueentity ="dominio"/>
                <fromto valueapi="created_by" valueentity ="logged_user"/>
                <fromto valueapi="tenant" valueentity ="tenant"/>
                <fromto valueapi="documentosnecessarios" valueentity="documentosnecessarios"/>
                <fromto valueapi="id_grupoempresarial" valueentity="id_grupoempresarial" />
                <fromto valueapi="prestador" valueentity="prestador" />
            </api>
        </action>
        <action successMsg="O Tipo de Documento foi editado com sucesso!" failMsg="Ocorreu um erro ao editar o Tipo de Documento!">
            <name>Update</name>
            <api>
                <name>TipoDocumentoAlterar_v2</name>
                <fromto valueapi="id" valueentity="tipodocumento"/>
                <fromto valueapi="nome" valueentity="nome"/>
                <fromto valueapi="emissaonoprocesso" valueentity="emissaonoprocesso"/>
                <fromto valueapi="dominio" valueentity ="dominio"/>
                <fromto valueapi="updated_by" valueentity ="logged_user"/>
                <fromto valueapi="tenant" valueentity ="tenant"/>
                <fromto valueapi="documentosnecessarios" valueentity="documentosnecessarios"/>
                <fromto valueapi="id_grupoempresarial" valueentity="id_grupoempresarial" />
            </api>
        </action>
    </actions>
</nsjusecase>