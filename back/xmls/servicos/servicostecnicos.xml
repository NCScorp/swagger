<?xml version="1.0" encoding="utf-8"?>
<nsjusecase xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../vendor/nasajon/mdatransformer/schemas/nsjusecase.xsd" name="servicostecnicos" label="servicostecnicos" project="servicos">
    <entity schema="servicos" table="servicostecnicos">
        <fieldmodel name="servicotecnico" datatype="guid" isid="true" column="servicotecnico" />
        <fieldmodel name="codigo" datatype="string" column="codigo" />
        <fieldmodel name="descricao" datatype="string" column="descricao" />
        <fieldmodel name="valor" datatype="moeda" column="valor" />
        <fieldmodel name="itemdefaturamento" datatype="guid" column="servicovinculado" useCaseLink="servicos\itensdefaturamento" entityJoinType="left"/>
        <fieldmodel name="id_grupoempresarial" datatype="guid" column="id_grupoempresarial" />
        <fieldmodel name="tenant" datatype="integer" column="tenant" />
        <fieldmodel name="tipo" datatype="integer" column="tipo" >
            <options>
                {"0":"Padrão","1":"Transporte"}
            </options>
        </fieldmodel>
    </entity>
    <constructors>
      <constructoritem required="true">id_grupoempresarial</constructoritem>
      <constructoritem required="true">tenant</constructoritem>      
    </constructors>
    <viewbrowser paginate="true" layout="list" target="builtin" label="Serviços Técnicos ">
        <fieldsbrowser>
            <fieldbrowser alias="servicotecnico" entitylink="servicotecnico" isid="true" visible="false" />
            <fieldbrowser alias="descricao" entitylink="descricao" visible="true" cansearch="true" />
            <fieldbrowser alias="codigo" entitylink="codigo" visible="true" cansearch="true" />
            <fieldbrowser alias="tipo" entitylink="tipo" visible="true" cansearch="true" />
            <fieldbrowser entitylink="valor" visible="false"  />
            <fieldbrowser entitylink="itemdefaturamento" visible="false" cansearch="false" />
        </fieldsbrowser>
    </viewbrowser>
    <forms>
        <form name="default">
            <layout>
                <headerform>
                    <row>
                        <cell controltype="textedit" entitylink="codigo" colspan="3" label="Código">
                            <validates>
                                <validate type="vnull" displaytext="O campo Código não pode ser vazio."/>
                                <validate type="maxlength" value="30" displaytext="O campo Código não deve exceder 30 caracteres."/>
                            </validates>
                        </cell>
                        <cell controltype="textedit" entitylink="descricao" colspan="4" label="Nome">
                            <validates>
                                <validate type="vnull" displaytext="O campo Nome não pode ser vazio."/>
                                <validate type="maxlength" value="150" displaytext="O campo Nome não deve exceder 150 caracteres."/>
                            </validates>
                        </cell>
                        <cell controltype="money" entitylink="valor" colspan="3" label="Valor (Opcional)">                         
                        </cell>
                    </row>
                    <row>
                        <cell controltype="lookup" label="Itens de Faturamento (Opcional)" colspan="6" entitylink="itemdefaturamento" fielddetaillookup="descricaoservico"> 
                            <filter field="bloqueado" condition="eq" value="0"/>
                        </cell>
                    </row>
                    <row>
                        <!-- <cell name="tiposservicos" controltype="lookup" label="Tipo Serviço (Opcional)" colspan="4" entitylink="tiposservicos" fielddetaillookup="descricao">                        -->
                        <!-- </cell> -->
                        <cell controltype="combobox" label="Tipo" colspan="4" entitylink="tipo" >
                                <validates>
                                <validate type="vnull" displaytext="O campo Tipo não pode ser vazio."/>                    
                            </validates>
                        </cell>
                    </row>
                </headerform>
            </layout>
        </form>
    </forms>
</nsjusecase>